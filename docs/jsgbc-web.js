!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["jsgbc-web"]=t():e["jsgbc-web"]=t()}(window,function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){var i;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(t,r){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,function(r,n){"use strict";var s=[],o=r.document,a=Object.getPrototypeOf,h=s.slice,c=s.concat,u=s.push,l=s.indexOf,f={},p=f.toString,d=f.hasOwnProperty,m=d.toString,g=m.call(Object),y={},v=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},C=function(e){return null!=e&&e===e.window},b={type:!0,src:!0,noModule:!0};function S(e,t,r){var i,n=(t=t||o).createElement("script");if(n.text=e,r)for(i in b)r[i]&&(n[i]=r[i]);t.head.appendChild(n).parentNode.removeChild(n)}function B(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[p.call(e)]||"object":typeof e}var k=function(e,t){return new k.fn.init(e,t)},R=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(e){var t=!!e&&"length"in e&&e.length,r=B(e);return!v(e)&&!C(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}k.fn=k.prototype={jquery:"3.3.1",constructor:k,length:0,toArray:function(){return h.call(this)},get:function(e){return null==e?h.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(e){return this.pushStack(k.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:s.sort,splice:s.splice},k.extend=k.fn.extend=function(){var e,t,r,i,n,s,o=arguments[0]||{},a=1,h=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||v(o)||(o={}),a===h&&(o=this,a--);a<h;a++)if(null!=(e=arguments[a]))for(t in e)r=o[t],o!==(i=e[t])&&(c&&i&&(k.isPlainObject(i)||(n=Array.isArray(i)))?(n?(n=!1,s=r&&Array.isArray(r)?r:[]):s=r&&k.isPlainObject(r)?r:{},o[t]=k.extend(c,s,i)):void 0!==i&&(o[t]=i));return o},k.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==p.call(e))&&(!(t=a(e))||"function"==typeof(r=d.call(t,"constructor")&&t.constructor)&&m.call(r)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){S(e)},each:function(e,t){var r,i=0;if(w(e))for(r=e.length;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(R,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(w(Object(e))?k.merge(r,"string"==typeof e?[e]:e):u.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:l.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,s=e.length,o=!r;n<s;n++)!t(e[n],n)!==o&&i.push(e[n]);return i},map:function(e,t,r){var i,n,s=0,o=[];if(w(e))for(i=e.length;s<i;s++)null!=(n=t(e[s],s,r))&&o.push(n);else for(s in e)null!=(n=t(e[s],s,r))&&o.push(n);return c.apply([],o)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=s[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()});var T=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(e){var t,r,i,n,s,o,a,h,c,u,l,f,p,d,m,g,y,v,C,b="sizzle"+1*new Date,S=e.document,B=0,k=0,R=oe(),w=oe(),T=oe(),L=function(e,t){return e===t&&(l=!0),0},F={}.hasOwnProperty,A=[],x=A.pop,H=A.push,P=A.push,M=A.slice,E=function(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",W="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",G="\\["+D+"*("+W+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+W+"))|)"+D+"*\\]",N=":("+W+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+G+")*)|.*)\\)|)",_=new RegExp(D+"+","g"),q=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g"),I=new RegExp("^"+D+"*,"+D+"*"),j=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),U=new RegExp("="+D+"*([^\\]'\"]*?)"+D+"*\\]","g"),Z=new RegExp(N),z=new RegExp("^"+W+"$"),V={ID:new RegExp("^#("+W+")"),CLASS:new RegExp("^\\.("+W+")"),TAG:new RegExp("^("+W+"|[*])"),ATTR:new RegExp("^"+G),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,K=new RegExp("\\\\([\\da-f]{1,6}"+D+"?|("+D+")|.)","ig"),ee=function(e,t,r){var i="0x"+t-65536;return i!=i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){f()},ne=ve(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{P.apply(A=M.call(S.childNodes),S.childNodes),A[S.childNodes.length].nodeType}catch(e){P={apply:A.length?function(e,t){H.apply(e,M.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}function se(e,t,i,n){var s,a,c,u,l,d,y,v=t&&t.ownerDocument,B=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==B&&9!==B&&11!==B)return i;if(!n&&((t?t.ownerDocument||t:S)!==p&&f(t),t=t||p,m)){if(11!==B&&(l=X.exec(e)))if(s=l[1]){if(9===B){if(!(c=t.getElementById(s)))return i;if(c.id===s)return i.push(c),i}else if(v&&(c=v.getElementById(s))&&C(t,c)&&c.id===s)return i.push(c),i}else{if(l[2])return P.apply(i,t.getElementsByTagName(e)),i;if((s=l[3])&&r.getElementsByClassName&&t.getElementsByClassName)return P.apply(i,t.getElementsByClassName(s)),i}if(r.qsa&&!T[e+" "]&&(!g||!g.test(e))){if(1!==B)v=t,y=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(te,re):t.setAttribute("id",u=b),a=(d=o(e)).length;a--;)d[a]="#"+u+" "+ye(d[a]);y=d.join(","),v=Q.test(e)&&me(t.parentNode)||t}if(y)try{return P.apply(i,v.querySelectorAll(y)),i}catch(e){}finally{u===b&&t.removeAttribute("id")}}}return h(e.replace(q,"$1"),t,i,n)}function oe(){var e=[];return function t(r,n){return e.push(r+" ")>i.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function ae(e){return e[b]=!0,e}function he(e){var t=p.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var r=e.split("|"),n=r.length;n--;)i.attrHandle[r[n]]=t}function ue(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function le(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function pe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ne(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function de(e){return ae(function(t){return t=+t,ae(function(r,i){for(var n,s=e([],r.length,t),o=s.length;o--;)r[n=s[o]]&&(r[n]=!(i[n]=r[n]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=se.support={},s=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=se.setDocument=function(e){var t,n,o=e?e.ownerDocument||e:S;return o!==p&&9===o.nodeType&&o.documentElement?(d=(p=o).documentElement,m=!s(p),S!==p&&(n=p.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ie,!1):n.attachEvent&&n.attachEvent("onunload",ie)),r.attributes=he(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=he(function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=$.test(p.getElementsByClassName),r.getById=he(function(e){return d.appendChild(e).id=b,!p.getElementsByName||!p.getElementsByName(b).length}),r.getById?(i.filter.ID=function(e){var t=e.replace(K,ee);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r=t.getElementById(e);return r?[r]:[]}}):(i.filter.ID=function(e){var t=e.replace(K,ee);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r,i,n,s=t.getElementById(e);if(s){if((r=s.getAttributeNode("id"))&&r.value===e)return[s];for(n=t.getElementsByName(e),i=0;s=n[i++];)if((r=s.getAttributeNode("id"))&&r.value===e)return[s]}return[]}}),i.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],n=0,s=t.getElementsByTagName(e);if("*"===e){for(;r=s[n++];)1===r.nodeType&&i.push(r);return i}return s},i.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],g=[],(r.qsa=$.test(p.querySelectorAll))&&(he(function(e){d.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+D+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+D+"*(?:value|"+O+")"),e.querySelectorAll("[id~="+b+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]")}),he(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+D+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(r.matchesSelector=$.test(v=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&he(function(e){r.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),y.push("!=",N)}),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),t=$.test(d.compareDocumentPosition),C=t||$.test(d.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},L=t?function(e,t){if(e===t)return l=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===p||e.ownerDocument===S&&C(S,e)?-1:t===p||t.ownerDocument===S&&C(S,t)?1:u?E(u,e)-E(u,t):0:4&i?-1:1)}:function(e,t){if(e===t)return l=!0,0;var r,i=0,n=e.parentNode,s=t.parentNode,o=[e],a=[t];if(!n||!s)return e===p?-1:t===p?1:n?-1:s?1:u?E(u,e)-E(u,t):0;if(n===s)return ue(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;o[i]===a[i];)i++;return i?ue(o[i],a[i]):o[i]===S?-1:a[i]===S?1:0},p):p},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&f(e),t=t.replace(U,"='$1']"),r.matchesSelector&&m&&!T[t+" "]&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var i=v.call(e,t);if(i||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return se(t,p,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==p&&f(e),C(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==p&&f(e);var n=i.attrHandle[t.toLowerCase()],s=n&&F.call(i.attrHandle,t.toLowerCase())?n(e,t,!m):void 0;return void 0!==s?s:r.attributes||!m?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},se.escape=function(e){return(e+"").replace(te,re)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],n=0,s=0;if(l=!r.detectDuplicates,u=!r.sortStable&&e.slice(0),e.sort(L),l){for(;t=e[s++];)t===e[s]&&(n=i.push(s));for(;n--;)e.splice(i[n],1)}return u=null,e},n=se.getText=function(e){var t,r="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=n(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i++];)r+=n(t);return r},(i=se.selectors={cacheLength:50,createPseudo:ae,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(K,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(K,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&Z.test(r)&&(t=o(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(K,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=R[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&R(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(i){var n=se.attr(i,e);return null==n?"!="===t:!t||(n+="","="===t?n===r:"!="===t?n!==r:"^="===t?r&&0===n.indexOf(r):"*="===t?r&&n.indexOf(r)>-1:"$="===t?r&&n.slice(-r.length)===r:"~="===t?(" "+n.replace(_," ")+" ").indexOf(r)>-1:"|="===t&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,n){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,h){var c,u,l,f,p,d,m=s!==o?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!h&&!a,C=!1;if(g){if(s){for(;m;){for(f=t;f=f[m];)if(a?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?g.firstChild:g.lastChild],o&&v){for(C=(p=(c=(u=(l=(f=g)[b]||(f[b]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]||[])[0]===B&&c[1])&&c[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(C=p=0)||d.pop();)if(1===f.nodeType&&++C&&f===t){u[e]=[B,p,C];break}}else if(v&&(C=p=(c=(u=(l=(f=t)[b]||(f[b]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]||[])[0]===B&&c[1]),!1===C)for(;(f=++p&&f&&f[m]||(C=p=0)||d.pop())&&((a?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++C||(v&&((u=(l=f[b]||(f[b]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]=[B,C]),f!==t)););return(C-=n)===i||C%i==0&&C/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return n[b]?n(t):n.length>1?(r=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ae(function(e,r){for(var i,s=n(e,t),o=s.length;o--;)e[i=E(e,s[o])]=!(r[i]=s[o])}):function(e){return n(e,0,r)}):n}},pseudos:{not:ae(function(e){var t=[],r=[],i=a(e.replace(q,"$1"));return i[b]?ae(function(e,t,r,n){for(var s,o=i(e,null,n,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,n,s){return t[0]=e,i(t,null,s,r),t[0]=null,!r.pop()}}),has:ae(function(e){return function(t){return se(e,t).length>0}}),contains:ae(function(e){return e=e.replace(K,ee),function(t){return(t.textContent||t.innerText||n(t)).indexOf(e)>-1}}),lang:ae(function(e){return z.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(K,ee).toLowerCase(),function(t){var r;do{if(r=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:de(function(){return[0]}),last:de(function(e,t){return[t-1]}),eq:de(function(e,t,r){return[r<0?r+t:r]}),even:de(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:de(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:de(function(e,t,r){for(var i=r<0?r+t:r;--i>=0;)e.push(i);return e}),gt:de(function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=le(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=fe(t);function ge(){}function ye(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function ve(e,t,r){var i=t.dir,n=t.next,s=n||i,o=r&&"parentNode"===s,a=k++;return t.first?function(t,r,n){for(;t=t[i];)if(1===t.nodeType||o)return e(t,r,n);return!1}:function(t,r,h){var c,u,l,f=[B,a];if(h){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,r,h))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(u=(l=t[b]||(t[b]={}))[t.uniqueID]||(l[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[s])&&c[0]===B&&c[1]===a)return f[2]=c[2];if(u[s]=f,f[2]=e(t,r,h))return!0}return!1}}function Ce(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function be(e,t,r,i,n){for(var s,o=[],a=0,h=e.length,c=null!=t;a<h;a++)(s=e[a])&&(r&&!r(s,i,n)||(o.push(s),c&&t.push(a)));return o}function Se(e,t,r,i,n,s){return i&&!i[b]&&(i=Se(i)),n&&!n[b]&&(n=Se(n,s)),ae(function(s,o,a,h){var c,u,l,f=[],p=[],d=o.length,m=s||function(e,t,r){for(var i=0,n=t.length;i<n;i++)se(e,t[i],r);return r}(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?m:be(m,f,e,a,h),y=r?n||(s?e:d||i)?[]:o:g;if(r&&r(g,y,a,h),i)for(c=be(y,p),i(c,[],a,h),u=c.length;u--;)(l=c[u])&&(y[p[u]]=!(g[p[u]]=l));if(s){if(n||e){if(n){for(c=[],u=y.length;u--;)(l=y[u])&&c.push(g[u]=l);n(null,y=[],c,h)}for(u=y.length;u--;)(l=y[u])&&(c=n?E(s,l):f[u])>-1&&(s[c]=!(o[c]=l))}}else y=be(y===o?y.splice(d,y.length):y),n?n(null,o,y,h):P.apply(o,y)})}function Be(e){for(var t,r,n,s=e.length,o=i.relative[e[0].type],a=o||i.relative[" "],h=o?1:0,u=ve(function(e){return e===t},a,!0),l=ve(function(e){return E(t,e)>-1},a,!0),f=[function(e,r,i){var n=!o&&(i||r!==c)||((t=r).nodeType?u(e,r,i):l(e,r,i));return t=null,n}];h<s;h++)if(r=i.relative[e[h].type])f=[ve(Ce(f),r)];else{if((r=i.filter[e[h].type].apply(null,e[h].matches))[b]){for(n=++h;n<s&&!i.relative[e[n].type];n++);return Se(h>1&&Ce(f),h>1&&ye(e.slice(0,h-1).concat({value:" "===e[h-2].type?"*":""})).replace(q,"$1"),r,h<n&&Be(e.slice(h,n)),n<s&&Be(e=e.slice(n)),n<s&&ye(e))}f.push(r)}return Ce(f)}return ge.prototype=i.filters=i.pseudos,i.setFilters=new ge,o=se.tokenize=function(e,t){var r,n,s,o,a,h,c,u=w[e+" "];if(u)return t?0:u.slice(0);for(a=e,h=[],c=i.preFilter;a;){for(o in r&&!(n=I.exec(a))||(n&&(a=a.slice(n[0].length)||a),h.push(s=[])),r=!1,(n=j.exec(a))&&(r=n.shift(),s.push({value:r,type:n[0].replace(q," ")}),a=a.slice(r.length)),i.filter)!(n=V[o].exec(a))||c[o]&&!(n=c[o](n))||(r=n.shift(),s.push({value:r,type:o,matches:n}),a=a.slice(r.length));if(!r)break}return t?a.length:a?se.error(e):w(e,h).slice(0)},a=se.compile=function(e,t){var r,n=[],s=[],a=T[e+" "];if(!a){for(t||(t=o(e)),r=t.length;r--;)(a=Be(t[r]))[b]?n.push(a):s.push(a);(a=T(e,function(e,t){var r=t.length>0,n=e.length>0,s=function(s,o,a,h,u){var l,d,g,y=0,v="0",C=s&&[],b=[],S=c,k=s||n&&i.find.TAG("*",u),R=B+=null==S?1:Math.random()||.1,w=k.length;for(u&&(c=o===p||o||u);v!==w&&null!=(l=k[v]);v++){if(n&&l){for(d=0,o||l.ownerDocument===p||(f(l),a=!m);g=e[d++];)if(g(l,o||p,a)){h.push(l);break}u&&(B=R)}r&&((l=!g&&l)&&y--,s&&C.push(l))}if(y+=v,r&&v!==y){for(d=0;g=t[d++];)g(C,b,o,a);if(s){if(y>0)for(;v--;)C[v]||b[v]||(b[v]=x.call(h));b=be(b)}P.apply(h,b),u&&!s&&b.length>0&&y+t.length>1&&se.uniqueSort(h)}return u&&(B=R,c=S),C};return r?ae(s):s}(s,n))).selector=e}return a},h=se.select=function(e,t,r,n){var s,h,c,u,l,f="function"==typeof e&&e,p=!n&&o(e=f.selector||e);if(r=r||[],1===p.length){if((h=p[0]=p[0].slice(0)).length>2&&"ID"===(c=h[0]).type&&9===t.nodeType&&m&&i.relative[h[1].type]){if(!(t=(i.find.ID(c.matches[0].replace(K,ee),t)||[])[0]))return r;f&&(t=t.parentNode),e=e.slice(h.shift().value.length)}for(s=V.needsContext.test(e)?0:h.length;s--&&(c=h[s],!i.relative[u=c.type]);)if((l=i.find[u])&&(n=l(c.matches[0].replace(K,ee),Q.test(h[0].type)&&me(t.parentNode)||t))){if(h.splice(s,1),!(e=n.length&&ye(h)))return P.apply(r,n),r;break}}return(f||a(e,p))(n,t,!m,r,!t||Q.test(e)&&me(t.parentNode)||t),r},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=!!l,f(),r.sortDetached=he(function(e){return 1&e.compareDocumentPosition(p.createElement("fieldset"))}),he(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),r.attributes&&he(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),he(function(e){return null==e.getAttribute("disabled")})||ce(O,function(e,t,r){var i;if(!r)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),se}(r);k.find=T,k.expr=T.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=T.uniqueSort,k.text=T.getText,k.isXMLDoc=T.isXML,k.contains=T.contains,k.escapeSelector=T.escape;var L=function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&k(e).is(r))break;i.push(e)}return i},F=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},A=k.expr.match.needsContext;function x(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,r){return v(t)?k.grep(e,function(e,i){return!!t.call(e,i,e)!==r}):t.nodeType?k.grep(e,function(e){return e===t!==r}):"string"!=typeof t?k.grep(e,function(e){return l.call(t,e)>-1!==r}):k.filter(t,e,r)}k.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?k.find.matchesSelector(i,e)?[i]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,r,i=this.length,n=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<i;t++)if(k.contains(n[t],this))return!0}));for(r=this.pushStack([]),t=0;t<i;t++)k.find(e,n[t],r);return i>1?k.uniqueSort(r):r},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&A.test(e)?k(e):e||[],!1).length}});var M,E=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,r){var i,n;if(!e)return this;if(r=r||M,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:E.exec(e))||!i[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),H.test(i[1])&&k.isPlainObject(t))for(i in t)v(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(n=o.getElementById(i[2]))&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):v(e)?void 0!==r.ready?r.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,M=k(o);var O=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function W(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.fn.extend({has:function(e){var t=k(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var r,i=0,n=this.length,s=[],o="string"!=typeof e&&k(e);if(!A.test(e))for(;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&k.find.matchesSelector(r,e))){s.push(r);break}return this.pushStack(s.length>1?k.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?l.call(k(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return L(e,"parentNode")},parentsUntil:function(e,t,r){return L(e,"parentNode",r)},next:function(e){return W(e,"nextSibling")},prev:function(e){return W(e,"previousSibling")},nextAll:function(e){return L(e,"nextSibling")},prevAll:function(e){return L(e,"previousSibling")},nextUntil:function(e,t,r){return L(e,"nextSibling",r)},prevUntil:function(e,t,r){return L(e,"previousSibling",r)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return x(e,"iframe")?e.contentDocument:(x(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(e,t){k.fn[e]=function(r,i){var n=k.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=k.filter(i,n)),this.length>1&&(D[e]||k.uniqueSort(n),O.test(e)&&n.reverse()),this.pushStack(n)}});var G=/[^\x20\t\r\n\f]+/g;function N(e){return e}function _(e){throw e}function q(e,t,r,i){var n;try{e&&v(n=e.promise)?n.call(e).done(t).fail(r):e&&v(n=e.then)?n.call(e,t,r):t.apply(void 0,[e].slice(i))}catch(e){r.apply(void 0,[e])}}k.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return k.each(e.match(G)||[],function(e,r){t[r]=!0}),t}(e):k.extend({},e);var t,r,i,n,s=[],o=[],a=-1,h=function(){for(n=n||e.once,i=t=!0;o.length;a=-1)for(r=o.shift();++a<s.length;)!1===s[a].apply(r[0],r[1])&&e.stopOnFalse&&(a=s.length,r=!1);e.memory||(r=!1),t=!1,n&&(s=r?[]:"")},c={add:function(){return s&&(r&&!t&&(a=s.length-1,o.push(r)),function t(r){k.each(r,function(r,i){v(i)?e.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==B(i)&&t(i)})}(arguments),r&&!t&&h()),this},remove:function(){return k.each(arguments,function(e,t){for(var r;(r=k.inArray(t,s,r))>-1;)s.splice(r,1),r<=a&&a--}),this},has:function(e){return e?k.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return n=o=[],s=r="",this},disabled:function(){return!s},lock:function(){return n=o=[],r||t||(s=r=""),this},locked:function(){return!!n},fireWith:function(e,r){return n||(r=[e,(r=r||[]).slice?r.slice():r],o.push(r),t||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},k.extend({Deferred:function(e){var t=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return k.Deferred(function(r){k.each(t,function(t,i){var n=v(e[i[4]])&&e[i[4]];s[i[1]](function(){var e=n&&n.apply(this,arguments);e&&v(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[i[0]+"With"](this,n?[e]:arguments)})}),e=null}).promise()},then:function(e,i,n){var s=0;function o(e,t,i,n){return function(){var a=this,h=arguments,c=function(){var r,c;if(!(e<s)){if((r=i.apply(a,h))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,v(c)?n?c.call(r,o(s,t,N,n),o(s,t,_,n)):(s++,c.call(r,o(s,t,N,n),o(s,t,_,n),o(s,t,N,t.notifyWith))):(i!==N&&(a=void 0,h=[r]),(n||t.resolveWith)(a,h))}},u=n?c:function(){try{c()}catch(r){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(r,u.stackTrace),e+1>=s&&(i!==_&&(a=void 0,h=[r]),t.rejectWith(a,h))}};e?u():(k.Deferred.getStackHook&&(u.stackTrace=k.Deferred.getStackHook()),r.setTimeout(u))}}return k.Deferred(function(r){t[0][3].add(o(0,r,v(n)?n:N,r.notifyWith)),t[1][3].add(o(0,r,v(e)?e:N)),t[2][3].add(o(0,r,v(i)?i:_))}).promise()},promise:function(e){return null!=e?k.extend(e,n):n}},s={};return k.each(t,function(e,r){var o=r[2],a=r[5];n[r[1]]=o.add,a&&o.add(function(){i=a},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),s[r[0]]=function(){return s[r[0]+"With"](this===s?void 0:this,arguments),this},s[r[0]+"With"]=o.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,r=t,i=Array(r),n=h.call(arguments),s=k.Deferred(),o=function(e){return function(r){i[e]=this,n[e]=arguments.length>1?h.call(arguments):r,--t||s.resolveWith(i,n)}};if(t<=1&&(q(e,s.done(o(r)).resolve,s.reject,!t),"pending"===s.state()||v(n[r]&&n[r].then)))return s.then();for(;r--;)q(n[r],o(r),s.reject);return s.promise()}});var I=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&I.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){r.setTimeout(function(){throw e})};var j=k.Deferred();function U(){o.removeEventListener("DOMContentLoaded",U),r.removeEventListener("load",U),k.ready()}k.fn.ready=function(e){return j.then(e).catch(function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==e&&--k.readyWait>0||j.resolveWith(o,[k]))}}),k.ready.then=j.then,"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?r.setTimeout(k.ready):(o.addEventListener("DOMContentLoaded",U),r.addEventListener("load",U));var Z=function(e,t,r,i,n,s,o){var a=0,h=e.length,c=null==r;if("object"===B(r))for(a in n=!0,r)Z(e,t,a,r[a],!0,s,o);else if(void 0!==i&&(n=!0,v(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,r){return c.call(k(e),r)})),t))for(;a<h;a++)t(e[a],r,o?i:i.call(e[a],a,t(e[a],r)));return n?e:c?t.call(e):h?t(e[0],r):s},z=/^-ms-/,V=/-([a-z])/g;function J(e,t){return t.toUpperCase()}function Y(e){return e.replace(z,"ms-").replace(V,J)}var $=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=k.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var i,n=this.cache(e);if("string"==typeof t)n[Y(t)]=r;else for(i in t)n[Y(i)]=t[i];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][Y(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i=e[this.expando];if(void 0!==i){if(void 0!==t){r=(t=Array.isArray(t)?t.map(Y):(t=Y(t))in i?[t]:t.match(G)||[]).length;for(;r--;)delete i[t[r]]}(void 0===t||k.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new X,K=new X,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function re(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(r)}catch(e){}K.set(e,t,r)}else r=void 0;return r}k.extend({hasData:function(e){return K.hasData(e)||Q.hasData(e)},data:function(e,t,r){return K.access(e,t,r)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,r){return Q.access(e,t,r)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(e,t){var r,i,n,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(n=K.get(s),1===s.nodeType&&!Q.get(s,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&0===(i=o[r].name).indexOf("data-")&&(i=Y(i.slice(5)),re(s,i,n[i]));Q.set(s,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each(function(){K.set(this,e)}):Z(this,function(t){var r;if(s&&void 0===t)return void 0!==(r=K.get(s,e))?r:void 0!==(r=re(s,e))?r:void 0;this.each(function(){K.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),k.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=Q.get(e,t),r&&(!i||Array.isArray(r)?i=Q.access(e,t,k.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=k.queue(e,t),i=r.length,n=r.shift(),s=k._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete s.stop,n.call(e,function(){k.dequeue(e,t)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Q.get(e,r)||Q.access(e,r,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",r])})})}}),k.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?k.queue(this[0],e):void 0===t?this:this.each(function(){var r=k.queue(this,e,t);k._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&k.dequeue(this,e)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=k.Deferred(),s=this,o=this.length,a=function(){--i||n.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=Q.get(s[o],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),n.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],oe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&k.contains(e.ownerDocument,e)&&"none"===k.css(e,"display")},ae=function(e,t,r,i){var n,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in n=r.apply(e,i||[]),t)e.style[s]=o[s];return n};function he(e,t,r,i){var n,s,o=20,a=i?function(){return i.cur()}:function(){return k.css(e,t,"")},h=a(),c=r&&r[3]||(k.cssNumber[t]?"":"px"),u=(k.cssNumber[t]||"px"!==c&&+h)&&ne.exec(k.css(e,t));if(u&&u[3]!==c){for(h/=2,c=c||u[3],u=+h||1;o--;)k.style(e,t,u+c),(1-s)*(1-(s=a()/h||.5))<=0&&(o=0),u/=s;u*=2,k.style(e,t,u+c),r=r||[]}return r&&(u=+u||+h||0,n=r[1]?u+(r[1]+1)*r[2]:+r[2],i&&(i.unit=c,i.start=u,i.end=n)),n}var ce={};function ue(e){var t,r=e.ownerDocument,i=e.nodeName,n=ce[i];return n||(t=r.body.appendChild(r.createElement(i)),n=k.css(t,"display"),t.parentNode.removeChild(t),"none"===n&&(n="block"),ce[i]=n,n)}function le(e,t){for(var r,i,n=[],s=0,o=e.length;s<o;s++)(i=e[s]).style&&(r=i.style.display,t?("none"===r&&(n[s]=Q.get(i,"display")||null,n[s]||(i.style.display="")),""===i.style.display&&oe(i)&&(n[s]=ue(i))):"none"!==r&&(n[s]="none",Q.set(i,"display",r)));for(s=0;s<o;s++)null!=n[s]&&(e[s].style.display=n[s]);return e}k.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){oe(this)?k(this).show():k(this).hide()})}});var fe=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,de=/^$|^module$|\/(?:java|ecma)script/i,me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&x(e,t)?k.merge([e],r):r}function ye(e,t){for(var r=0,i=e.length;r<i;r++)Q.set(e[r],"globalEval",!t||Q.get(t[r],"globalEval"))}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var ve,Ce,be=/<|&#?\w+;/;function Se(e,t,r,i,n){for(var s,o,a,h,c,u,l=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if((s=e[p])||0===s)if("object"===B(s))k.merge(f,s.nodeType?[s]:s);else if(be.test(s)){for(o=o||l.appendChild(t.createElement("div")),a=(pe.exec(s)||["",""])[1].toLowerCase(),h=me[a]||me._default,o.innerHTML=h[1]+k.htmlPrefilter(s)+h[2],u=h[0];u--;)o=o.lastChild;k.merge(f,o.childNodes),(o=l.firstChild).textContent=""}else f.push(t.createTextNode(s));for(l.textContent="",p=0;s=f[p++];)if(i&&k.inArray(s,i)>-1)n&&n.push(s);else if(c=k.contains(s.ownerDocument,s),o=ge(l.appendChild(s),"script"),c&&ye(o),r)for(u=0;s=o[u++];)de.test(s.type||"")&&r.push(s);return l}ve=o.createDocumentFragment().appendChild(o.createElement("div")),(Ce=o.createElement("input")).setAttribute("type","radio"),Ce.setAttribute("checked","checked"),Ce.setAttribute("name","t"),ve.appendChild(Ce),y.checkClone=ve.cloneNode(!0).cloneNode(!0).lastChild.checked,ve.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ve.cloneNode(!0).lastChild.defaultValue;var Be=o.documentElement,ke=/^key/,Re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,we=/^([^.]*)(?:\.(.+)|)/;function Te(){return!0}function Le(){return!1}function Fe(){try{return o.activeElement}catch(e){}}function Ae(e,t,r,i,n,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof r&&(i=i||r,r=void 0),t)Ae(e,a,r,i,t[a],s);return e}if(null==i&&null==n?(n=r,i=r=void 0):null==n&&("string"==typeof r?(n=i,i=void 0):(n=i,i=r,r=void 0)),!1===n)n=Le;else if(!n)return e;return 1===s&&(o=n,(n=function(e){return k().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=k.guid++)),e.each(function(){k.event.add(this,t,n,i,r)})}k.event={global:{},add:function(e,t,r,i,n){var s,o,a,h,c,u,l,f,p,d,m,g=Q.get(e);if(g)for(r.handler&&(r=(s=r).handler,n=s.selector),n&&k.find.matchesSelector(Be,n),r.guid||(r.guid=k.guid++),(h=g.events)||(h=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==k&&k.event.triggered!==t.type?k.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(G)||[""]).length;c--;)p=m=(a=we.exec(t[c])||[])[1],d=(a[2]||"").split(".").sort(),p&&(l=k.event.special[p]||{},p=(n?l.delegateType:l.bindType)||p,l=k.event.special[p]||{},u=k.extend({type:p,origType:m,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&k.expr.match.needsContext.test(n),namespace:d.join(".")},s),(f=h[p])||((f=h[p]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,i,d,o)||e.addEventListener&&e.addEventListener(p,o)),l.add&&(l.add.call(e,u),u.handler.guid||(u.handler.guid=r.guid)),n?f.splice(f.delegateCount++,0,u):f.push(u),k.event.global[p]=!0)},remove:function(e,t,r,i,n){var s,o,a,h,c,u,l,f,p,d,m,g=Q.hasData(e)&&Q.get(e);if(g&&(h=g.events)){for(c=(t=(t||"").match(G)||[""]).length;c--;)if(p=m=(a=we.exec(t[c])||[])[1],d=(a[2]||"").split(".").sort(),p){for(l=k.event.special[p]||{},f=h[p=(i?l.delegateType:l.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=f.length;s--;)u=f[s],!n&&m!==u.origType||r&&r.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(s,1),u.selector&&f.delegateCount--,l.remove&&l.remove.call(e,u));o&&!f.length&&(l.teardown&&!1!==l.teardown.call(e,d,g.handle)||k.removeEvent(e,p,g.handle),delete h[p])}else for(p in h)k.event.remove(e,p+t[c],r,i,!0);k.isEmptyObject(h)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,r,i,n,s,o,a=k.event.fix(e),h=new Array(arguments.length),c=(Q.get(this,"events")||{})[a.type]||[],u=k.event.special[a.type]||{};for(h[0]=a,t=1;t<arguments.length;t++)h[t]=arguments[t];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(o=k.event.handlers.call(this,a,c),t=0;(n=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=n.elem,r=0;(s=n.handlers[r++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(i=((k.event.special[s.origType]||{}).handle||s.handler).apply(n.elem,h))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(e,t){var r,i,n,s,o,a=[],h=t.delegateCount,c=e.target;if(h&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],o={},r=0;r<h;r++)void 0===o[n=(i=t[r]).selector+" "]&&(o[n]=i.needsContext?k(n,this).index(c)>-1:k.find(n,this,null,[c]).length),o[n]&&s.push(i);s.length&&a.push({elem:c,handlers:s})}return c=this,h<t.length&&a.push({elem:c,handlers:t.slice(h)}),a},addProp:function(e,t){Object.defineProperty(k.Event.prototype,e,{enumerable:!0,configurable:!0,get:v(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Fe()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Fe()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&x(this,"input"))return this.click(),!1},_default:function(e){return x(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Te:Le,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Le,isPropagationStopped:Le,isImmediatePropagationStopped:Le,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ke.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Re.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){k.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||k.contains(this,i))||(e.type=n.origType,r=n.handler.apply(this,arguments),e.type=t),r}}}),k.fn.extend({on:function(e,t,r,i){return Ae(this,e,t,r,i)},one:function(e,t,r,i){return Ae(this,e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,k(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Le),this.each(function(){k.event.remove(this,e,r,t)})}});var xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,He=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ee(e,t){return x(e,"table")&&x(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function De(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function We(e,t){var r,i,n,s,o,a,h,c;if(1===t.nodeType){if(Q.hasData(e)&&(s=Q.access(e),o=Q.set(t,s),c=s.events))for(n in delete o.handle,o.events={},c)for(r=0,i=c[n].length;r<i;r++)k.event.add(t,n,c[n][r]);K.hasData(e)&&(a=K.access(e),h=k.extend({},a),K.set(t,h))}}function Ge(e,t,r,i){t=c.apply([],t);var n,s,o,a,h,u,l=0,f=e.length,p=f-1,d=t[0],m=v(d);if(m||f>1&&"string"==typeof d&&!y.checkClone&&Pe.test(d))return e.each(function(n){var s=e.eq(n);m&&(t[0]=d.call(this,n,s.html())),Ge(s,t,r,i)});if(f&&(s=(n=Se(t,e[0].ownerDocument,!1,e,i)).firstChild,1===n.childNodes.length&&(n=s),s||i)){for(a=(o=k.map(ge(n,"script"),Oe)).length;l<f;l++)h=n,l!==p&&(h=k.clone(h,!0,!0),a&&k.merge(o,ge(h,"script"))),r.call(e[l],h,l);if(a)for(u=o[o.length-1].ownerDocument,k.map(o,De),l=0;l<a;l++)h=o[l],de.test(h.type||"")&&!Q.access(h,"globalEval")&&k.contains(u,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?k._evalUrl&&k._evalUrl(h.src):S(h.textContent.replace(Me,""),u,h))}return e}function Ne(e,t,r){for(var i,n=t?k.filter(t,e):e,s=0;null!=(i=n[s]);s++)r||1!==i.nodeType||k.cleanData(ge(i)),i.parentNode&&(r&&k.contains(i.ownerDocument,i)&&ye(ge(i,"script")),i.parentNode.removeChild(i));return e}k.extend({htmlPrefilter:function(e){return e.replace(xe,"<$1></$2>")},clone:function(e,t,r){var i,n,s,o,a,h,c,u=e.cloneNode(!0),l=k.contains(e.ownerDocument,e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(o=ge(u),i=0,n=(s=ge(e)).length;i<n;i++)a=s[i],h=o[i],void 0,"input"===(c=h.nodeName.toLowerCase())&&fe.test(a.type)?h.checked=a.checked:"input"!==c&&"textarea"!==c||(h.defaultValue=a.defaultValue);if(t)if(r)for(s=s||ge(e),o=o||ge(u),i=0,n=s.length;i<n;i++)We(s[i],o[i]);else We(e,u);return(o=ge(u,"script")).length>0&&ye(o,!l&&ge(e,"script")),u},cleanData:function(e){for(var t,r,i,n=k.event.special,s=0;void 0!==(r=e[s]);s++)if($(r)){if(t=r[Q.expando]){if(t.events)for(i in t.events)n[i]?k.event.remove(r,i):k.removeEvent(r,i,t.handle);r[Q.expando]=void 0}r[K.expando]&&(r[K.expando]=void 0)}}}),k.fn.extend({detach:function(e){return Ne(this,e,!0)},remove:function(e){return Ne(this,e)},text:function(e){return Z(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ge(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ee(this,e).appendChild(e)})},prepend:function(){return Ge(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ee(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ge(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ge(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return Z(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!me[(pe.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(k.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,function(t){var r=this.parentNode;k.inArray(this,e)<0&&(k.cleanData(ge(this)),r&&r.replaceChild(t,this))},e)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){k.fn[e]=function(e){for(var r,i=[],n=k(e),s=n.length-1,o=0;o<=s;o++)r=o===s?this:this.clone(!0),k(n[o])[t](r),u.apply(i,r.get());return this.pushStack(i)}});var _e=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),qe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Ie=new RegExp(se.join("|"),"i");function je(e,t,r){var i,n,s,o,a=e.style;return(r=r||qe(e))&&(""!==(o=r.getPropertyValue(t)||r[t])||k.contains(e.ownerDocument,e)||(o=k.style(e,t)),!y.pixelBoxStyles()&&_e.test(o)&&Ie.test(t)&&(i=a.width,n=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=r.width,a.width=i,a.minWidth=n,a.maxWidth=s)),void 0!==o?o+"":o}function Ue(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Be.appendChild(c).appendChild(u);var e=r.getComputedStyle(u);i="1%"!==e.top,h=12===t(e.marginLeft),u.style.right="60%",a=36===t(e.right),n=36===t(e.width),u.style.position="absolute",s=36===u.offsetWidth||"absolute",Be.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var i,n,s,a,h,c=o.createElement("div"),u=o.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),h},scrollboxSize:function(){return e(),s}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,ze=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"},Ye=["Webkit","Moz","ms"],$e=o.createElement("div").style;function Xe(e){var t=k.cssProps[e];return t||(t=k.cssProps[e]=function(e){if(e in $e)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=Ye.length;r--;)if((e=Ye[r]+t)in $e)return e}(e)||e),t}function Qe(e,t,r){var i=ne.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function Ke(e,t,r,i,n,s){var o="width"===t?1:0,a=0,h=0;if(r===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===r&&(h+=k.css(e,r+se[o],!0,n)),i?("content"===r&&(h-=k.css(e,"padding"+se[o],!0,n)),"margin"!==r&&(h-=k.css(e,"border"+se[o]+"Width",!0,n))):(h+=k.css(e,"padding"+se[o],!0,n),"padding"!==r?h+=k.css(e,"border"+se[o]+"Width",!0,n):a+=k.css(e,"border"+se[o]+"Width",!0,n));return!i&&s>=0&&(h+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-h-a-.5))),h}function et(e,t,r){var i=qe(e),n=je(e,t,i),s="border-box"===k.css(e,"boxSizing",!1,i),o=s;if(_e.test(n)){if(!r)return n;n="auto"}return o=o&&(y.boxSizingReliable()||n===e.style[t]),("auto"===n||!parseFloat(n)&&"inline"===k.css(e,"display",!1,i))&&(n=e["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),(n=parseFloat(n)||0)+Ke(e,t,r||(s?"border":"content"),o,i,n)+"px"}function tt(e,t,r,i,n){return new tt.prototype.init(e,t,r,i,n)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=je(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,s,o,a=Y(t),h=ze.test(t),c=e.style;if(h||(t=Xe(a)),o=k.cssHooks[t]||k.cssHooks[a],void 0===r)return o&&"get"in o&&void 0!==(n=o.get(e,!1,i))?n:c[t];"string"===(s=typeof r)&&(n=ne.exec(r))&&n[1]&&(r=he(e,t,n),s="number"),null!=r&&r==r&&("number"===s&&(r+=n&&n[3]||(k.cssNumber[a]?"":"px")),y.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,i))||(h?c.setProperty(t,r):c[t]=r))}},css:function(e,t,r,i){var n,s,o,a=Y(t);return ze.test(t)||(t=Xe(a)),(o=k.cssHooks[t]||k.cssHooks[a])&&"get"in o&&(n=o.get(e,!0,r)),void 0===n&&(n=je(e,t,i)),"normal"===n&&t in Je&&(n=Je[t]),""===r||r?(s=parseFloat(n),!0===r||isFinite(s)?s||0:n):n}}),k.each(["height","width"],function(e,t){k.cssHooks[t]={get:function(e,r,i){if(r)return!Ze.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,i):ae(e,Ve,function(){return et(e,t,i)})},set:function(e,r,i){var n,s=qe(e),o="border-box"===k.css(e,"boxSizing",!1,s),a=i&&Ke(e,t,i,o,s);return o&&y.scrollboxSize()===s.position&&(a-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-Ke(e,t,"border",!1,s)-.5)),a&&(n=ne.exec(r))&&"px"!==(n[3]||"px")&&(e.style[t]=r,r=k.css(e,t)),Qe(0,r,a)}}}),k.cssHooks.marginLeft=Ue(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(je(e,"marginLeft"))||e.getBoundingClientRect().left-ae(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(e,t){k.cssHooks[e+t]={expand:function(r){for(var i=0,n={},s="string"==typeof r?r.split(" "):[r];i<4;i++)n[e+se[i]+t]=s[i]||s[i-2]||s[0];return n}},"margin"!==e&&(k.cssHooks[e+t].set=Qe)}),k.fn.extend({css:function(e,t){return Z(this,function(e,t,r){var i,n,s={},o=0;if(Array.isArray(t)){for(i=qe(e),n=t.length;o<n;o++)s[t[o]]=k.css(e,t[o],!1,i);return s}return void 0!==r?k.style(e,t,r):k.css(e,t)},e,t,arguments.length>1)}}),k.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,r,i,n,s){this.elem=e,this.prop=r,this.easing=n||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(k.cssNumber[r]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,r=tt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[k.cssProps[e.prop]]&&!k.cssHooks[e.prop]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=tt.prototype.init,k.fx.step={};var rt,it,nt=/^(?:toggle|show|hide)$/,st=/queueHooks$/;function ot(){it&&(!1===o.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ot):r.setTimeout(ot,k.fx.interval),k.fx.tick())}function at(){return r.setTimeout(function(){rt=void 0}),rt=Date.now()}function ht(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=se[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function ct(e,t,r){for(var i,n=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),s=0,o=n.length;s<o;s++)if(i=n[s].call(r,t,e))return i}function ut(e,t,r){var i,n,s=0,o=ut.prefilters.length,a=k.Deferred().always(function(){delete h.elem}),h=function(){if(n)return!1;for(var t=rt||at(),r=Math.max(0,c.startTime+c.duration-t),i=1-(r/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(i);return a.notifyWith(e,[c,i,r]),i<1&&o?r:(o||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:k.extend({},t),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},r),originalProperties:t,originalOptions:r,startTime:rt||at(),duration:r.duration,tweens:[],createTween:function(t,r){var i=k.Tween(e,c.opts,t,r,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var r=0,i=t?c.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)c.tweens[r].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(!function(e,t){var r,i,n,s,o;for(r in e)if(n=t[i=Y(r)],s=e[r],Array.isArray(s)&&(n=s[1],s=e[r]=s[0]),r!==i&&(e[i]=s,delete e[r]),(o=k.cssHooks[i])&&"expand"in o)for(r in s=o.expand(s),delete e[i],s)r in e||(e[r]=s[r],t[r]=n);else t[i]=n}(u,c.opts.specialEasing);s<o;s++)if(i=ut.prefilters[s].call(c,e,u,c.opts))return v(i.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return k.map(u,ct,c),v(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(h,{elem:e,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(ut,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return he(r.elem,e,ne.exec(t),r),r}]},tweener:function(e,t){v(e)?(t=e,e=["*"]):e=e.match(G);for(var r,i=0,n=e.length;i<n;i++)r=e[i],ut.tweeners[r]=ut.tweeners[r]||[],ut.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var i,n,s,o,a,h,c,u,l="width"in t||"height"in t,f=this,p={},d=e.style,m=e.nodeType&&oe(e),g=Q.get(e,"fxshow");for(i in r.queue||(null==(o=k._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,k.queue(e,"fx").length||o.empty.fire()})})),t)if(n=t[i],nt.test(n)){if(delete t[i],s=s||"toggle"===n,n===(m?"hide":"show")){if("show"!==n||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||k.style(e,i)}if((h=!k.isEmptyObject(t))||!k.isEmptyObject(p))for(i in l&&1===e.nodeType&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=g&&g.display)&&(c=Q.get(e,"display")),"none"===(u=k.css(e,"display"))&&(c?u=c:(le([e],!0),c=e.style.display||c,u=k.css(e,"display"),le([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===k.css(e,"float")&&(h||(f.done(function(){d.display=c}),null==c&&(u=d.display,c="none"===u?"":u)),d.display="inline-block")),r.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]})),h=!1,p)h||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:c}),s&&(g.hidden=!m),m&&le([e],!0),f.done(function(){for(i in m||le([e]),Q.remove(e,"fxshow"),p)k.style(e,i,p[i])})),h=ct(m?g[i]:0,i,f),i in g||(g[i]=h.start,m&&(h.end=h.start,h.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),k.speed=function(e,t,r){var i=e&&"object"==typeof e?k.extend({},e):{complete:r||!r&&t||v(e)&&e,duration:e,easing:r&&t||t&&!v(t)&&t};return k.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in k.fx.speeds?i.duration=k.fx.speeds[i.duration]:i.duration=k.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&k.dequeue(this,i.queue)},i},k.fn.extend({fadeTo:function(e,t,r,i){return this.filter(oe).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=k.isEmptyObject(e),s=k.speed(t,r,i),o=function(){var t=ut(this,k.extend({},e),s);(n||Q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,n||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=k.timers,o=Q.get(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&st.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));!t&&r||k.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=Q.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],s=k.timers,o=i?i.length:0;for(r.finish=!0,k.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),k.each(["toggle","show","hide"],function(e,t){var r=k.fn[t];k.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(ht(t,!0),e,i,n)}}),k.each({slideDown:ht("show"),slideUp:ht("hide"),slideToggle:ht("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){k.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}}),k.timers=[],k.fx.tick=function(){var e,t=0,r=k.timers;for(rt=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,ot())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,t){return e=k.fx&&k.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,i){var n=r.setTimeout(t,e);i.stop=function(){r.clearTimeout(n)}})},function(){var e=o.createElement("input"),t=o.createElement("select").appendChild(o.createElement("option"));e.type="checkbox",y.checkOn=""!==e.value,y.optSelected=t.selected,(e=o.createElement("input")).value="t",e.type="radio",y.radioValue="t"===e.value}();var lt,ft=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return Z(this,k.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,r){var i,n,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?k.prop(e,t,r):(1===s&&k.isXMLDoc(e)||(n=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?lt:void 0)),void 0!==r?null===r?void k.removeAttr(e,t):n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:(e.setAttribute(t,r+""),r):n&&"get"in n&&null!==(i=n.get(e,t))?i:null==(i=k.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&x(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,i=0,n=t&&t.match(G);if(n&&1===e.nodeType)for(;r=n[i++];)e.removeAttribute(r)}}),lt={set:function(e,t,r){return!1===t?k.removeAttr(e,r):e.setAttribute(r,r),r}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var r=ft[t]||k.find.attr;ft[t]=function(e,t,i){var n,s,o=t.toLowerCase();return i||(s=ft[o],ft[o]=n,n=null!=r(e,t,i)?o:null,ft[o]=s),n}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function mt(e){return(e.match(G)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(G)||[]}k.fn.extend({prop:function(e,t){return Z(this,k.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,r){var i,n,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&k.isXMLDoc(e)||(t=k.propFix[t]||t,n=k.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(e){var t,r,i,n,s,o,a,h=0;if(v(e))return this.each(function(t){k(this).addClass(e.call(this,t,gt(this)))});if((t=yt(e)).length)for(;r=this[h++];)if(n=gt(r),i=1===r.nodeType&&" "+mt(n)+" "){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");n!==(a=mt(i))&&r.setAttribute("class",a)}return this},removeClass:function(e){var t,r,i,n,s,o,a,h=0;if(v(e))return this.each(function(t){k(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=yt(e)).length)for(;r=this[h++];)if(n=gt(r),i=1===r.nodeType&&" "+mt(n)+" "){for(o=0;s=t[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");n!==(a=mt(i))&&r.setAttribute("class",a)}return this},toggleClass:function(e,t){var r=typeof e,i="string"===r||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):v(e)?this.each(function(r){k(this).toggleClass(e.call(this,r,gt(this),t),t)}):this.each(function(){var t,n,s,o;if(i)for(n=0,s=k(this),o=yt(e);t=o[n++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==r||((t=gt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,r,i=0;for(t=" "+e+" ";r=this[i++];)if(1===r.nodeType&&(" "+mt(gt(r))+" ").indexOf(t)>-1)return!0;return!1}});var vt=/\r/g;k.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=v(e),this.each(function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,k(this).val()):e)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=k.map(n,function(e){return null==e?"":e+""})),(t=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))})):n?(t=k.valHooks[n.type]||k.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(vt,""):null==r?"":r:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,r,i,n=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],h=o?s+1:n.length;for(i=s<0?h:o?s:0;i<h;i++)if(((r=n[i]).selected||i===s)&&!r.disabled&&(!r.parentNode.disabled||!x(r.parentNode,"optgroup"))){if(t=k(r).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var r,i,n=e.options,s=k.makeArray(t),o=n.length;o--;)((i=n[o]).selected=k.inArray(k.valHooks.option.get(i),s)>-1)&&(r=!0);return r||(e.selectedIndex=-1),s}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=k.inArray(k(e).val(),t)>-1}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in r;var Ct=/^(?:focusinfocus|focusoutblur)$/,bt=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,i,n){var s,a,h,c,u,l,f,p,m=[i||o],g=d.call(e,"type")?e.type:e,y=d.call(e,"namespace")?e.namespace.split("."):[];if(a=p=h=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!Ct.test(g+k.event.triggered)&&(g.indexOf(".")>-1&&(g=(y=g.split(".")).shift(),y.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[k.expando]?e:new k.Event(g,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:k.makeArray(t,[e]),f=k.event.special[g]||{},n||!f.trigger||!1!==f.trigger.apply(i,t))){if(!n&&!f.noBubble&&!C(i)){for(c=f.delegateType||g,Ct.test(c+g)||(a=a.parentNode);a;a=a.parentNode)m.push(a),h=a;h===(i.ownerDocument||o)&&m.push(h.defaultView||h.parentWindow||r)}for(s=0;(a=m[s++])&&!e.isPropagationStopped();)p=a,e.type=s>1?c:f.bindType||g,(l=(Q.get(a,"events")||{})[e.type]&&Q.get(a,"handle"))&&l.apply(a,t),(l=u&&a[u])&&l.apply&&$(a)&&(e.result=l.apply(a,t),!1===e.result&&e.preventDefault());return e.type=g,n||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),t)||!$(i)||u&&v(i[g])&&!C(i)&&((h=i[u])&&(i[u]=null),k.event.triggered=g,e.isPropagationStopped()&&p.addEventListener(g,bt),i[g](),e.isPropagationStopped()&&p.removeEventListener(g,bt),k.event.triggered=void 0,h&&(i[u]=h)),e.result}},simulate:function(e,t,r){var i=k.extend(new k.Event,r,{type:e,isSimulated:!0});k.event.trigger(i,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return k.event.trigger(e,t,r,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){k.event.simulate(t,e.target,k.event.fix(e))};k.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=Q.access(i,t);n||i.addEventListener(e,r,!0),Q.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=Q.access(i,t)-1;n?Q.access(i,t,n):(i.removeEventListener(e,r,!0),Q.remove(i,t))}}});var St=r.location,Bt=Date.now(),kt=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Rt=/\[\]$/,wt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Ft(e,t,r,i){var n;if(Array.isArray(t))k.each(t,function(t,n){r||Rt.test(e)?i(e,n):Ft(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,r,i)});else if(r||"object"!==B(t))i(e,t);else for(n in t)Ft(e+"["+n+"]",t[n],r,i)}k.param=function(e,t){var r,i=[],n=function(e,t){var r=v(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){n(this.name,this.value)});else for(r in e)Ft(r,e[r],t,n);return i.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&Lt.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!fe.test(e))}).map(function(e,t){var r=k(this).val();return null==r?null:Array.isArray(r)?k.map(r,function(e){return{name:t.name,value:e.replace(wt,"\r\n")}}):{name:t.name,value:r.replace(wt,"\r\n")}}).get()}});var At=/%20/g,xt=/#.*$/,Ht=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:GET|HEAD)$/,Et=/^\/\//,Ot={},Dt={},Wt="*/".concat("*"),Gt=o.createElement("a");function Nt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,s=t.toLowerCase().match(G)||[];if(v(r))for(;i=s[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function _t(e,t,r,i){var n={},s=e===Dt;function o(a){var h;return n[a]=!0,k.each(e[a]||[],function(e,a){var c=a(t,r,i);return"string"!=typeof c||s||n[c]?s?!(h=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),h}return o(t.dataTypes[0])||!n["*"]&&o("*")}function qt(e,t){var r,i,n=k.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&k.extend(!0,e,i),e}Gt.href=St.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,k.ajaxSettings),t):qt(k.ajaxSettings,e)},ajaxPrefilter:Nt(Ot),ajaxTransport:Nt(Dt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,s,a,h,c,u,l,f,p,d=k.ajaxSetup({},t),m=d.context||d,g=d.context&&(m.nodeType||m.jquery)?k(m):k.event,y=k.Deferred(),v=k.Callbacks("once memory"),C=d.statusCode||{},b={},S={},B="canceled",R={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=Pt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(e,t){return null==u&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)R.always(e[R.status]);else for(t in e)C[t]=[C[t],e[t]];return this},abort:function(e){var t=e||B;return i&&i.abort(t),w(0,t),this}};if(y.promise(R),d.url=((e||d.url||St.href)+"").replace(Et,St.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(G)||[""],null==d.crossDomain){c=o.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Gt.protocol+"//"+Gt.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=k.param(d.data,d.traditional)),_t(Ot,d,t,R),u)return R;for(f in(l=k.event&&d.global)&&0==k.active++&&k.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Mt.test(d.type),n=d.url.replace(xt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(At,"+")):(p=d.url.slice(n.length),d.data&&(d.processData||"string"==typeof d.data)&&(n+=(kt.test(n)?"&":"?")+d.data,delete d.data),!1===d.cache&&(n=n.replace(Ht,"$1"),p=(kt.test(n)?"&":"?")+"_="+Bt+++p),d.url=n+p),d.ifModified&&(k.lastModified[n]&&R.setRequestHeader("If-Modified-Since",k.lastModified[n]),k.etag[n]&&R.setRequestHeader("If-None-Match",k.etag[n])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&R.setRequestHeader("Content-Type",d.contentType),R.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Wt+"; q=0.01":""):d.accepts["*"]),d.headers)R.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(m,R,d)||u))return R.abort();if(B="abort",v.add(d.complete),R.done(d.success),R.fail(d.error),i=_t(Dt,d,t,R)){if(R.readyState=1,l&&g.trigger("ajaxSend",[R,d]),u)return R;d.async&&d.timeout>0&&(h=r.setTimeout(function(){R.abort("timeout")},d.timeout));try{u=!1,i.send(b,w)}catch(e){if(u)throw e;w(-1,e)}}else w(-1,"No Transport");function w(e,t,o,a){var c,f,p,b,S,B=t;u||(u=!0,h&&r.clearTimeout(h),i=void 0,s=a||"",R.readyState=e>0?4:0,c=e>=200&&e<300||304===e,o&&(b=function(e,t,r){for(var i,n,s,o,a=e.contents,h=e.dataTypes;"*"===h[0];)h.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in a)if(a[n]&&a[n].test(i)){h.unshift(n);break}if(h[0]in r)s=h[0];else{for(n in r){if(!h[0]||e.converters[n+" "+h[0]]){s=n;break}o||(o=n)}s=s||o}if(s)return s!==h[0]&&h.unshift(s),r[s]}(d,R,o)),b=function(e,t,r,i){var n,s,o,a,h,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(r[e.responseFields[s]]=t),!h&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),h=s,s=u.shift())if("*"===s)s=h;else if("*"!==h&&h!==s){if(!(o=c[h+" "+s]||c["* "+s]))for(n in c)if((a=n.split(" "))[1]===s&&(o=c[h+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[n]:!0!==c[n]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+h+" to "+s}}}return{state:"success",data:t}}(d,b,R,c),c?(d.ifModified&&((S=R.getResponseHeader("Last-Modified"))&&(k.lastModified[n]=S),(S=R.getResponseHeader("etag"))&&(k.etag[n]=S)),204===e||"HEAD"===d.type?B="nocontent":304===e?B="notmodified":(B=b.state,f=b.data,c=!(p=b.error))):(p=B,!e&&B||(B="error",e<0&&(e=0))),R.status=e,R.statusText=(t||B)+"",c?y.resolveWith(m,[f,B,R]):y.rejectWith(m,[R,B,p]),R.statusCode(C),C=void 0,l&&g.trigger(c?"ajaxSuccess":"ajaxError",[R,d,c?f:p]),v.fireWith(m,[R,B]),l&&(g.trigger("ajaxComplete",[R,d]),--k.active||k.event.trigger("ajaxStop")))}return R},getJSON:function(e,t,r){return k.get(e,t,r,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,t){k[t]=function(e,r,i,n){return v(r)&&(n=n||i,i=r,r=void 0),k.ajax(k.extend({url:e,type:t,dataType:n,data:r,success:i},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(v(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return v(e)?this.each(function(t){k(this).wrapInner(e.call(this,t))}):this.each(function(){var t=k(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=v(e);return this.each(function(r){k(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var It={0:200,1223:204},jt=k.ajaxSettings.xhr();y.cors=!!jt&&"withCredentials"in jt,y.ajax=jt=!!jt,k.ajaxTransport(function(e){var t,i;if(y.cors||jt&&!e.crossDomain)return{send:function(n,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)a.setRequestHeader(o,n[o]);t=function(e){return function(){t&&(t=i=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(It[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),i=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout(function(){t&&i()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(e){var t,r;if(e.crossDomain)return{send:function(i,n){t=k("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&n("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){r&&r()}}});var Ut,Zt=[],zt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||k.expando+"_"+Bt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,i){var n,s,o,a=!1!==e.jsonp&&(zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&zt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=v(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(zt,"$1"+n):!1!==e.jsonp&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||k.error(n+" was not called"),o[0]},e.dataTypes[0]="json",s=r[n],r[n]=function(){o=arguments},i.always(function(){void 0===s?k(r).removeProp(n):r[n]=s,e[n]&&(e.jsonpCallback=t.jsonpCallback,Zt.push(n)),o&&v(s)&&s(o[0]),o=s=void 0}),"script"}),y.createHTMLDocument=((Ut=o.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),k.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(y.createHTMLDocument?((i=(t=o.implementation.createHTMLDocument("")).createElement("base")).href=o.location.href,t.head.appendChild(i)):t=o),n=H.exec(e),s=!r&&[],n?[t.createElement(n[1])]:(n=Se([e],t,s),s&&s.length&&k(s).remove(),k.merge([],n.childNodes)));var i,n,s},k.fn.load=function(e,t,r){var i,n,s,o=this,a=e.indexOf(" ");return a>-1&&(i=mt(e.slice(a)),e=e.slice(0,a)),v(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),o.length>0&&k.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(i?k("<div>").append(k.parseHTML(e)).find(i):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,s||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(e){return k.grep(k.timers,function(t){return e===t.elem}).length},k.offset={setOffset:function(e,t,r){var i,n,s,o,a,h,c=k.css(e,"position"),u=k(e),l={};"static"===c&&(e.style.position="relative"),a=u.offset(),s=k.css(e,"top"),h=k.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+h).indexOf("auto")>-1?(o=(i=u.position()).top,n=i.left):(o=parseFloat(s)||0,n=parseFloat(h)||0),v(t)&&(t=t.call(e,r,k.extend({},a))),null!=t.top&&(l.top=t.top-a.top+o),null!=t.left&&(l.left=t.left-a.left+n),"using"in t?t.using.call(e,l):u.css(l)}},k.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){k.offset.setOffset(this,e,t)});var t,r,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),r=i.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,i=this[0],n={top:0,left:0};if("fixed"===k.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),r=i.ownerDocument,e=i.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===k.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((n=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),n.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-k.css(i,"marginTop",!0),left:t.left-n.left-k.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===k.css(e,"position");)e=e.offsetParent;return e||Be})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;k.fn[e]=function(i){return Z(this,function(e,i,n){var s;if(C(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===n)return s?s[t]:e[i];s?s.scrollTo(r?s.pageXOffset:n,r?n:s.pageYOffset):e[i]=n},e,i,arguments.length)}}),k.each(["top","left"],function(e,t){k.cssHooks[t]=Ue(y.pixelPosition,function(e,r){if(r)return r=je(e,t),_e.test(r)?k(e).position()[t]+"px":r})}),k.each({Height:"height",Width:"width"},function(e,t){k.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){k.fn[i]=function(n,s){var o=arguments.length&&(r||"boolean"!=typeof n),a=r||(!0===n||!0===s?"margin":"border");return Z(this,function(t,r,n){var s;return C(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===n?k.css(t,r,a):k.style(t,r,n,a)},t,o?n:void 0,o)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){k.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),k.proxy=function(e,t){var r,i,n;if("string"==typeof t&&(r=e[t],t=e,e=r),v(e))return i=h.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(h.call(arguments)))}).guid=e.guid=e.guid||k.guid++,n},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=x,k.isFunction=v,k.isWindow=C,k.camelCase=Y,k.type=B,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(i=function(){return k}.apply(t,[]))||(e.exports=i);var Vt=r.jQuery,Jt=r.$;return k.noConflict=function(e){return r.$===k&&(r.$=Jt),e&&r.jQuery===k&&(r.jQuery=Vt),k},n||(r.jQuery=r.$=k),k})},function(e,t,r){(function(i,n,s){var o,a,h;!function(e){function t(e){Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[m][e]}})}function i(e){var t;if(e&&e.__esModule){for(var r in t={},e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}else{if("[object Module]"===Object.prototype.toString.call(e)||n.isModule&&n.isModule(e))return e;t={default:e,__useDefault:!0}}return new o(t)}function o(e){Object.defineProperty(this,m,{value:e}),Object.keys(e).forEach(t,this)}function a(e){return"@node/"===e.substr(0,6)?p(e,i(g(e.substr(6)))):d[e]}function h(e){var t=a(e);if(!t)throw new Error('Module "'+e+'" expected, but not contained in build.');if(t.module)return t.module;var r=t.linkRecord;return function e(t,r){if(!r.depLoads){r.declare&&c(t,r),r.depLoads=[];for(var i=0;i<r.deps.length;i++){var n=a(r.deps[i]);r.depLoads.push(n),n.linkRecord&&e(n,n.linkRecord);var s=r.setters&&r.setters[i];s&&(s(n.module||n.linkRecord.moduleObj),n.importerSetters.push(s))}return t}}(t,r),f(t,r,[]),t.module}function c(t,r){var i=r.moduleObj,n=t.importerSetters,s=!1,o=r.declare.call(e,function(e,t){if(!s){if("object"==typeof e)for(var r in e)"__useDefault"!==r&&(i[r]=e[r]);else i[e]=t;s=!0;for(var o=0;o<n.length;o++)n[o](i);return s=!1,t}},{id:t.key});"function"!=typeof o?(r.setters=o.setters,r.execute=o.execute):(r.setters=[],r.execute=o)}function u(e,t,r){return d[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:r,setters:void 0,execute:void 0,moduleObj:{}}}}function l(e,t,r,i){return d[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:void 0,execute:i,executingRequire:r,moduleObj:{default:{},__useDefault:!0},setters:void 0}}}function f(t,r,i){if(i.push(t),t.module)return t.module;if(r.setters){for(var n=0;n<r.deps.length;n++){var s=r.depLoads[n],a=s.linkRecord;a&&-1===i.indexOf(s)&&f(s,a,a.setters?i:[])}r.execute.call(y)}else{var h={id:t.key},c=r.moduleObj;Object.defineProperty(h,"exports",{configurable:!0,set:function(e){c.default=e},get:function(){return c.default}});var u=function(e,t,r){return function(i){for(var n=0;n<e.length;n++)if(e[n]===i){var s,o=t[n];return(s=-1===r.indexOf(o)?f(o,o.linkRecord,r):o.linkRecord.moduleObj).__useDefault?s.default:s}}}(r.deps,r.depLoads,i);if(!r.executingRequire)for(n=0;n<r.deps.length;n++)u(r.deps[n]);var l=r.execute.call(e,u,c.default,h);if(void 0!==l?c.default=l:h.exports!==c.default&&(c.default=h.exports),c.default&&c.default.__esModule)for(var p in c.default)Object.hasOwnProperty.call(c.default,p)&&"default"!==p&&(c[p]=c.default[p])}h=t.module=new o(r.moduleObj);if(!r.setters)for(n=0;n<t.importerSetters.length;n++)t.importerSetters[n](h);return h}function p(e,t){return d[e]={key:e,module:t,importerSetters:[],linkRecord:void 0}}var d={},m="undefined"!=typeof Symbol?Symbol():"@@baseObject";o.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(o.prototype[Symbol.toStringTag]="Module");var g=n._nodeRequire||void 0!==s&&s.platform&&r(11),y={};return Object.freeze&&Object.freeze(y),function(e,t,r,n){return function(s){s(function(s){var a={_nodeRequire:g,register:u,registerDynamic:l,registry:{get:function(e){return d[e].module},set:p},newModule:function(e){return new o(e)}};p("@empty",new o({}));for(var c=0;c<t.length;c++)p(t[c],i(arguments[c]));n(a);var f=h(e[0]);if(e.length>1)for(c=1;c<e.length;c++)h(e[c]);return r?f.default:(f instanceof o&&Object.defineProperty(f,"__esModule",{value:!0}),f)})}}}("undefined"!=typeof self?self:i)(["a"],["c"],!1,function(e){this.require,this.exports,this.module,e.registerDynamic("b",[],!0,function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}this||self,r.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,i,a,h,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(s(r))for(a=Array.prototype.slice.call(arguments,1),i=(c=r.slice()).length,h=0;h<i;h++)c[h].apply(this,a);return!0},i.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&((r=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var r,i,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}}),e.register("a",["b","c"],function(e,t){"use strict";var r,i,n,s,o,a,h,c,u;return{setters:[function(e){r=e.default},function(e){i=e.default}],execute:function(){n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},h=window.requestAnimationFrame?window.requestAnimationFrame:window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame:window.mozRequestAnimationFrame?window.mozRequestAnimationFrame:window.msRequestAnimationFrame?window.msRequestAnimationFrame:window.oRequestAnimationFrame?window.oRequestAnimationFrame:function(e){setTimeout(e,0)},c=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.gamepads=e.emptyGamepadList,e.activeButtons={},e.activeAxes={},i(window).on("gamepadconnected webkitgamepadconnected mozgamepadconnected",function(){e.scanGamepads()}).on("gamepaddisconnected webkitgamepaddisconnected mozgamepaddisconnected",function(){e.scanGamepads()}),e}return a(t,r),s(t,[{key:"watch",value:function(){this.isWatching||(this.isWatching=!0,this.watchLoop())}},{key:"watchLoop",value:function(){var e=this;this.scanGamepads(),this.isWatching&&h(function(){return e.watchLoop()})}},{key:"unwatch",value:function(){this.isWatching&&(this.isWatching=!1)}},{key:"scanGamepads",value:function(){var e=this,t=this.getGamepads();Object.keys(t).forEach(function(r){var i=t[r];if(i)e.gamepads[r]?(e.scanButtons(i),e.scanAxes(i)):(e.gamepads=e.snapshotGamepadList(t),e.emit("connected",i));else if(e.gamepads[r]){var n=e.gamepads[r];e.gamepads=e.snapshotGamepadList(t),e.emit("disconnected",n)}})}},{key:"scanButtons",value:function(e){var t=this,r=this.activeButtons[e.index]=this.activeButtons[e.index]||{};e.buttons.forEach(function(i,n){i=t.snapshotButton(t.mapButton(i));var s=r[n],o={button:i,buttonIndex:n,gamepad:e};!i.pressed||s&&s.pressed||t.emit("buttonPressed",o),s&&i.value!==s.value&&t.emit("buttonChanged",o),!i.pressed&&s&&s.pressed&&t.emit("buttonReleased",o),r[n]=i})}},{key:"scanAxes",value:function(e){var t=this,r=this.activeAxes[e.index]=this.activeAxes[e.index]||{};e.axes.forEach(function(i,n){var s=r[n],o={axis:i,axisIndex:n,gamepad:e};s&&i!==s&&t.emit("axisChanged",o),r[n]=i})}},{key:"getGamepads",value:function(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():this.emptyGamepadList}},{key:"snapshotGamepadList",value:function(e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t.length=e.length,t}},{key:"snapshotButton",value:function(e){return{pressed:!!e.pressed,touched:!!e.touched,value:e.value}}},{key:"mapButton",value:function(e){return"object"==typeof e?e:{pressed:1===e,touched:0!==e,value:e}}},{key:"emptyGamepadList",get:function(){return{0:null,1:null,2:null,3:null,length:4}}}]),t}(),e("gamepad",u=new c),e("gamepad",u),e("default",u)}}})})(function(i){a=[r(0)],void 0===(h="function"==typeof(o=i)?o.apply(t,a):o)||(e.exports=h)})}).call(this,r(6),r(5),r(4))},function(e,t,r){(function(i,n,s){var o,a,h;!function(e){function t(e){Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[m][e]}})}function i(e){var t;if(e&&e.__esModule){for(var r in t={},e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}else{if("[object Module]"===Object.prototype.toString.call(e)||n.isModule&&n.isModule(e))return e;t={default:e,__useDefault:!0}}return new o(t)}function o(e){Object.defineProperty(this,m,{value:e}),Object.keys(e).forEach(t,this)}function a(e){return"@node/"===e.substr(0,6)?p(e,i(g(e.substr(6)))):d[e]}function h(e){var t=a(e);if(!t)throw new Error('Module "'+e+'" expected, but not contained in build.');if(t.module)return t.module;var r=t.linkRecord;return function e(t,r){if(!r.depLoads){r.declare&&c(t,r),r.depLoads=[];for(var i=0;i<r.deps.length;i++){var n=a(r.deps[i]);r.depLoads.push(n),n.linkRecord&&e(n,n.linkRecord);var s=r.setters&&r.setters[i];s&&(s(n.module||n.linkRecord.moduleObj),n.importerSetters.push(s))}return t}}(t,r),f(t,r,[]),t.module}function c(t,r){var i=r.moduleObj,n=t.importerSetters,s=!1,o=r.declare.call(e,function(e,t){if(!s){if("object"==typeof e)for(var r in e)"__useDefault"!==r&&(i[r]=e[r]);else i[e]=t;s=!0;for(var o=0;o<n.length;o++)n[o](i);return s=!1,t}},{id:t.key});"function"!=typeof o?(r.setters=o.setters,r.execute=o.execute):(r.setters=[],r.execute=o)}function u(e,t,r){return d[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:r,setters:void 0,execute:void 0,moduleObj:{}}}}function l(e,t,r,i){return d[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:void 0,execute:i,executingRequire:r,moduleObj:{default:{},__useDefault:!0},setters:void 0}}}function f(t,r,i){if(i.push(t),t.module)return t.module;if(r.setters){for(var n=0;n<r.deps.length;n++){var s=r.depLoads[n],a=s.linkRecord;a&&-1===i.indexOf(s)&&f(s,a,a.setters?i:[])}r.execute.call(y)}else{var h={id:t.key},c=r.moduleObj;Object.defineProperty(h,"exports",{configurable:!0,set:function(e){c.default=e},get:function(){return c.default}});var u=function(e,t,r){return function(i){for(var n=0;n<e.length;n++)if(e[n]===i){var s,o=t[n];return(s=-1===r.indexOf(o)?f(o,o.linkRecord,r):o.linkRecord.moduleObj).__useDefault?s.default:s}}}(r.deps,r.depLoads,i);if(!r.executingRequire)for(n=0;n<r.deps.length;n++)u(r.deps[n]);var l=r.execute.call(e,u,c.default,h);if(void 0!==l?c.default=l:h.exports!==c.default&&(c.default=h.exports),c.default&&c.default.__esModule)for(var p in c.default)Object.hasOwnProperty.call(c.default,p)&&"default"!==p&&(c[p]=c.default[p])}h=t.module=new o(r.moduleObj);if(!r.setters)for(n=0;n<t.importerSetters.length;n++)t.importerSetters[n](h);return h}function p(e,t){return d[e]={key:e,module:t,importerSetters:[],linkRecord:void 0}}var d={},m="undefined"!=typeof Symbol?Symbol():"@@baseObject";o.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(o.prototype[Symbol.toStringTag]="Module");var g=n._nodeRequire||void 0!==s&&s.platform&&r(12),y={};return Object.freeze&&Object.freeze(y),function(e,t,r,n){return function(s){s(function(s){var a={_nodeRequire:g,register:u,registerDynamic:l,registry:{get:function(e){return d[e].module},set:p},newModule:function(e){return new o(e)}};p("@empty",new o({}));for(var c=0;c<t.length;c++)p(t[c],i(arguments[c]));n(a);var f=h(e[0]);if(e.length>1)for(c=1;c<e.length;c++)h(e[c]);return r?f.default:(f instanceof o&&Object.defineProperty(f,"__esModule",{value:!0}),f)})}}}("undefined"!=typeof self?self:i)(["a"],[],!1,function(e){var t=(this.require,this.exports,this.module);e.registerDynamic("b",[],!0,function(e,t,r){"use strict";function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}function s(e,t,r){for(var i,s=[],o=t;o<r;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],s.push(n(i));return s.join("")}this||self,t.byteLength=function(e){return 3*e.length/4-i(e)},t.toByteArray=function(e){var t,r,n,s,o,c,u=e.length;o=i(e),c=new h(3*u/4-o),n=o>0?u-4:u;var l=0;for(t=0,r=0;t<n;t+=4,r+=3)s=a[e.charCodeAt(t)]<<18|a[e.charCodeAt(t+1)]<<12|a[e.charCodeAt(t+2)]<<6|a[e.charCodeAt(t+3)],c[l++]=s>>16&255,c[l++]=s>>8&255,c[l++]=255&s;return 2===o?(s=a[e.charCodeAt(t)]<<2|a[e.charCodeAt(t+1)]>>4,c[l++]=255&s):1===o&&(s=a[e.charCodeAt(t)]<<10|a[e.charCodeAt(t+1)]<<4|a[e.charCodeAt(t+2)]>>2,c[l++]=s>>8&255,c[l++]=255&s),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,n="",a=[],h=16383,c=0,u=r-i;c<u;c+=h)a.push(s(e,c,c+h>u?u:c+h));return 1===i?(t=e[r-1],n+=o[t>>2],n+=o[t<<4&63],n+="=="):2===i&&(t=(e[r-2]<<8)+e[r-1],n+=o[t>>10],n+=o[t>>4&63],n+=o[t<<2&63],n+="="),a.push(n),a.join("")};for(var o=[],a=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,l=c.length;u<l;++u)o[u]=c[u],a[c.charCodeAt(u)]=u;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63}),e.registerDynamic("c",[],!0,function(e,t,r){this||self,t.read=function(e,t,r,i,n){var s,o,a=8*n-i-1,h=(1<<a)-1,c=h>>1,u=-7,l=r?n-1:0,f=r?-1:1,p=e[t+l];for(l+=f,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+e[t+l],l+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+e[t+l],l+=f,u-=8);if(0===s)s=1-c;else{if(s===h)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,i),s-=c}return(p?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var o,a,h,c=8*s-n-1,u=(1<<c)-1,l=u>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,d=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),(t+=o+l>=1?f/h:f*Math.pow(2,1-l))*h>=2&&(o++,h/=2),o+l>=u?(a=0,o=u):o+l>=1?(a=(t*h-1)*Math.pow(2,n),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,n),o=0));n>=8;e[r+p]=255&a,p+=d,a/=256,n-=8);for(o=o<<n|a,c+=n;c>0;e[r+p]=255&o,p+=d,o/=256,c-=8);e[r+p-d]|=128*m}}),e.registerDynamic("d",[],!0,function(e,t,r){var i=(this||self,{}.toString);r.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}}),e.registerDynamic("@system-env",[],!0,function(){return{default:!0}}),e.registerDynamic("e",["@system-env"],!0,function(e,t,r){function i(){l=!1,a.length?u=a.concat(u):f=-1,u.length&&n()}function n(){if(!l){var e=setTimeout(i);l=!0;for(var t=u.length;t;){for(a=u,u=[];++f<t;)a&&a[f].run();f=-1,t=u.length}a=null,l=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var a,h=(this||self,e("@system-env").production),c=r.exports={},u=[],l=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new s(e,t)),1!==u.length||l||setTimeout(n,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={NODE_ENV:h?"production":"development"},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}}),e.registerDynamic("f",["b","c","d","e"],!0,function(e,t,r){"use strict";function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function n(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,r){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return o(this,e,t,r)}function o(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i),s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=c(e,t),e}(e,t,r,i):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!s.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|l(t,r),o=(e=n(e,i)).write(t,r);return o!==i&&(e=e.slice(0,o)),e}(e,t,r):function(e,t){if(s.isBuffer(t)){var r=0|u(t.length);return 0===(e=n(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?n(e,0):c(e,t);if("Buffer"===t.type&&q(t.data))return c(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(a(t),e=n(e,t<0?0:0|u(t)),!s.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function c(e,t){var r=t.length<0?0:0|u(t.length);e=n(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function u(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function l(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return D(e).length;default:if(i)return O(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function p(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:d(e,t,r,i,n);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):d(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function d(e,t,r,i,n){function s(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var o,a=1,h=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,h/=2,c/=2,r/=2}if(n){var u=-1;for(o=r;o<h;o++)if(s(e,o)===s(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(r+c>h&&(r=h-c),o=r;o>=0;o--){for(var l=!0,f=0;f<c;f++)if(s(e,o+f)!==s(t,f)){l=!1;break}if(l)return o}return-1}function m(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function g(e,t,r,i){return W(O(t,e.length-r),e,r,i)}function y(e,t,r,i){return W(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function v(e,t,r,i){return y(e,t,r,i)}function C(e,t,r,i){return W(D(t),e,r,i)}function b(e,t,r,i){return W(function(e,t){for(var r,i,n,s=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,n=r%256,s.push(n),s.push(i);return s}(t,e.length-r),e,r,i)}function S(e,t,r){return 0===t&&r===e.length?N.fromByteArray(e):N.fromByteArray(e.slice(t,r))}function B(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var s,o,a,h,c=e[n],u=null,l=c>239?4:c>223?3:c>191?2:1;if(n+l<=r)switch(l){case 1:c<128&&(u=c);break;case 2:128==(192&(s=e[n+1]))&&((h=(31&c)<<6|63&s)>127&&(u=h));break;case 3:s=e[n+1],o=e[n+2],128==(192&s)&&128==(192&o)&&((h=(15&c)<<12|(63&s)<<6|63&o)>2047&&(h<55296||h>57343)&&(u=h));break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&((h=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(u=h))}null===u?(u=65533,l=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),n+=l}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=I));return r}(i)}function k(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function R(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function w(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",s=t;s<r;++s)n+=E(e[s]);return n}function T(e,t,r){for(var i=e.slice(t,r),n="",s=0;s<i.length;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function F(e,t,r,i,n,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function A(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,s=Math.min(e.length-r,2);n<s;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function x(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,s=Math.min(e.length-r,4);n<s;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function H(e,t,r,i,n,s){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,i,n){return n||H(e,0,r,4),_.write(e,t,r,i,23,4),r+4}function M(e,t,r,i,n){return n||H(e,0,r,8),_.write(e,t,r,i,52,8),r+8}function E(e){return e<16?"0"+e.toString(16):e.toString(16)}function O(e,t){t=t||1/0;for(var r,i=e.length,n=null,s=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function D(e){return N.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}var G=(e("e"),this||self),N=e("b"),_=e("c"),q=e("d");t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==G.TYPED_ARRAY_SUPPORT?G.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,r){return o(null,e,t,r)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,r){return function(e,t,r,i){return a(t),t<=0?n(e,t):void 0!==r?"string"==typeof i?n(e,t).fill(r,i):n(e,t).fill(r):n(e,t)}(null,e,t,r)},s.allocUnsafe=function(e){return h(null,e)},s.allocUnsafeSlow=function(e){return h(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=s.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},s.byteLength=l,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?B(this,0,e):function(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return w(this,t,r);case"utf8":case"utf-8":return B(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,r,i,n){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;for(var o=n-i,a=r-t,h=Math.min(o,a),c=this.slice(i,n),u=e.slice(t,r),l=0;l<h;++l)if(c[l]!==u[l]){o=c[l],a=u[l];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return p(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return p(this,e,t,r,!1)},s.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return m(this,e,t,r);case"utf8":case"utf-8":return g(this,e,t,r);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return v(this,e,t,r);case"base64":return C(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;s.prototype.slice=function(e,t){var r,i=this.length;if(e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=s.prototype;else{var n=t-e;r=new s(n,void 0);for(var o=0;o<n;++o)r[o]=this[o+e]}return r},s.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},s.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},s.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),_.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),_.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),_.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),_.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||F(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},s.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||F(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},s.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);F(this,e,t,r,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},s.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);F(this,e,t,r,n-1,-n)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||F(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,o=i-r;if(this===e&&r<t&&t<i)for(n=o-1;n>=0;--n)e[n+t]=this[n+r];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},s.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=s.isBuffer(e)?e:O(new s(e,i).toString()),h=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%h]}return this};var j=/[^+\/0-9A-Za-z-_]/g}),e.registerDynamic("10",[],!0,function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}this||self,r.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,i,a,h,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(s(r))for(a=Array.prototype.slice.call(arguments,1),i=(c=r.slice()).length,h=0;h<i;h++)c[h].apply(this,a);return!0},i.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&((r=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var r,i,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}}),e.registerDynamic("11",[],!0,function(e,t,r){this||self,r.exports=Date.now||function(){return(new Date).getTime()}}),e.registerDynamic("12",["11"],!0,function(e,t,r){var i=(this||self,e("11"));r.exports=function(e,t,r){function n(){var u=i()-h;u<t&&u>0?s=setTimeout(n,t-u):(s=null,r||(c=e.apply(a,o),s||(a=o=null)))}var s,o,a,h,c;return null==t&&(t=100),function(){a=this,o=arguments,h=i();var u=r&&!s;return s||(s=setTimeout(n,t)),u&&(c=e.apply(a,o),a=o=null),c}}}),function(e,r){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?r(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(e)}("undefined"!=typeof window?window:this,function(t,r){"use strict";function i(e,t){var r=(t=t||$).createElement("script");r.text=e,t.head.appendChild(r).parentNode.removeChild(r)}function n(e){var t=!!e&&"length"in e&&e.length,r=he.type(e);return"function"!==r&&!he.isWindow(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e,t,r){return he.isFunction(t)?he.grep(e,function(e,i){return!!t.call(e,i,e)!==r}):t.nodeType?he.grep(e,function(e){return e===t!==r}):"string"!=typeof t?he.grep(e,function(e){return te.call(t,e)>-1!==r}):ve.test(t)?he.filter(t,e,r):(t=he.filter(t,e),he.grep(e,function(e){return te.call(t,e)>-1!==r&&1===e.nodeType}))}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){return e}function h(e){throw e}function c(e,t,r){var i;try{e&&he.isFunction(i=e.promise)?i.call(e).done(t).fail(r):e&&he.isFunction(i=e.then)?i.call(e,t,r):t.call(void 0,e)}catch(e){r.call(void 0,e)}}function u(){$.removeEventListener("DOMContentLoaded",u),t.removeEventListener("load",u),he.ready()}function l(){this.expando=he.expando+l.uid++}function f(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(He,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:xe.test(e)?JSON.parse(e):e)}(r)}catch(e){}Ae.set(e,t,r)}else r=void 0;return r}function p(e,t,r,i){var n,s=1,o=20,a=i?function(){return i.cur()}:function(){return he.css(e,t,"")},h=a(),c=r&&r[3]||(he.cssNumber[t]?"":"px"),u=(he.cssNumber[t]||"px"!==c&&+h)&&Me.exec(he.css(e,t));if(u&&u[3]!==c){c=c||u[3],r=r||[],u=+h||1;do{u/=s=s||".5",he.style(e,t,u+c)}while(s!==(s=a()/h)&&1!==s&&--o)}return r&&(u=+u||+h||0,n=r[1]?u+(r[1]+1)*r[2]:+r[2],i&&(i.unit=c,i.start=u,i.end=n)),n}function d(e){var t,r=e.ownerDocument,i=e.nodeName,n=We[i];return n||(t=r.body.appendChild(r.createElement(i)),n=he.css(t,"display"),t.parentNode.removeChild(t),"none"===n&&(n="block"),We[i]=n,n)}function m(e,t){for(var r,i,n=[],s=0,o=e.length;s<o;s++)(i=e[s]).style&&(r=i.style.display,t?("none"===r&&(n[s]=Fe.get(i,"display")||null,n[s]||(i.style.display="")),""===i.style.display&&Oe(i)&&(n[s]=d(i))):"none"!==r&&(n[s]="none",Fe.set(i,"display",r)));for(s=0;s<o;s++)null!=n[s]&&(e[s].style.display=n[s]);return e}function g(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&he.nodeName(e,t)?he.merge([e],r):r}function y(e,t){for(var r=0,i=e.length;r<i;r++)Fe.set(e[r],"globalEval",!t||Fe.get(t[r],"globalEval"))}function v(e,t,r,i,n){for(var s,o,a,h,c,u,l=t.createDocumentFragment(),f=[],p=0,d=e.length;p<d;p++)if((s=e[p])||0===s)if("object"===he.type(s))he.merge(f,s.nodeType?[s]:s);else if(Ie.test(s)){for(o=o||l.appendChild(t.createElement("div")),a=(Ne.exec(s)||["",""])[1].toLowerCase(),h=qe[a]||qe._default,o.innerHTML=h[1]+he.htmlPrefilter(s)+h[2],u=h[0];u--;)o=o.lastChild;he.merge(f,o.childNodes),(o=l.firstChild).textContent=""}else f.push(t.createTextNode(s));for(l.textContent="",p=0;s=f[p++];)if(i&&he.inArray(s,i)>-1)n&&n.push(s);else if(c=he.contains(s.ownerDocument,s),o=g(l.appendChild(s),"script"),c&&y(o),r)for(u=0;s=o[u++];)_e.test(s.type||"")&&r.push(s);return l}function C(){return!0}function b(){return!1}function S(){try{return $.activeElement}catch(e){}}function B(e,t,r,i,n,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof r&&(i=i||r,r=void 0),t)B(e,a,r,i,t[a],s);return e}if(null==i&&null==n?(n=r,i=r=void 0):null==n&&("string"==typeof r?(n=i,i=void 0):(n=i,i=r,r=void 0)),!1===n)n=b;else if(!n)return e;return 1===s&&(o=n,(n=function(e){return he().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=he.guid++)),e.each(function(){he.event.add(this,t,n,i,r)})}function k(e,t){return he.nodeName(e,"table")&&he.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function R(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function w(e){var t=$e.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){var r,i,n,s,o,a,h,c;if(1===t.nodeType){if(Fe.hasData(e)&&(s=Fe.access(e),o=Fe.set(t,s),c=s.events))for(n in delete o.handle,o.events={},c)for(r=0,i=c[n].length;r<i;r++)he.event.add(t,n,c[n][r]);Ae.hasData(e)&&(a=Ae.access(e),h=he.extend({},a),Ae.set(t,h))}}function L(e,t){var r=t.nodeName.toLowerCase();"input"===r&&Ge.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function F(e,t,r,n){t=K.apply([],t);var s,o,a,h,c,u,l=0,f=e.length,p=f-1,d=t[0],m=he.isFunction(d);if(m||f>1&&"string"==typeof d&&!ae.checkClone&&Ye.test(d))return e.each(function(i){var s=e.eq(i);m&&(t[0]=d.call(this,i,s.html())),F(s,t,r,n)});if(f&&(o=(s=v(t,e[0].ownerDocument,!1,e,n)).firstChild,1===s.childNodes.length&&(s=o),o||n)){for(h=(a=he.map(g(s,"script"),R)).length;l<f;l++)c=s,l!==p&&(c=he.clone(c,!0,!0),h&&he.merge(a,g(c,"script"))),r.call(e[l],c,l);if(h)for(u=a[a.length-1].ownerDocument,he.map(a,w),l=0;l<h;l++)c=a[l],_e.test(c.type||"")&&!Fe.access(c,"globalEval")&&he.contains(u,c)&&(c.src?he._evalUrl&&he._evalUrl(c.src):i(c.textContent.replace(Xe,""),u))}return e}function A(e,t,r){for(var i,n=t?he.filter(t,e):e,s=0;null!=(i=n[s]);s++)r||1!==i.nodeType||he.cleanData(g(i)),i.parentNode&&(r&&he.contains(i.ownerDocument,i)&&y(g(i,"script")),i.parentNode.removeChild(i));return e}function x(e,t,r){var i,n,s,o,a=e.style;return(r=r||et(e))&&(""!==(o=r.getPropertyValue(t)||r[t])||he.contains(e.ownerDocument,e)||(o=he.style(e,t)),!ae.pixelMarginRight()&&Ke.test(o)&&Qe.test(t)&&(i=a.width,n=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=r.width,a.width=i,a.minWidth=n,a.maxWidth=s)),void 0!==o?o+"":o}function H(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e){if(e in st)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=nt.length;r--;)if((e=nt[r]+t)in st)return e}function M(e,t,r){var i=Me.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function E(e,t,r,i,n){var s,o=0;for(s=r===(i?"border":"content")?4:"width"===t?1:0;s<4;s+=2)"margin"===r&&(o+=he.css(e,r+Ee[s],!0,n)),i?("content"===r&&(o-=he.css(e,"padding"+Ee[s],!0,n)),"margin"!==r&&(o-=he.css(e,"border"+Ee[s]+"Width",!0,n))):(o+=he.css(e,"padding"+Ee[s],!0,n),"padding"!==r&&(o+=he.css(e,"border"+Ee[s]+"Width",!0,n)));return o}function O(e,t,r){var i,n=!0,s=et(e),o="border-box"===he.css(e,"boxSizing",!1,s);if(e.getClientRects().length&&(i=e.getBoundingClientRect()[t]),i<=0||null==i){if(((i=x(e,t,s))<0||null==i)&&(i=e.style[t]),Ke.test(i))return i;n=o&&(ae.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+E(e,t,r||(o?"border":"content"),n,s)+"px"}function D(e,t,r,i,n){return new D.prototype.init(e,t,r,i,n)}function W(){at&&(t.requestAnimationFrame(W),he.fx.tick())}function G(){return t.setTimeout(function(){ot=void 0}),ot=he.now()}function N(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=Ee[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function _(e,t,r){for(var i,n=(q.tweeners[t]||[]).concat(q.tweeners["*"]),s=0,o=n.length;s<o;s++)if(i=n[s].call(r,t,e))return i}function q(e,t,r){var i,n,s=0,o=q.prefilters.length,a=he.Deferred().always(function(){delete h.elem}),h=function(){if(n)return!1;for(var t=ot||G(),r=Math.max(0,c.startTime+c.duration-t),i=1-(r/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(i);return a.notifyWith(e,[c,i,r]),i<1&&o?r:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:he.extend({},t),opts:he.extend(!0,{specialEasing:{},easing:he.easing._default},r),originalProperties:t,originalOptions:r,startTime:ot||G(),duration:r.duration,tweens:[],createTween:function(t,r){var i=he.Tween(e,c.opts,t,r,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var r=0,i=t?c.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)c.tweens[r].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var r,i,n,s,o;for(r in e)if(n=t[i=he.camelCase(r)],s=e[r],he.isArray(s)&&(n=s[1],s=e[r]=s[0]),r!==i&&(e[i]=s,delete e[r]),(o=he.cssHooks[i])&&"expand"in o)for(r in s=o.expand(s),delete e[i],s)r in e||(e[r]=s[r],t[r]=n);else t[i]=n}(u,c.opts.specialEasing);s<o;s++)if(i=q.prefilters[s].call(c,e,u,c.opts))return he.isFunction(i.stop)&&(he._queueHooks(c.elem,c.opts.queue).stop=he.proxy(i.stop,i)),i;return he.map(u,_,c),he.isFunction(c.opts.start)&&c.opts.start.call(e,c),he.fx.timer(he.extend(h,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function I(e){return(e.match(ke)||[]).join(" ")}function j(e){return e.getAttribute&&e.getAttribute("class")||""}function U(e,t,r,i){var n;if(he.isArray(t))he.each(t,function(t,n){r||Ct.test(e)?i(e,n):U(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,r,i)});else if(r||"object"!==he.type(t))i(e,t);else for(n in t)U(e+"["+n+"]",t[n],r,i)}function Z(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,s=t.toLowerCase().match(ke)||[];if(he.isFunction(r))for(;i=s[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function z(e,t,r,i){function n(a){var h;return s[a]=!0,he.each(e[a]||[],function(e,a){var c=a(t,r,i);return"string"!=typeof c||o||s[c]?o?!(h=c):void 0:(t.dataTypes.unshift(c),n(c),!1)}),h}var s={},o=e===xt;return n(t.dataTypes[0])||!s["*"]&&n("*")}function V(e,t){var r,i,n=he.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&he.extend(!0,e,i),e}function J(e){return he.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],$=t.document,X=Object.getPrototypeOf,Q=Y.slice,K=Y.concat,ee=Y.push,te=Y.indexOf,re={},ie=re.toString,ne=re.hasOwnProperty,se=ne.toString,oe=se.call(Object),ae={},he=function(e,t){return new he.fn.init(e,t)},ce=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ue=/^-ms-/,le=/-([a-z])/g,fe=function(e,t){return t.toUpperCase()};he.fn=he.prototype={jquery:"3.1.1",constructor:he,length:0,toArray:function(){return Q.call(this)},get:function(e){return null==e?Q.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=he.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return he.each(this,e)},map:function(e){return this.pushStack(he.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:ee,sort:Y.sort,splice:Y.splice},he.extend=he.fn.extend=function(){var e,t,r,i,n,s,o=arguments[0]||{},a=1,h=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||he.isFunction(o)||(o={}),a===h&&(o=this,a--);a<h;a++)if(null!=(e=arguments[a]))for(t in e)r=o[t],o!==(i=e[t])&&(c&&i&&(he.isPlainObject(i)||(n=he.isArray(i)))?(n?(n=!1,s=r&&he.isArray(r)?r:[]):s=r&&he.isPlainObject(r)?r:{},o[t]=he.extend(c,s,i)):void 0!==i&&(o[t]=i));return o},he.extend({expando:"jQuery"+("3.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===he.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=he.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==ie.call(e)||(t=X(e))&&(r=ne.call(t,"constructor")&&t.constructor,"function"!=typeof r||se.call(r)!==oe))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?re[ie.call(e)]||"object":typeof e},globalEval:function(e){i(e)},camelCase:function(e){return e.replace(ue,"ms-").replace(le,fe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(n(e))for(r=e.length;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ce,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?he.merge(r,"string"==typeof e?[e]:e):ee.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:te.call(t,e,r)},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,s=e.length,o=!r;n<s;n++)!t(e[n],n)!==o&&i.push(e[n]);return i},map:function(e,t,r){var i,s,o=0,a=[];if(n(e))for(i=e.length;o<i;o++)null!=(s=t(e[o],o,r))&&a.push(s);else for(o in e)null!=(s=t(e[o],o,r))&&a.push(s);return K.apply([],a)},guid:1,proxy:function(e,t){var r,i,n;if("string"==typeof t&&(r=e[t],t=e,e=r),he.isFunction(e))return i=Q.call(arguments,2),(n=function(){return e.apply(t||this,i.concat(Q.call(arguments)))}).guid=e.guid=e.guid||he.guid++,n},now:Date.now,support:ae}),"function"==typeof Symbol&&(he.fn[Symbol.iterator]=Y[Symbol.iterator]),he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){re["[object "+t+"]"]=t.toLowerCase()});var pe=function(e){function t(e,t,r,i){var n,s,o,a,h,c,u,f=t&&t.ownerDocument,d=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return r;if(!i&&((t?t.ownerDocument||t:q)!==M&&P(t),t=t||M,O)){if(11!==d&&(h=ye.exec(e)))if(n=h[1]){if(9===d){if(!(o=t.getElementById(n)))return r;if(o.id===n)return r.push(o),r}else if(f&&(o=f.getElementById(n))&&N(t,o)&&o.id===n)return r.push(o),r}else{if(h[2])return Q.apply(r,t.getElementsByTagName(e)),r;if((n=h[3])&&B.getElementsByClassName&&t.getElementsByClassName)return Q.apply(r,t.getElementsByClassName(n)),r}if(B.qsa&&!z[e+" "]&&(!D||!D.test(e))){if(1!==d)f=t,u=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(Se,Be):t.setAttribute("id",a=_),s=(c=T(e)).length;s--;)c[s]="#"+a+" "+p(c[s]);u=c.join(","),f=ve.test(e)&&l(t.parentNode)||t}if(u)try{return Q.apply(r,f.querySelectorAll(u)),r}catch(e){}finally{a===_&&t.removeAttribute("id")}}}return F(e.replace(ae,"$1"),t,r,i)}function r(){var e=[];return function t(r,i){return e.push(r+" ")>k.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function i(e){return e[_]=!0,e}function n(e){var t=M.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var r=e.split("|"),i=r.length;i--;)k.attrHandle[r[i]]=t}function o(e,t){var r=t&&e,i=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function a(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function h(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Re(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function u(e){return i(function(t){return t=+t,i(function(r,i){for(var n,s=e([],r.length,t),o=s.length;o--;)r[n=s[o]]&&(r[n]=!(i[n]=r[n]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function f(){}function p(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function d(e,t,r){var i=t.dir,n=t.next,s=n||i,o=r&&"parentNode"===s,a=j++;return t.first?function(t,r,n){for(;t=t[i];)if(1===t.nodeType||o)return e(t,r,n);return!1}:function(t,r,h){var c,u,l,f=[I,a];if(h){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,r,h))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(u=(l=t[_]||(t[_]={}))[t.uniqueID]||(l[t.uniqueID]={}),n&&n===t.nodeName.toLowerCase())t=t[i]||t;else{if((c=u[s])&&c[0]===I&&c[1]===a)return f[2]=c[2];if(u[s]=f,f[2]=e(t,r,h))return!0}return!1}}function m(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function g(e,r,i){for(var n=0,s=r.length;n<s;n++)t(e,r[n],i);return i}function y(e,t,r,i,n){for(var s,o=[],a=0,h=e.length,c=null!=t;a<h;a++)(s=e[a])&&(r&&!r(s,i,n)||(o.push(s),c&&t.push(a)));return o}function v(e,t,r,n,s,o){return n&&!n[_]&&(n=v(n)),s&&!s[_]&&(s=v(s,o)),i(function(i,o,a,h){var c,u,l,f=[],p=[],d=o.length,m=i||g(t||"*",a.nodeType?[a]:a,[]),v=!e||!i&&t?m:y(m,f,e,a,h),C=r?s||(i?e:d||n)?[]:o:v;if(r&&r(v,C,a,h),n)for(c=y(C,p),n(c,[],a,h),u=c.length;u--;)(l=c[u])&&(C[p[u]]=!(v[p[u]]=l));if(i){if(s||e){if(s){for(c=[],u=C.length;u--;)(l=C[u])&&c.push(v[u]=l);s(null,C=[],c,h)}for(u=C.length;u--;)(l=C[u])&&(c=s?ee(i,l):f[u])>-1&&(i[c]=!(o[c]=l))}}else C=y(C===o?C.splice(d,C.length):C),s?s(null,o,C,h):Q.apply(o,C)})}function C(e){for(var t,r,i,n=e.length,s=k.relative[e[0].type],o=s||k.relative[" "],a=s?1:0,h=d(function(e){return e===t},o,!0),c=d(function(e){return ee(t,e)>-1},o,!0),u=[function(e,r,i){var n=!s&&(i||r!==A)||((t=r).nodeType?h(e,r,i):c(e,r,i));return t=null,n}];a<n;a++)if(r=k.relative[e[a].type])u=[d(m(u),r)];else{if((r=k.filter[e[a].type].apply(null,e[a].matches))[_]){for(i=++a;i<n&&!k.relative[e[i].type];i++);return v(a>1&&m(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),r,a<i&&C(e.slice(a,i)),i<n&&C(e=e.slice(i)),i<n&&p(e))}u.push(r)}return m(u)}function b(e,r){var n=r.length>0,s=e.length>0,o=function(i,o,a,h,c){var u,l,f,p=0,d="0",m=i&&[],g=[],v=A,C=i||s&&k.find.TAG("*",c),b=I+=null==v?1:Math.random()||.1,S=C.length;for(c&&(A=o===M||o||c);d!==S&&null!=(u=C[d]);d++){if(s&&u){for(l=0,o||u.ownerDocument===M||(P(u),a=!O);f=e[l++];)if(f(u,o||M,a)){h.push(u);break}c&&(I=b)}n&&((u=!f&&u)&&p--,i&&m.push(u))}if(p+=d,n&&d!==p){for(l=0;f=r[l++];)f(m,g,o,a);if(i){if(p>0)for(;d--;)m[d]||g[d]||(g[d]=$.call(h));g=y(g)}Q.apply(h,g),c&&!i&&g.length>0&&p+r.length>1&&t.uniqueSort(h)}return c&&(I=b,A=v),m};return n?i(o):o}var S,B,k,R,w,T,L,F,A,x,H,P,M,E,O,D,W,G,N,_="sizzle"+1*new Date,q=e.document,I=0,j=0,U=r(),Z=r(),z=r(),V=function(e,t){return e===t&&(H=!0),0},J={}.hasOwnProperty,Y=[],$=Y.pop,X=Y.push,Q=Y.push,K=Y.slice,ee=function(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+re+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",oe=new RegExp(re+"+","g"),ae=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),he=new RegExp("^"+re+"*,"+re+"*"),ce=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),ue=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),le=new RegExp(se),fe=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},de=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,Ce=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),be=function(e,t,r){var i="0x"+t-65536;return i!=i||r?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Se=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Be=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ke=function(){P()},Re=d(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(Y=K.call(q.childNodes),q.childNodes),Y[q.childNodes.length].nodeType}catch(e){Q={apply:Y.length?function(e,t){X.apply(e,K.call(t))}:function(e,t){for(var r=e.length,i=0;e[r++]=t[i++];);e.length=r-1}}}for(S in B=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},P=t.setDocument=function(e){var t,r,i=e?e.ownerDocument||e:q;return i!==M&&9===i.nodeType&&i.documentElement?(E=(M=i).documentElement,O=!w(M),q!==M&&(r=M.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",ke,!1):r.attachEvent&&r.attachEvent("onunload",ke)),B.attributes=n(function(e){return e.className="i",!e.getAttribute("className")}),B.getElementsByTagName=n(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),B.getElementsByClassName=ge.test(M.getElementsByClassName),B.getById=n(function(e){return E.appendChild(e).id=_,!M.getElementsByName||!M.getElementsByName(_).length}),B.getById?(k.filter.ID=function(e){var t=e.replace(Ce,be);return function(e){return e.getAttribute("id")===t}},k.find.ID=function(e,t){if(void 0!==t.getElementById&&O){var r=t.getElementById(e);return r?[r]:[]}}):(k.filter.ID=function(e){var t=e.replace(Ce,be);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},k.find.ID=function(e,t){if(void 0!==t.getElementById&&O){var r,i,n,s=t.getElementById(e);if(s){if((r=s.getAttributeNode("id"))&&r.value===e)return[s];for(n=t.getElementsByName(e),i=0;s=n[i++];)if((r=s.getAttributeNode("id"))&&r.value===e)return[s]}return[]}}),k.find.TAG=B.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):B.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,i=[],n=0,s=t.getElementsByTagName(e);if("*"===e){for(;r=s[n++];)1===r.nodeType&&i.push(r);return i}return s},k.find.CLASS=B.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&O)return t.getElementsByClassName(e)},W=[],D=[],(B.qsa=ge.test(M.querySelectorAll))&&(n(function(e){E.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+re+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+_+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||D.push(".#.+[+~]")}),n(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=M.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+re+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&D.push(":enabled",":disabled"),E.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(B.matchesSelector=ge.test(G=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&n(function(e){B.disconnectedMatch=G.call(e,"*"),G.call(e,"[s!='']:x"),W.push("!=",se)}),D=D.length&&new RegExp(D.join("|")),W=W.length&&new RegExp(W.join("|")),t=ge.test(E.compareDocumentPosition),N=t||ge.test(E.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return H=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!B.sortDetached&&t.compareDocumentPosition(e)===r?e===M||e.ownerDocument===q&&N(q,e)?-1:t===M||t.ownerDocument===q&&N(q,t)?1:x?ee(x,e)-ee(x,t):0:4&r?-1:1)}:function(e,t){if(e===t)return H=!0,0;var r,i=0,n=e.parentNode,s=t.parentNode,a=[e],h=[t];if(!n||!s)return e===M?-1:t===M?1:n?-1:s?1:x?ee(x,e)-ee(x,t):0;if(n===s)return o(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)h.unshift(r);for(;a[i]===h[i];)i++;return i?o(a[i],h[i]):a[i]===q?-1:h[i]===q?1:0},M):M},t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==M&&P(e),r=r.replace(ue,"='$1']"),B.matchesSelector&&O&&!z[r+" "]&&(!W||!W.test(r))&&(!D||!D.test(r)))try{var i=G.call(e,r);if(i||B.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(r,M,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==M&&P(e),N(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==M&&P(e);var r=k.attrHandle[t.toLowerCase()],i=r&&J.call(k.attrHandle,t.toLowerCase())?r(e,t,!O):void 0;return void 0!==i?i:B.attributes||!O?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(Se,Be)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],i=0,n=0;if(H=!B.detectDuplicates,x=!B.sortStable&&e.slice(0),e.sort(V),H){for(;t=e[n++];)t===e[n]&&(i=r.push(n));for(;i--;)e.splice(r[i],1)}return x=null,e},R=t.getText=function(e){var t,r="",i=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=R(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[i++];)r+=R(t);return r},(k=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ce,be),e[3]=(e[3]||e[4]||e[5]||"").replace(Ce,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&le.test(r)&&(t=T(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ce,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,r,i){return function(n){var s=t.attr(n,e);return null==s?"!="===r:!r||(s+="","="===r?s===i:"!="===r?s!==i:"^="===r?i&&0===s.indexOf(i):"*="===r?i&&s.indexOf(i)>-1:"$="===r?i&&s.slice(-i.length)===i:"~="===r?(" "+s.replace(oe," ")+" ").indexOf(i)>-1:"|="===r&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,r,i,n){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,h){var c,u,l,f,p,d,m=s!==o?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!h&&!a,C=!1;if(g){if(s){for(;m;){for(f=t;f=f[m];)if(a?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;d=m="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?g.firstChild:g.lastChild],o&&v){for(C=(p=(c=(u=(l=(f=g)[_]||(f[_]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]||[])[0]===I&&c[1])&&c[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(C=p=0)||d.pop();)if(1===f.nodeType&&++C&&f===t){u[e]=[I,p,C];break}}else if(v&&(C=p=(c=(u=(l=(f=t)[_]||(f[_]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]||[])[0]===I&&c[1]),!1===C)for(;(f=++p&&f&&f[m]||(C=p=0)||d.pop())&&((a?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++C||(v&&((u=(l=f[_]||(f[_]={}))[f.uniqueID]||(l[f.uniqueID]={}))[e]=[I,C]),f!==t)););return(C-=n)===i||C%i==0&&C/i>=0}}},PSEUDO:function(e,r){var n,s=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[_]?s(r):s.length>1?(n=[e,e,"",r],k.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,n=s(e,r),o=n.length;o--;)e[i=ee(e,n[o])]=!(t[i]=n[o])}):function(e){return s(e,0,n)}):s}},pseudos:{not:i(function(e){var t=[],r=[],n=L(e.replace(ae,"$1"));return n[_]?i(function(e,t,r,i){for(var s,o=n(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,i,s){return t[0]=e,n(t,null,s,r),t[0]=null,!r.pop()}}),has:i(function(e){return function(r){return t(e,r).length>0}}),contains:i(function(e){return e=e.replace(Ce,be),function(t){return(t.textContent||t.innerText||R(t)).indexOf(e)>-1}}),lang:i(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Ce,be).toLowerCase(),function(t){var r;do{if(r=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===E},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return de.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,r){return[r<0?r+t:r]}),even:u(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:u(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:u(function(e,t,r){for(var i=r<0?r+t:r;--i>=0;)e.push(i);return e}),gt:u(function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e})}}).pseudos.nth=k.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[S]=a(S);for(S in{submit:!0,reset:!0})k.pseudos[S]=h(S);return f.prototype=k.filters=k.pseudos,k.setFilters=new f,T=t.tokenize=function(e,r){var i,n,s,o,a,h,c,u=Z[e+" "];if(u)return r?0:u.slice(0);for(a=e,h=[],c=k.preFilter;a;){for(o in i&&!(n=he.exec(a))||(n&&(a=a.slice(n[0].length)||a),h.push(s=[])),i=!1,(n=ce.exec(a))&&(i=n.shift(),s.push({value:i,type:n[0].replace(ae," ")}),a=a.slice(i.length)),k.filter)!(n=pe[o].exec(a))||c[o]&&!(n=c[o](n))||(i=n.shift(),s.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return r?a.length:a?t.error(e):Z(e,h).slice(0)},L=t.compile=function(e,t){var r,i=[],n=[],s=z[e+" "];if(!s){for(t||(t=T(e)),r=t.length;r--;)(s=C(t[r]))[_]?i.push(s):n.push(s);(s=z(e,b(n,i))).selector=e}return s},F=t.select=function(e,t,r,i){var n,s,o,a,h,c="function"==typeof e&&e,u=!i&&T(e=c.selector||e);if(r=r||[],1===u.length){if((s=u[0]=u[0].slice(0)).length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&O&&k.relative[s[1].type]){if(!(t=(k.find.ID(o.matches[0].replace(Ce,be),t)||[])[0]))return r;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(n=pe.needsContext.test(e)?0:s.length;n--&&(o=s[n],!k.relative[a=o.type]);)if((h=k.find[a])&&(i=h(o.matches[0].replace(Ce,be),ve.test(s[0].type)&&l(t.parentNode)||t))){if(s.splice(n,1),!(e=i.length&&p(s)))return Q.apply(r,i),r;break}}return(c||L(e,u))(i,t,!O,r,!t||ve.test(e)&&l(t.parentNode)||t),r},B.sortStable=_.split("").sort(V).join("")===_,B.detectDuplicates=!!H,P(),B.sortDetached=n(function(e){return 1&e.compareDocumentPosition(M.createElement("fieldset"))}),n(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),B.attributes&&n(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),n(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,r){var i;if(!r)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(t);he.find=pe,he.expr=pe.selectors,he.expr[":"]=he.expr.pseudos,he.uniqueSort=he.unique=pe.uniqueSort,he.text=pe.getText,he.isXMLDoc=pe.isXML,he.contains=pe.contains,he.escapeSelector=pe.escape;var de=function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&he(e).is(r))break;i.push(e)}return i},me=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},ge=he.expr.match.needsContext,ye=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,ve=/^.[^:#\[\.,]*$/;he.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?he.find.matchesSelector(i,e)?[i]:[]:he.find.matches(e,he.grep(t,function(e){return 1===e.nodeType}))},he.fn.extend({find:function(e){var t,r,i=this.length,n=this;if("string"!=typeof e)return this.pushStack(he(e).filter(function(){for(t=0;t<i;t++)if(he.contains(n[t],this))return!0}));for(r=this.pushStack([]),t=0;t<i;t++)he.find(e,n[t],r);return i>1?he.uniqueSort(r):r},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&ge.test(e)?he(e):e||[],!1).length}});var Ce,be=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(he.fn.init=function(e,t,r){var i,n;if(!e)return this;if(r=r||Ce,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:be.exec(e))||!i[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof he?t[0]:t,he.merge(this,he.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:$,!0)),ye.test(i[1])&&he.isPlainObject(t))for(i in t)he.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(n=$.getElementById(i[2]))&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):he.isFunction(e)?void 0!==r.ready?r.ready(e):e(he):he.makeArray(e,this)}).prototype=he.fn,Ce=he($);var Se=/^(?:parents|prev(?:Until|All))/,Be={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({has:function(e){var t=he(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(he.contains(this,t[e]))return!0})},closest:function(e,t){var r,i=0,n=this.length,s=[],o="string"!=typeof e&&he(e);if(!ge.test(e))for(;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&he.find.matchesSelector(r,e))){s.push(r);break}return this.pushStack(s.length>1?he.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?te.call(he(e),this[0]):te.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(he.uniqueSort(he.merge(this.get(),he(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),he.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,r){return de(e,"parentNode",r)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,r){return de(e,"nextSibling",r)},prevUntil:function(e,t,r){return de(e,"previousSibling",r)},siblings:function(e){return me((e.parentNode||{}).firstChild,e)},children:function(e){return me(e.firstChild)},contents:function(e){return e.contentDocument||he.merge([],e.childNodes)}},function(e,t){he.fn[e]=function(r,i){var n=he.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=he.filter(i,n)),this.length>1&&(Be[e]||he.uniqueSort(n),Se.test(e)&&n.reverse()),this.pushStack(n)}});var ke=/[^\x20\t\r\n\f]+/g;he.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return he.each(e.match(ke)||[],function(e,r){t[r]=!0}),t}(e):he.extend({},e);var t,r,i,n,s=[],o=[],a=-1,h=function(){for(n=e.once,i=t=!0;o.length;a=-1)for(r=o.shift();++a<s.length;)!1===s[a].apply(r[0],r[1])&&e.stopOnFalse&&(a=s.length,r=!1);e.memory||(r=!1),t=!1,n&&(s=r?[]:"")},c={add:function(){return s&&(r&&!t&&(a=s.length-1,o.push(r)),function t(r){he.each(r,function(r,i){he.isFunction(i)?e.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==he.type(i)&&t(i)})}(arguments),r&&!t&&h()),this},remove:function(){return he.each(arguments,function(e,t){for(var r;(r=he.inArray(t,s,r))>-1;)s.splice(r,1),r<=a&&a--}),this},has:function(e){return e?he.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return n=o=[],s=r="",this},disabled:function(){return!s},lock:function(){return n=o=[],r||t||(s=r=""),this},locked:function(){return!!n},fireWith:function(e,r){return n||(r=[e,(r=r||[]).slice?r.slice():r],o.push(r),t||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},he.extend({Deferred:function(e){var r=[["notify","progress",he.Callbacks("memory"),he.Callbacks("memory"),2],["resolve","done",he.Callbacks("once memory"),he.Callbacks("once memory"),0,"resolved"],["reject","fail",he.Callbacks("once memory"),he.Callbacks("once memory"),1,"rejected"]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return he.Deferred(function(t){he.each(r,function(r,i){var n=he.isFunction(e[i[4]])&&e[i[4]];s[i[1]](function(){var e=n&&n.apply(this,arguments);e&&he.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,n?[e]:arguments)})}),e=null}).promise()},then:function(e,i,n){function s(e,r,i,n){return function(){var c=this,u=arguments,l=function(){var t,l;if(!(e<o)){if((t=i.apply(c,u))===r.promise())throw new TypeError("Thenable self-resolution");l=t&&("object"==typeof t||"function"==typeof t)&&t.then,he.isFunction(l)?n?l.call(t,s(o,r,a,n),s(o,r,h,n)):(o++,l.call(t,s(o,r,a,n),s(o,r,h,n),s(o,r,a,r.notifyWith))):(i!==a&&(c=void 0,u=[t]),(n||r.resolveWith)(c,u))}},f=n?l:function(){try{l()}catch(t){he.Deferred.exceptionHook&&he.Deferred.exceptionHook(t,f.stackTrace),e+1>=o&&(i!==h&&(c=void 0,u=[t]),r.rejectWith(c,u))}};e?f():(he.Deferred.getStackHook&&(f.stackTrace=he.Deferred.getStackHook()),t.setTimeout(f))}}var o=0;return he.Deferred(function(t){r[0][3].add(s(0,t,he.isFunction(n)?n:a,t.notifyWith)),r[1][3].add(s(0,t,he.isFunction(e)?e:a)),r[2][3].add(s(0,t,he.isFunction(i)?i:h))}).promise()},promise:function(e){return null!=e?he.extend(e,n):n}},s={};return he.each(r,function(e,t){var o=t[2],a=t[5];n[t[1]]=o.add,a&&o.add(function(){i=a},r[3-e][2].disable,r[0][2].lock),o.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=o.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,r=t,i=Array(r),n=Q.call(arguments),s=he.Deferred(),o=function(e){return function(r){i[e]=this,n[e]=arguments.length>1?Q.call(arguments):r,--t||s.resolveWith(i,n)}};if(t<=1&&(c(e,s.done(o(r)).resolve,s.reject),"pending"===s.state()||he.isFunction(n[r]&&n[r].then)))return s.then();for(;r--;)c(n[r],o(r),s.reject);return s.promise()}});var Re=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;he.Deferred.exceptionHook=function(e,r){t.console&&t.console.warn&&e&&Re.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,r)},he.readyException=function(e){t.setTimeout(function(){throw e})};var we=he.Deferred();he.fn.ready=function(e){return we.then(e).catch(function(e){he.readyException(e)}),this},he.extend({isReady:!1,readyWait:1,holdReady:function(e){e?he.readyWait++:he.ready(!0)},ready:function(e){(!0===e?--he.readyWait:he.isReady)||(he.isReady=!0,!0!==e&&--he.readyWait>0||we.resolveWith($,[he]))}}),he.ready.then=we.then,"complete"===$.readyState||"loading"!==$.readyState&&!$.documentElement.doScroll?t.setTimeout(he.ready):($.addEventListener("DOMContentLoaded",u),t.addEventListener("load",u));var Te=function(e,t,r,i,n,s,o){var a=0,h=e.length,c=null==r;if("object"===he.type(r))for(a in n=!0,r)Te(e,t,a,r[a],!0,s,o);else if(void 0!==i&&(n=!0,he.isFunction(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,r){return c.call(he(e),r)})),t))for(;a<h;a++)t(e[a],r,o?i:i.call(e[a],a,t(e[a],r)));return n?e:c?t.call(e):h?t(e[0],r):s},Le=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};l.uid=1,l.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Le(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var i,n=this.cache(e);if("string"==typeof t)n[he.camelCase(t)]=r;else for(i in t)n[he.camelCase(i)]=t[i];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][he.camelCase(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i=e[this.expando];if(void 0!==i){if(void 0!==t){he.isArray(t)?t=t.map(he.camelCase):t=(t=he.camelCase(t))in i?[t]:t.match(ke)||[],r=t.length;for(;r--;)delete i[t[r]]}(void 0===t||he.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!he.isEmptyObject(t)}};var Fe=new l,Ae=new l,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,He=/[A-Z]/g;he.extend({hasData:function(e){return Ae.hasData(e)||Fe.hasData(e)},data:function(e,t,r){return Ae.access(e,t,r)},removeData:function(e,t){Ae.remove(e,t)},_data:function(e,t,r){return Fe.access(e,t,r)},_removeData:function(e,t){Fe.remove(e,t)}}),he.fn.extend({data:function(e,t){var r,i,n,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(n=Ae.get(s),1===s.nodeType&&!Fe.get(s,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&(0===(i=o[r].name).indexOf("data-")&&(i=he.camelCase(i.slice(5)),f(s,i,n[i])));Fe.set(s,"hasDataAttrs",!0)}return n}return"object"==typeof e?this.each(function(){Ae.set(this,e)}):Te(this,function(t){var r;if(s&&void 0===t){if(void 0!==(r=Ae.get(s,e)))return r;if(void 0!==(r=f(s,e)))return r}else this.each(function(){Ae.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Ae.remove(this,e)})}}),he.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=Fe.get(e,t),r&&(!i||he.isArray(r)?i=Fe.access(e,t,he.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=he.queue(e,t),i=r.length,n=r.shift(),s=he._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete s.stop,n.call(e,function(){he.dequeue(e,t)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Fe.get(e,r)||Fe.access(e,r,{empty:he.Callbacks("once memory").add(function(){Fe.remove(e,[t+"queue",r])})})}}),he.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?he.queue(this[0],e):void 0===t?this:this.each(function(){var r=he.queue(this,e,t);he._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&he.dequeue(this,e)})},dequeue:function(e){return this.each(function(){he.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=he.Deferred(),s=this,o=this.length,a=function(){--i||n.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=Fe.get(s[o],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(a));return a(),n.promise(t)}});var Pe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Me=new RegExp("^(?:([+-])=|)("+Pe+")([a-z%]*)$","i"),Ee=["Top","Right","Bottom","Left"],Oe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&he.contains(e.ownerDocument,e)&&"none"===he.css(e,"display")},De=function(e,t,r,i){var n,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in n=r.apply(e,i||[]),t)e.style[s]=o[s];return n},We={};he.fn.extend({show:function(){return m(this,!0)},hide:function(){return m(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Oe(this)?he(this).show():he(this).hide()})}});var Ge=/^(?:checkbox|radio)$/i,Ne=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,_e=/^$|\/(?:java|ecma)script/i,qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.optgroup=qe.option,qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td;var Ie=/<|&#?\w+;/;!function(){var e=$.createDocumentFragment().appendChild($.createElement("div")),t=$.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),ae.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",ae.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var je=$.documentElement,Ue=/^key/,Ze=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ze=/^([^.]*)(?:\.(.+)|)/;he.event={global:{},add:function(e,t,r,i,n){var s,o,a,h,c,u,l,f,p,d,m,g=Fe.get(e);if(g)for(r.handler&&(r=(s=r).handler,n=s.selector),n&&he.find.matchesSelector(je,n),r.guid||(r.guid=he.guid++),(h=g.events)||(h=g.events={}),(o=g.handle)||(o=g.handle=function(t){return void 0!==he&&he.event.triggered!==t.type?he.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(ke)||[""]).length;c--;)p=m=(a=ze.exec(t[c])||[])[1],d=(a[2]||"").split(".").sort(),p&&(l=he.event.special[p]||{},p=(n?l.delegateType:l.bindType)||p,l=he.event.special[p]||{},u=he.extend({type:p,origType:m,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&he.expr.match.needsContext.test(n),namespace:d.join(".")},s),(f=h[p])||((f=h[p]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,i,d,o)||e.addEventListener&&e.addEventListener(p,o)),l.add&&(l.add.call(e,u),u.handler.guid||(u.handler.guid=r.guid)),n?f.splice(f.delegateCount++,0,u):f.push(u),he.event.global[p]=!0)},remove:function(e,t,r,i,n){var s,o,a,h,c,u,l,f,p,d,m,g=Fe.hasData(e)&&Fe.get(e);if(g&&(h=g.events)){for(c=(t=(t||"").match(ke)||[""]).length;c--;)if(p=m=(a=ze.exec(t[c])||[])[1],d=(a[2]||"").split(".").sort(),p){for(l=he.event.special[p]||{},f=h[p=(i?l.delegateType:l.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=f.length;s--;)u=f[s],!n&&m!==u.origType||r&&r.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(s,1),u.selector&&f.delegateCount--,l.remove&&l.remove.call(e,u));o&&!f.length&&(l.teardown&&!1!==l.teardown.call(e,d,g.handle)||he.removeEvent(e,p,g.handle),delete h[p])}else for(p in h)he.event.remove(e,p+t[c],r,i,!0);he.isEmptyObject(h)&&Fe.remove(e,"handle events")}},dispatch:function(e){var t,r,i,n,s,o,a=he.event.fix(e),h=new Array(arguments.length),c=(Fe.get(this,"events")||{})[a.type]||[],u=he.event.special[a.type]||{};for(h[0]=a,t=1;t<arguments.length;t++)h[t]=arguments[t];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(o=he.event.handlers.call(this,a,c),t=0;(n=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=n.elem,r=0;(s=n.handlers[r++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(i=((he.event.special[s.origType]||{}).handle||s.handler).apply(n.elem,h))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(e,t){var r,i,n,s,o,a=[],h=t.delegateCount,c=e.target;if(h&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],o={},r=0;r<h;r++)void 0===o[n=(i=t[r]).selector+" "]&&(o[n]=i.needsContext?he(n,this).index(c)>-1:he.find(n,this,null,[c]).length),o[n]&&s.push(i);s.length&&a.push({elem:c,handlers:s})}return c=this,h<t.length&&a.push({elem:c,handlers:t.slice(h)}),a},addProp:function(e,t){Object.defineProperty(he.Event.prototype,e,{enumerable:!0,configurable:!0,get:he.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[he.expando]?e:new he.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==S()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===S()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&he.nodeName(this,"input"))return this.click(),!1},_default:function(e){return he.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},he.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},he.Event=function(e,t){return this instanceof he.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?C:b,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&he.extend(this,t),this.timeStamp=e&&e.timeStamp||he.now(),void(this[he.expando]=!0)):new he.Event(e,t)},he.Event.prototype={constructor:he.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=C,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=C,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=C,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ue.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ze.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},he.event.addProp),he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){he.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||he.contains(this,i))||(e.type=n.origType,r=n.handler.apply(this,arguments),e.type=t),r}}}),he.fn.extend({on:function(e,t,r,i){return B(this,e,t,r,i)},one:function(e,t,r,i){return B(this,e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,he(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=b),this.each(function(){he.event.remove(this,e,r,t)})}});var Ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Je=/<script|<style|<link/i,Ye=/checked\s*(?:[^=]|=\s*.checked.)/i,$e=/^true\/(.*)/,Xe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;he.extend({htmlPrefilter:function(e){return e.replace(Ve,"<$1></$2>")},clone:function(e,t,r){var i,n,s,o,a=e.cloneNode(!0),h=he.contains(e.ownerDocument,e);if(!(ae.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||he.isXMLDoc(e)))for(o=g(a),i=0,n=(s=g(e)).length;i<n;i++)L(s[i],o[i]);if(t)if(r)for(s=s||g(e),o=o||g(a),i=0,n=s.length;i<n;i++)T(s[i],o[i]);else T(e,a);return(o=g(a,"script")).length>0&&y(o,!h&&g(e,"script")),a},cleanData:function(e){for(var t,r,i,n=he.event.special,s=0;void 0!==(r=e[s]);s++)if(Le(r)){if(t=r[Fe.expando]){if(t.events)for(i in t.events)n[i]?he.event.remove(r,i):he.removeEvent(r,i,t.handle);r[Fe.expando]=void 0}r[Ae.expando]&&(r[Ae.expando]=void 0)}}}),he.fn.extend({detach:function(e){return A(this,e,!0)},remove:function(e){return A(this,e)},text:function(e){return Te(this,function(e){return void 0===e?he.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return F(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||k(this,e).appendChild(e)})},prepend:function(){return F(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return F(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return F(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(he.cleanData(g(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return he.clone(this,e,t)})},html:function(e){return Te(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Je.test(e)&&!qe[(Ne.exec(e)||["",""])[1].toLowerCase()]){e=he.htmlPrefilter(e);try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(he.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return F(this,arguments,function(t){var r=this.parentNode;he.inArray(this,e)<0&&(he.cleanData(g(this)),r&&r.replaceChild(t,this))},e)}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){he.fn[e]=function(e){for(var r,i=[],n=he(e),s=n.length-1,o=0;o<=s;o++)r=o===s?this:this.clone(!0),he(n[o])[t](r),ee.apply(i,r.get());return this.pushStack(i)}});var Qe=/^margin/,Ke=new RegExp("^("+Pe+")(?!px)[a-z%]+$","i"),et=function(e){var r=e.ownerDocument.defaultView;return r&&r.opener||(r=t),r.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",je.appendChild(o);var e=t.getComputedStyle(a);r="1%"!==e.top,s="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",n="4px"===e.marginRight,je.removeChild(o),a=null}}var r,i,n,s,o=$.createElement("div"),a=$.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ae.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),he.extend(ae,{pixelPosition:function(){return e(),r},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),n},reliableMarginLeft:function(){return e(),s}}))}();var tt=/^(none|table(?!-c[ea]).+)/,rt={position:"absolute",visibility:"hidden",display:"block"},it={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","Moz","ms"],st=$.createElement("div").style;he.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=x(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,s,o,a=he.camelCase(t),h=e.style;return t=he.cssProps[a]||(he.cssProps[a]=P(a)||a),o=he.cssHooks[t]||he.cssHooks[a],void 0===r?o&&"get"in o&&void 0!==(n=o.get(e,!1,i))?n:h[t]:("string"===(s=typeof r)&&(n=Me.exec(r))&&n[1]&&(r=p(e,t,n),s="number"),void(null!=r&&r==r&&("number"===s&&(r+=n&&n[3]||(he.cssNumber[a]?"":"px")),ae.clearCloneStyle||""!==r||0!==t.indexOf("background")||(h[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,i))||(h[t]=r))))}},css:function(e,t,r,i){var n,s,o,a=he.camelCase(t);return t=he.cssProps[a]||(he.cssProps[a]=P(a)||a),(o=he.cssHooks[t]||he.cssHooks[a])&&"get"in o&&(n=o.get(e,!0,r)),void 0===n&&(n=x(e,t,i)),"normal"===n&&t in it&&(n=it[t]),""===r||r?(s=parseFloat(n),!0===r||isFinite(s)?s||0:n):n}}),he.each(["height","width"],function(e,t){he.cssHooks[t]={get:function(e,r,i){if(r)return!tt.test(he.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?O(e,t,i):De(e,rt,function(){return O(e,t,i)})},set:function(e,r,i){var n,s=i&&et(e),o=i&&E(e,t,i,"border-box"===he.css(e,"boxSizing",!1,s),s);return o&&(n=Me.exec(r))&&"px"!==(n[3]||"px")&&(e.style[t]=r,r=he.css(e,t)),M(0,r,o)}}}),he.cssHooks.marginLeft=H(ae.reliableMarginLeft,function(e,t){if(t)return(parseFloat(x(e,"marginLeft"))||e.getBoundingClientRect().left-De(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),he.each({margin:"",padding:"",border:"Width"},function(e,t){he.cssHooks[e+t]={expand:function(r){for(var i=0,n={},s="string"==typeof r?r.split(" "):[r];i<4;i++)n[e+Ee[i]+t]=s[i]||s[i-2]||s[0];return n}},Qe.test(e)||(he.cssHooks[e+t].set=M)}),he.fn.extend({css:function(e,t){return Te(this,function(e,t,r){var i,n,s={},o=0;if(he.isArray(t)){for(i=et(e),n=t.length;o<n;o++)s[t[o]]=he.css(e,t[o],!1,i);return s}return void 0!==r?he.style(e,t,r):he.css(e,t)},e,t,arguments.length>1)}}),he.Tween=D,D.prototype={constructor:D,init:function(e,t,r,i,n,s){this.elem=e,this.prop=r,this.easing=n||he.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(he.cssNumber[r]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,r=D.propHooks[this.prop];return this.options.duration?this.pos=t=he.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=he.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){he.fx.step[e.prop]?he.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[he.cssProps[e.prop]]&&!he.cssHooks[e.prop]?e.elem[e.prop]=e.now:he.style(e.elem,e.prop,e.now+e.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},he.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},he.fx=D.prototype.init,he.fx.step={};var ot,at,ht=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;he.Animation=he.extend(q,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return p(r.elem,e,Me.exec(t),r),r}]},tweener:function(e,t){he.isFunction(e)?(t=e,e=["*"]):e=e.match(ke);for(var r,i=0,n=e.length;i<n;i++)r=e[i],q.tweeners[r]=q.tweeners[r]||[],q.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var i,n,s,o,a,h,c,u,l="width"in t||"height"in t,f=this,p={},d=e.style,g=e.nodeType&&Oe(e),y=Fe.get(e,"fxshow");for(i in r.queue||(null==(o=he._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,f.always(function(){f.always(function(){o.unqueued--,he.queue(e,"fx").length||o.empty.fire()})})),t)if(n=t[i],ht.test(n)){if(delete t[i],s=s||"toggle"===n,n===(g?"hide":"show")){if("show"!==n||!y||void 0===y[i])continue;g=!0}p[i]=y&&y[i]||he.style(e,i)}if((h=!he.isEmptyObject(t))||!he.isEmptyObject(p))for(i in l&&1===e.nodeType&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=y&&y.display)&&(c=Fe.get(e,"display")),"none"===(u=he.css(e,"display"))&&(c?u=c:(m([e],!0),c=e.style.display||c,u=he.css(e,"display"),m([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===he.css(e,"float")&&(h||(f.done(function(){d.display=c}),null==c&&(u=d.display,c="none"===u?"":u)),d.display="inline-block")),r.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]})),h=!1,p)h||(y?"hidden"in y&&(g=y.hidden):y=Fe.access(e,"fxshow",{display:c}),s&&(y.hidden=!g),g&&m([e],!0),f.done(function(){for(i in g||m([e]),Fe.remove(e,"fxshow"),p)he.style(e,i,p[i])})),h=_(g?y[i]:0,i,f),i in y||(y[i]=h.start,g&&(h.end=h.start,h.start=0))}],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),he.speed=function(e,t,r){var i=e&&"object"==typeof e?he.extend({},e):{complete:r||!r&&t||he.isFunction(e)&&e,duration:e,easing:r&&t||t&&!he.isFunction(t)&&t};return he.fx.off||$.hidden?i.duration=0:"number"!=typeof i.duration&&(i.duration in he.fx.speeds?i.duration=he.fx.speeds[i.duration]:i.duration=he.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){he.isFunction(i.old)&&i.old.call(this),i.queue&&he.dequeue(this,i.queue)},i},he.fn.extend({fadeTo:function(e,t,r,i){return this.filter(Oe).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=he.isEmptyObject(e),s=he.speed(t,r,i),o=function(){var t=q(this,he.extend({},e),s);(n||Fe.get(this,"finish"))&&t.stop(!0)};return o.finish=o,n||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=he.timers,o=Fe.get(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&ct.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));!t&&r||he.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=Fe.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],s=he.timers,o=i?i.length:0;for(r.finish=!0,he.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),he.each(["toggle","show","hide"],function(e,t){var r=he.fn[t];he.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(N(t,!0),e,i,n)}}),he.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){he.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}}),he.timers=[],he.fx.tick=function(){var e,t=0,r=he.timers;for(ot=he.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||he.fx.stop(),ot=void 0},he.fx.timer=function(e){he.timers.push(e),e()?he.fx.start():he.timers.pop()},he.fx.interval=13,he.fx.start=function(){at||(at=t.requestAnimationFrame?t.requestAnimationFrame(W):t.setInterval(he.fx.tick,he.fx.interval))},he.fx.stop=function(){t.cancelAnimationFrame?t.cancelAnimationFrame(at):t.clearInterval(at),at=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fn.delay=function(e,r){return e=he.fx&&he.fx.speeds[e]||e,r=r||"fx",this.queue(r,function(r,i){var n=t.setTimeout(r,e);i.stop=function(){t.clearTimeout(n)}})},function(){var e=$.createElement("input"),t=$.createElement("select").appendChild($.createElement("option"));e.type="checkbox",ae.checkOn=""!==e.value,ae.optSelected=t.selected,(e=$.createElement("input")).value="t",e.type="radio",ae.radioValue="t"===e.value}();var ut,lt=he.expr.attrHandle;he.fn.extend({attr:function(e,t){return Te(this,he.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){he.removeAttr(this,e)})}}),he.extend({attr:function(e,t,r){var i,n,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?he.prop(e,t,r):(1===s&&he.isXMLDoc(e)||(n=he.attrHooks[t.toLowerCase()]||(he.expr.match.bool.test(t)?ut:void 0)),void 0!==r?null===r?void he.removeAttr(e,t):n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:(e.setAttribute(t,r+""),r):n&&"get"in n&&null!==(i=n.get(e,t))?i:null==(i=he.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!ae.radioValue&&"radio"===t&&he.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,i=0,n=t&&t.match(ke);if(n&&1===e.nodeType)for(;r=n[i++];)e.removeAttribute(r)}}),ut={set:function(e,t,r){return!1===t?he.removeAttr(e,r):e.setAttribute(r,r),r}},he.each(he.expr.match.bool.source.match(/\w+/g),function(e,t){var r=lt[t]||he.find.attr;lt[t]=function(e,t,i){var n,s,o=t.toLowerCase();return i||(s=lt[o],lt[o]=n,n=null!=r(e,t,i)?o:null,lt[o]=s),n}});var ft=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;he.fn.extend({prop:function(e,t){return Te(this,he.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[he.propFix[e]||e]})}}),he.extend({prop:function(e,t,r){var i,n,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&he.isXMLDoc(e)||(t=he.propFix[t]||t,n=he.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=he.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ae.optSelected||(he.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this}),he.fn.extend({addClass:function(e){var t,r,i,n,s,o,a,h=0;if(he.isFunction(e))return this.each(function(t){he(this).addClass(e.call(this,t,j(this)))});if("string"==typeof e&&e)for(t=e.match(ke)||[];r=this[h++];)if(n=j(r),i=1===r.nodeType&&" "+I(n)+" "){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");n!==(a=I(i))&&r.setAttribute("class",a)}return this},removeClass:function(e){var t,r,i,n,s,o,a,h=0;if(he.isFunction(e))return this.each(function(t){he(this).removeClass(e.call(this,t,j(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(ke)||[];r=this[h++];)if(n=j(r),i=1===r.nodeType&&" "+I(n)+" "){for(o=0;s=t[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");n!==(a=I(i))&&r.setAttribute("class",a)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):he.isFunction(e)?this.each(function(r){he(this).toggleClass(e.call(this,r,j(this),t),t)}):this.each(function(){var t,i,n,s;if("string"===r)for(i=0,n=he(this),s=e.match(ke)||[];t=s[i++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==e&&"boolean"!==r||((t=j(this))&&Fe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Fe.get(this,"__className__")||""))})},hasClass:function(e){var t,r,i=0;for(t=" "+e+" ";r=this[i++];)if(1===r.nodeType&&(" "+I(j(r))+" ").indexOf(t)>-1)return!0;return!1}});var dt=/\r/g;he.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=he.isFunction(e),this.each(function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,he(this).val()):e)?n="":"number"==typeof n?n+="":he.isArray(n)&&(n=he.map(n,function(e){return null==e?"":e+""})),(t=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))})):n?(t=he.valHooks[n.type]||he.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(dt,""):null==r?"":r:void 0}}),he.extend({valHooks:{option:{get:function(e){var t=he.find.attr(e,"value");return null!=t?t:I(he.text(e))}},select:{get:function(e){var t,r,i,n=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],h=o?s+1:n.length;for(i=s<0?h:o?s:0;i<h;i++)if(((r=n[i]).selected||i===s)&&!r.disabled&&(!r.parentNode.disabled||!he.nodeName(r.parentNode,"optgroup"))){if(t=he(r).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var r,i,n=e.options,s=he.makeArray(t),o=n.length;o--;)((i=n[o]).selected=he.inArray(he.valHooks.option.get(i),s)>-1)&&(r=!0);return r||(e.selectedIndex=-1),s}}}}),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(e,t){if(he.isArray(t))return e.checked=he.inArray(he(e).val(),t)>-1}},ae.checkOn||(he.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;he.extend(he.event,{trigger:function(e,r,i,n){var s,o,a,h,c,u,l,f=[i||$],p=ne.call(e,"type")?e.type:e,d=ne.call(e,"namespace")?e.namespace.split("."):[];if(o=a=i=i||$,3!==i.nodeType&&8!==i.nodeType&&!mt.test(p+he.event.triggered)&&(p.indexOf(".")>-1&&(p=(d=p.split(".")).shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,(e=e[he.expando]?e:new he.Event(p,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),r=null==r?[e]:he.makeArray(r,[e]),l=he.event.special[p]||{},n||!l.trigger||!1!==l.trigger.apply(i,r))){if(!n&&!l.noBubble&&!he.isWindow(i)){for(h=l.delegateType||p,mt.test(h+p)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(i.ownerDocument||$)&&f.push(a.defaultView||a.parentWindow||t)}for(s=0;(o=f[s++])&&!e.isPropagationStopped();)e.type=s>1?h:l.bindType||p,(u=(Fe.get(o,"events")||{})[e.type]&&Fe.get(o,"handle"))&&u.apply(o,r),(u=c&&o[c])&&u.apply&&Le(o)&&(e.result=u.apply(o,r),!1===e.result&&e.preventDefault());return e.type=p,n||e.isDefaultPrevented()||l._default&&!1!==l._default.apply(f.pop(),r)||!Le(i)||c&&he.isFunction(i[p])&&!he.isWindow(i)&&((a=i[c])&&(i[c]=null),he.event.triggered=p,i[p](),he.event.triggered=void 0,a&&(i[c]=a)),e.result}},simulate:function(e,t,r){var i=he.extend(new he.Event,r,{type:e,isSimulated:!0});he.event.trigger(i,null,t)}}),he.fn.extend({trigger:function(e,t){return this.each(function(){he.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return he.event.trigger(e,t,r,!0)}}),he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){he.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),he.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ae.focusin="onfocusin"in t,ae.focusin||he.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){he.event.simulate(t,e.target,he.event.fix(e))};he.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=Fe.access(i,t);n||i.addEventListener(e,r,!0),Fe.access(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=Fe.access(i,t)-1;n?Fe.access(i,t,n):(i.removeEventListener(e,r,!0),Fe.remove(i,t))}}});var gt=t.location,yt=he.now(),vt=/\?/;he.parseXML=function(e){var r;if(!e||"string"!=typeof e)return null;try{r=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){r=void 0}return r&&!r.getElementsByTagName("parsererror").length||he.error("Invalid XML: "+e),r};var Ct=/\[\]$/,bt=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;he.param=function(e,t){var r,i=[],n=function(e,t){var r=he.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(he.isArray(e)||e.jquery&&!he.isPlainObject(e))he.each(e,function(){n(this.name,this.value)});else for(r in e)U(r,e[r],t,n);return i.join("&")},he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=he.prop(this,"elements");return e?he.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!he(this).is(":disabled")&&Bt.test(this.nodeName)&&!St.test(e)&&(this.checked||!Ge.test(e))}).map(function(e,t){var r=he(this).val();return null==r?null:he.isArray(r)?he.map(r,function(e){return{name:t.name,value:e.replace(bt,"\r\n")}}):{name:t.name,value:r.replace(bt,"\r\n")}}).get()}});var kt=/%20/g,Rt=/#.*$/,wt=/([?&])_=[^&]*/,Tt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ft=/^\/\//,At={},xt={},Ht="*/".concat("*"),Pt=$.createElement("a");Pt.href=gt.href,he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(gt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ht,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?V(V(e,he.ajaxSettings),t):V(he.ajaxSettings,e)},ajaxPrefilter:Z(At),ajaxTransport:Z(xt),ajax:function(e,r){function i(e,r,i,a){var c,f,p,b,S,B=r;u||(u=!0,h&&t.clearTimeout(h),n=void 0,o=a||"",k.readyState=e>0?4:0,c=e>=200&&e<300||304===e,i&&(b=function(e,t,r){for(var i,n,s,o,a=e.contents,h=e.dataTypes;"*"===h[0];)h.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in a)if(a[n]&&a[n].test(i)){h.unshift(n);break}if(h[0]in r)s=h[0];else{for(n in r){if(!h[0]||e.converters[n+" "+h[0]]){s=n;break}o||(o=n)}s=s||o}if(s)return s!==h[0]&&h.unshift(s),r[s]}(d,k,i)),b=function(e,t,r,i){var n,s,o,a,h,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(r[e.responseFields[s]]=t),!h&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),h=s,s=u.shift())if("*"===s)s=h;else if("*"!==h&&h!==s){if(!(o=c[h+" "+s]||c["* "+s]))for(n in c)if((a=n.split(" "))[1]===s&&(o=c[h+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[n]:!0!==c[n]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+h+" to "+s}}}return{state:"success",data:t}}(d,b,k,c),c?(d.ifModified&&((S=k.getResponseHeader("Last-Modified"))&&(he.lastModified[s]=S),(S=k.getResponseHeader("etag"))&&(he.etag[s]=S)),204===e||"HEAD"===d.type?B="nocontent":304===e?B="notmodified":(B=b.state,f=b.data,c=!(p=b.error))):(p=B,!e&&B||(B="error",e<0&&(e=0))),k.status=e,k.statusText=(r||B)+"",c?y.resolveWith(m,[f,B,k]):y.rejectWith(m,[k,B,p]),k.statusCode(C),C=void 0,l&&g.trigger(c?"ajaxSuccess":"ajaxError",[k,d,c?f:p]),v.fireWith(m,[k,B]),l&&(g.trigger("ajaxComplete",[k,d]),--he.active||he.event.trigger("ajaxStop")))}"object"==typeof e&&(r=e,e=void 0),r=r||{};var n,s,o,a,h,c,u,l,f,p,d=he.ajaxSetup({},r),m=d.context||d,g=d.context&&(m.nodeType||m.jquery)?he(m):he.event,y=he.Deferred(),v=he.Callbacks("once memory"),C=d.statusCode||{},b={},S={},B="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=Tt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)k.always(e[k.status]);else for(t in e)C[t]=[C[t],e[t]];return this},abort:function(e){var t=e||B;return n&&n.abort(t),i(0,t),this}};if(y.promise(k),d.url=((e||d.url||gt.href)+"").replace(Ft,gt.protocol+"//"),d.type=r.method||r.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(ke)||[""],null==d.crossDomain){c=$.createElement("a");try{c.href=d.url,c.href=c.href,d.crossDomain=Pt.protocol+"//"+Pt.host!=c.protocol+"//"+c.host}catch(e){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=he.param(d.data,d.traditional)),z(At,d,r,k),u)return k;for(f in(l=he.event&&d.global)&&0==he.active++&&he.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Lt.test(d.type),s=d.url.replace(Rt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(kt,"+")):(p=d.url.slice(s.length),d.data&&(s+=(vt.test(s)?"&":"?")+d.data,delete d.data),!1===d.cache&&(s=s.replace(wt,"$1"),p=(vt.test(s)?"&":"?")+"_="+yt+++p),d.url=s+p),d.ifModified&&(he.lastModified[s]&&k.setRequestHeader("If-Modified-Since",he.lastModified[s]),he.etag[s]&&k.setRequestHeader("If-None-Match",he.etag[s])),(d.data&&d.hasContent&&!1!==d.contentType||r.contentType)&&k.setRequestHeader("Content-Type",d.contentType),k.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ht+"; q=0.01":""):d.accepts["*"]),d.headers)k.setRequestHeader(f,d.headers[f]);if(d.beforeSend&&(!1===d.beforeSend.call(m,k,d)||u))return k.abort();if(B="abort",v.add(d.complete),k.done(d.success),k.fail(d.error),n=z(xt,d,r,k)){if(k.readyState=1,l&&g.trigger("ajaxSend",[k,d]),u)return k;d.async&&d.timeout>0&&(h=t.setTimeout(function(){k.abort("timeout")},d.timeout));try{u=!1,n.send(b,i)}catch(e){if(u)throw e;i(-1,e)}}else i(-1,"No Transport");return k},getJSON:function(e,t,r){return he.get(e,t,r,"json")},getScript:function(e,t){return he.get(e,void 0,t,"script")}}),he.each(["get","post"],function(e,t){he[t]=function(e,r,i,n){return he.isFunction(r)&&(n=n||i,i=r,r=void 0),he.ajax(he.extend({url:e,type:t,dataType:n,data:r,success:i},he.isPlainObject(e)&&e))}}),he._evalUrl=function(e){return he.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},he.fn.extend({wrapAll:function(e){var t;return this[0]&&(he.isFunction(e)&&(e=e.call(this[0])),t=he(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return he.isFunction(e)?this.each(function(t){he(this).wrapInner(e.call(this,t))}):this.each(function(){var t=he(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=he.isFunction(e);return this.each(function(r){he(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){he(this).replaceWith(this.childNodes)}),this}}),he.expr.pseudos.hidden=function(e){return!he.expr.pseudos.visible(e)},he.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},he.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Mt={0:200,1223:204},Et=he.ajaxSettings.xhr();ae.cors=!!Et&&"withCredentials"in Et,ae.ajax=Et=!!Et,he.ajaxTransport(function(e){var r,i;if(ae.cors||Et&&!e.crossDomain)return{send:function(n,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)a.setRequestHeader(o,n[o]);r=function(e){return function(){r&&(r=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Mt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=r(),i=a.onerror=r("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){r&&i()})},r=r("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}}),he.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return he.globalEval(e),e}}}),he.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),he.ajaxTransport("script",function(e){var t,r;if(e.crossDomain)return{send:function(i,n){t=he("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&n("error"===e.type?404:200,e.type)}),$.head.appendChild(t[0])},abort:function(){r&&r()}}});var Ot=[],Dt=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||he.expando+"_"+yt++;return this[e]=!0,e}}),he.ajaxPrefilter("json jsonp",function(e,r,i){var n,s,o,a=!1!==e.jsonp&&(Dt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=he.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Dt,"$1"+n):!1!==e.jsonp&&(e.url+=(vt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||he.error(n+" was not called"),o[0]},e.dataTypes[0]="json",s=t[n],t[n]=function(){o=arguments},i.always(function(){void 0===s?he(t).removeProp(n):t[n]=s,e[n]&&(e.jsonpCallback=r.jsonpCallback,Ot.push(n)),o&&he.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}),ae.createHTMLDocument=function(){var e=$.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),he.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(ae.createHTMLDocument?((i=(t=$.implementation.createHTMLDocument("")).createElement("base")).href=$.location.href,t.head.appendChild(i)):t=$),n=ye.exec(e),s=!r&&[],n?[t.createElement(n[1])]:(n=v([e],t,s),s&&s.length&&he(s).remove(),he.merge([],n.childNodes)));var i,n,s},he.fn.load=function(e,t,r){var i,n,s,o=this,a=e.indexOf(" ");return a>-1&&(i=I(e.slice(a)),e=e.slice(0,a)),he.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),o.length>0&&he.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(i?he("<div>").append(he.parseHTML(e)).find(i):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,s||[e.responseText,t,e])})}),this},he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){he.fn[t]=function(e){return this.on(t,e)}}),he.expr.pseudos.animated=function(e){return he.grep(he.timers,function(t){return e===t.elem}).length},he.offset={setOffset:function(e,t,r){var i,n,s,o,a,h,c=he.css(e,"position"),u=he(e),l={};"static"===c&&(e.style.position="relative"),a=u.offset(),s=he.css(e,"top"),h=he.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+h).indexOf("auto")>-1?(o=(i=u.position()).top,n=i.left):(o=parseFloat(s)||0,n=parseFloat(h)||0),he.isFunction(t)&&(t=t.call(e,r,he.extend({},a))),null!=t.top&&(l.top=t.top-a.top+o),null!=t.left&&(l.left=t.left-a.left+n),"using"in t?t.using.call(e,l):u.css(l)}},he.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){he.offset.setOffset(this,e,t)});var t,r,i,n,s=this[0];return s?s.getClientRects().length?(i=s.getBoundingClientRect()).width||i.height?(r=J(n=s.ownerDocument),t=n.documentElement,{top:i.top+r.pageYOffset-t.clientTop,left:i.left+r.pageXOffset-t.clientLeft}):i:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===he.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),he.nodeName(e[0],"html")||(i=e.offset()),i={top:i.top+he.css(e[0],"borderTopWidth",!0),left:i.left+he.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-he.css(r,"marginTop",!0),left:t.left-i.left-he.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===he.css(e,"position");)e=e.offsetParent;return e||je})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;he.fn[e]=function(i){return Te(this,function(e,i,n){var s=J(e);return void 0===n?s?s[t]:e[i]:void(s?s.scrollTo(r?s.pageXOffset:n,r?n:s.pageYOffset):e[i]=n)},e,i,arguments.length)}}),he.each(["top","left"],function(e,t){he.cssHooks[t]=H(ae.pixelPosition,function(e,r){if(r)return r=x(e,t),Ke.test(r)?he(e).position()[t]+"px":r})}),he.each({Height:"height",Width:"width"},function(e,t){he.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){he.fn[i]=function(n,s){var o=arguments.length&&(r||"boolean"!=typeof n),a=r||(!0===n||!0===s?"margin":"border");return Te(this,function(t,r,n){var s;return he.isWindow(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===n?he.css(t,r,a):he.style(t,r,n,a)},t,o?n:void 0,o)}})}),he.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),he.parseJSON=JSON.parse,e.registerDynamic("13",[],!1,function(e,t,r){return function(){return he}.call(this)});var Wt=t.jQuery,Gt=t.$;return he.noConflict=function(e){return t.$===he&&(t.$=Gt),e&&t.jQuery===he&&(t.jQuery=Wt),he},r||(t.jQuery=t.$=he),he}),e.register("a",["f","13","10","12"],function(e,t){"use strict";function r(e,t){try{if(S.disallowTypedArrays)return e;if(!e||!e.length)return[];var r=e.length,i=void 0;switch(t){case"uint8":i=new Uint8Array(r);break;case"int8":i=new Int8Array(r);break;case"int32":i=new Int32Array(r);break;case"float32":i=new Float32Array(r)}for(var n=0;n<r;n++)i[n]=e[n];return i}catch(t){return console.log("Could not convert an array to a typed array: "+t.message,1),e}}function n(e){try{if(!e||!e.length)return[];for(var t=[],r=0;r<e.length;++r)t[r]=e[r];return t}catch(t){return console.log("Conversion from a typed array failed: "+t.message,1),e}}function o(e,t,r){var i=void 0;try{if(S.disallowTypedArrays)throw new Error("Settings forced typed arrays to be disabled.");switch(r){case"int8":i=new Int8Array(e);break;case"uint8":i=new Uint8Array(e);break;case"int32":i=new Int32Array(e);break;case"float32":i=new Float32Array(e)}if(0!==t)for(var n=0;n<e;)i[n++]=t}catch(r){console.log("Could not convert an array to a typed array: "+r.message,1),i=[];for(var s=0;s<e;)i[s++]=t}return i}function a(e){for(var t=new Uint8Array(e.length),r=0,i=e.length;r<i;r++)t[r]=e.charCodeAt(r);return t}function h(e,t){var r=new Blob([new Uint8Array(t)],{type:"application/octet-binary"}),i=f("<a />"),n=i.get(0),s=URL.createObjectURL(r);n.href=s,n.download=e,i.appendTo("body"),n.click(),i.remove(),URL.revokeObjectURL(s)}function c(e){return new Promise(function(t){var r=f("<input type='file' accept='"+e.map(function(e){return"."+e}).join(", ")+"' />");r.one("change",function(){if(this.files.length>0){var e=this.files[0],r=new FileReader;r.addEventListener("load",function(){2===this.readyState&&t(this.result)}),r.readAsBinaryString(e)}}),r.click()})}function u(){for(var e=0,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var n=0;n<r.length;n++)e+=r[n].byteLength;for(var s=new Uint8Array(e),o=0;o<r.length;o++){var a=new Uint8Array(r[o]);0===o?s.set(a):s.set(a,r[o-1].byteLength)}return s.buffer}function l(e,t,r){r=r||{},this.api=e,this.events=new p,this.joypad=new U(this),this.cartridgeSlot=new E(this),this.lcd=new k(t,r,this),this.stateManager=new j(this),this.stateManager.init(),this.GBBOOTROM=[],this.GBCBOOTROM=[],this.memoryReadNormal=this.memoryReadNormal.bind(this),this.memoryWriteNormal=this.memoryWriteNormal.bind(this),this.memoryWriteGBCRAM=this.memoryWriteGBCRAM.bind(this),this.memoryWriteMBCRAM=this.memoryWriteMBCRAM.bind(this),this.memoryWriteMBC3RAM=this.memoryWriteMBC3RAM.bind(this),this.memoryReadGBCMemory=this.memoryReadGBCMemory.bind(this),this.memoryReadROM=this.memoryReadROM.bind(this),this.memoryHighWriteNormal=this.memoryHighWriteNormal.bind(this),this.memoryHighReadNormal=this.memoryHighReadNormal.bind(this),this.MBC5WriteRAMBank=this.MBC5WriteRAMBank.bind(this),this.MBCWriteEnable=this.MBCWriteEnable.bind(this),this.memoryReadMBC=this.memoryReadMBC.bind(this),this.memoryReadMBC3=this.memoryReadMBC3.bind(this),this.memoryReadMBC7=this.memoryReadMBC7.bind(this),this.BGGBLayerRender=this.BGGBLayerRender.bind(this),this.WindowGBLayerRender=this.WindowGBLayerRender.bind(this),this.SpriteGBLayerRender=this.SpriteGBLayerRender.bind(this),this.SpriteGBCLayerRender=this.SpriteGBCLayerRender.bind(this),this.CPUCyclesTotal=0,this.CPUCyclesTotalBase=0,this.CPUCyclesTotalCurrent=0,this.CPUCyclesTotalRoundoff=0,this.baseCPUCyclesPerIteration=0,this.usedGBCBootROM=!1,this.stopEmulator=3,this.IRQLineMatched=0,this.memoryReader=[],this.memoryWriter=[],this.memoryHighReader=[],this.memoryHighWriter=[],this.savedStateFileName="",this.spriteCount=252,this.LINECONTROL=[],this.DISPLAYOFFCONTROL=[function(){}],this.LCDCONTROL=null,this.initializeLCDController(),this.audioServer=null,this.numSamplesTotal=0,this.bufferContainAmount=0,this.LSFR15Table=null,this.LSFR7Table=null,this.noiseSampleTable=null,this.initializeAudioStartState(),this.emulatorSpeed=1,this.initializeTiming(),this.audioTicks=0,this.audioIndex=0,this.downsampleInput=0,this.audioDestinationPosition=0,this.rollover=0,this.emulatorTicks=0,this.firstIteration=(new Date).getTime(),this.iterations=0,this.totalLinesPassed=0,this.drewFrame=!1,this.midScanlineOffset=-1,this.pixelEnd=0,this.currentX=0,this.BGCHRCurrentBank=null,this.tileCache=null,this.colors=[15728606,11392916,5411443,1586242],this.OBJPalette=null,this.BGPalette=null,this.updateGBBGPalette=this.updateGBRegularBGPalette,this.updateGBOBJPalette=this.updateGBRegularOBJPalette,this.BGLayerRender=null,this.WindowLayerRender=null,this.SpriteLayerRender=null,this.pixelStart=0,this.intializeWhiteNoise()}var f,p,d,m,g,y,v,C,b,S,B,k,R,w,T,L,F,A,x,H,P,M,E,O,D,W,G,N,_,q,I,j,U,Z,z,V;return{setters:[function(e){},function(e){f=e.default},function(e){p=e.default},function(e){d=e.default}],execute:function(){m=function(e){return function(t){function r(e,t,r,i){var s=t&&t.prototype instanceof n?t:n,o=Object.create(s.prototype),a=new p(i||[]);return o._invoke=u(e,r,a),o}function i(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function n(){}function o(){}function a(){}function h(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){function t(r,n,s,o){var a=i(e[r],e,n);if("throw"!==a.type){var h=a.arg,c=h.value;return c&&"object"==typeof c&&v.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,s,o)},function(e){t("throw",e,s,o)}):Promise.resolve(c).then(function(e){h.value=e,s(h)},o)}o(a.arg)}var r;"object"==typeof s&&s.domain&&(t=s.domain.bind(t)),this._invoke=function(e,i){function n(){return new Promise(function(r,n){t(e,i,r,n)})}return r=r?r.then(n,n):n()}}function u(e,t,r){var n=R;return function(s,o){if(n===T)throw new Error("Generator is already running");if(n===L){if("throw"===s)throw o;return m()}for(;;){var a=r.delegate;if(a){if("return"===s||"throw"===s&&a.iterator[s]===g){r.delegate=null;var h=a.iterator.return;if(h)if("throw"===(c=i(h,a.iterator,o)).type){s="throw",o=c.arg;continue}if("return"===s)continue}var c;if("throw"===(c=i(a.iterator[s],a.iterator,o)).type){r.delegate=null,s="throw",o=c.arg;continue}if(s="next",o=g,!(u=c.arg).done)return n=w,u;r[a.resultName]=u.value,r.next=a.nextLoc,r.delegate=null}if("next"===s)r.sent=r._sent=o;else if("throw"===s){if(n===R)throw n=L,o;r.dispatchException(o)&&(s="next",o=g)}else"return"===s&&r.abrupt("return",o);if(n=T,"normal"===(c=i(e,t,r)).type){n=r.done?L:w;var u={value:c.arg,done:r.done};if(c.arg!==F)return u;r.delegate&&"next"===s&&(o=g)}else"throw"===c.type&&(n=L,s="throw",o=c.arg)}}}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function d(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=g,t.done=!0,t};return i.next=i}}return{next:m}}function m(){return{value:g,done:!0}}var g,y=Object.prototype,v=y.hasOwnProperty,C="function"==typeof Symbol?Symbol:{},b=C.iterator||"@@iterator",S=C.toStringTag||"@@toStringTag",B="object"==typeof e,k=t.regeneratorRuntime;if(k)B&&(e.exports=k);else{(k=t.regeneratorRuntime=B?e.exports:{}).wrap=r;var R="suspendedStart",w="suspendedYield",T="executing",L="completed",F={},A={};A[b]=function(){return this};var x=Object.getPrototypeOf,H=x&&x(x(d([])));H&&H!==y&&v.call(H,b)&&(A=H);var P=a.prototype=n.prototype=Object.create(A);o.prototype=P.constructor=a,a.constructor=o,a[S]=o.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(P),e},k.awrap=function(e){return{__await:e}},h(c.prototype),k.AsyncIterator=c,k.async=function(e,t,i,n){var s=new c(r(e,t,i,n));return k.isGeneratorFunction(t)?s:s.next().then(function(e){return e.done?e.value:s.next()})},h(P),P[S]="Generator",P.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},k.values=d,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,i){return s.type="throw",s.arg=e,r.next=t,!!i}if(this.done)throw e;for(var r=this,i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],s=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var o=v.call(n,"catchLoc"),a=v.call(n,"finallyLoc");if(o&&a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&v.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?this.next=n.finallyLoc:this.complete(s),F},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),f(r),F}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;f(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},F}}}}("object"==typeof i?i:"object"==typeof window?window:"object"==typeof self?self:this),e.exports}({exports:{}}),g=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function i(n,s){try{var o=t[n](s),a=o.value}catch(e){return void r(e)}return o.done?void e(a):Promise.resolve(a).then(function(e){i("next",e)},function(e){i("throw",e)})}("next")})}},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},v=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),C=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},b=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},S={soundOn:!0,bootBootRomFirst:!0,gbHasPriority:!1,soundVolume:.7,colorizeGBMode:!0,disallowTypedArrays:!1,runInterval:8,minAudioBufferSpanAmountOverXInterpreterIterations:10,maxAudioBufferSpanAmountOverXInterpreterIterations:20,enableMBC1Override:!1,alwaysAllowRWtoBanks:!1,forceGBBootRom:!1,enabledChannels:[!0,!0,!0,!0]},e("util",B={getTypedArray:o,fromTypedArray:n,toTypedArray:r,uploadFile:c,downloadFile:h}),k=function(){function e(t,r,i){y(this,e),r=r||{},this.canvas=t,this.gameboy=i,this.width=r.width||160,this.height=r.height||144,this.drawContext=null,this.swizzledFrame=null,this.canvasBuffer=null,this.onscreenWidth=this.width,this.onscreenHeight=this.height,this.offscreenWidth=160,this.offscreenHeight=144,this.offscreenRGBCount=this.offscreenWidth*this.offscreenHeight*3,this.offscreenRGBACount=this.offscreenWidth*this.offscreenHeight*4,this.resizePathClear=!0,this.canvas.height=this.height,this.canvas.width=this.width,this.onscreenContext=this.canvas.getContext("2d"),this.offscreenCanvas=document.createElement("canvas"),this.offscreenContext=this.offscreenCanvas.getContext("2d")}return v(e,[{key:"init",value:function(){this.recomputeDimension(),this.offscreenCanvas.width=this.offscreenWidth,this.offscreenCanvas.height=this.offscreenHeight,this.offscreenContext.msImageSmoothingEnabled=!1,this.offscreenContext.mozImageSmoothingEnabled=!1,this.offscreenContext.webkitImageSmoothingEnabled=!1,this.offscreenContext.imageSmoothingEnabled=!1,this.onscreenContext.msImageSmoothingEnabled=!1,this.onscreenContext.mozImageSmoothingEnabled=!1,this.onscreenContext.webkitImageSmoothingEnabled=!1,this.onscreenContext.imageSmoothingEnabled=!1,this.canvasBuffer=this.offscreenContext.createImageData(this.offscreenWidth,this.offscreenHeight);for(var e=this.offscreenRGBACount;e>0;)e-=4,this.canvasBuffer.data[e]=248,this.canvasBuffer.data[e+1]=248,this.canvasBuffer.data[e+2]=248,this.canvasBuffer.data[e+3]=255;this.graphicsBlit(),this.swizzledFrame||(this.swizzledFrame=B.getTypedArray(this.offscreenRGBCount,255,"uint8")),this.drewFrame=!0,this.requestDraw()}},{key:"recomputeDimension",value:function(){this.onscreenWidth=this.width,this.onscreenHeight=this.height,this.offscreenWidth=160,this.offscreenHeight=144,this.offscreenRGBACount=this.offscreenWidth*this.offscreenHeight*4}},{key:"graphicsBlit",value:function(){this.offscreenWidth===this.onscreenWidth&&this.offscreenHeight===this.onscreenHeight?this.onscreenContext.putImageData(this.canvasBuffer,0,0):(this.offscreenContext.putImageData(this.canvasBuffer,0,0),this.onscreenContext.drawImage(this.offscreenCanvas,0,0,this.onscreenWidth,this.onscreenHeight))}},{key:"requestDraw",value:function(){this.drewFrame&&this.dispatchDraw()}},{key:"dispatchDraw",value:function(){this.offscreenRGBACount>0&&92160===this.offscreenRGBACount&&this.processDraw(this.swizzledFrame)}},{key:"resizeFrameBuffer",value:function(){this.resizePathClear&&(this.resizePathClear=!1,this.resizer.resize(this.swizzledFrame))}},{key:"processDraw",value:function(e){for(var t=this.canvasBuffer.data,r=0,i=0;i<this.offscreenRGBACount;)t[i++]=e[r++],t[i++]=e[r++],t[i++]=e[r++],++i;this.graphicsBlit(),this.drewFrame=!1}},{key:"prepareFrame",value:function(){this.swizzleFrameBuffer(),this.drewFrame=!0}},{key:"swizzleFrameBuffer",value:function(){for(var e=this.gameboy.frameBuffer,t=this.swizzledFrame,r=0,i=0;i<this.offscreenRGBCount;)t[i++]=e[r]>>16&255,t[i++]=e[r]>>8&255,t[i++]=255&e[r],++r}},{key:"DisplayShowOff",value:function(){0===this.drewBlank&&(this.clearFrameBuffer(),this.drewFrame=!0),this.drewBlank=2}},{key:"clearFrameBuffer",value:function(){var e=this.swizzledFrame,t=0;if(this.cartridgeSlot.cartridge.useGBCMode||this.colorizedGBPalettes)for(;t<this.offscreenRGBCount;)e[t++]=248;else for(;t<this.offscreenRGBCount;)e[t++]=239,e[t++]=255,e[t++]=222}}]),e}(),R=[4,12,8,8,4,4,8,4,20,8,8,8,4,4,8,4,4,12,8,8,4,4,8,4,12,8,8,8,4,4,8,4,8,12,8,8,4,4,8,4,8,8,8,8,4,4,8,4,8,12,8,8,12,12,12,4,8,8,8,8,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,8,8,8,8,8,8,4,8,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,4,4,4,4,4,4,8,4,8,12,12,16,12,16,8,16,8,16,12,0,12,24,8,16,8,12,12,4,12,16,8,16,8,16,12,4,12,4,8,16,12,12,8,4,4,16,8,16,16,4,16,4,4,4,8,16,12,12,8,4,4,16,8,16,12,8,16,4,0,4,8,16],w=function(){function e(t){y(this,e),this.data=t,this.dataType=typeof t}return v(e,[{key:"getByte",value:function(e){return"string"===this.dataType?this.data.charCodeAt(e):this.data[e]}},{key:"getChar",value:function(e){return"string"===this.dataType?this.data[e]||"":String.fromCharCode(this.data[e])}},{key:"getString",value:function(e,t){for(var r="",i=e;i<=t;i++)this.getByte(i)>0&&(r+=this.getChar(i));return r}},{key:"length",get:function(){return this.data.length}}]),e}(),T=function(e){function t(e){y(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.romSizes=[32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608],r.ramSizes=[0,8192,8192,32768,131072,65536],r.cartridge=e,r.MBCRAMBanksEnabled=!1,r.currentRAMBankPosition=-40960,r.currentMBCRAMBank=0,r.ROMBankEdge=Math.floor(e.rom.length/16384),r}return b(t,p),v(t,[{key:"setupROM",value:function(){this.romSize=this.romSizes[this.cartridge.romSizeType],console.log("ROM size 0x"+this.romSize.toString(16))}},{key:"setupRAM",value:function(){this.ramSize=this.ramSizes[this.cartridge.ramSizeType],console.log("RAM size 0x"+this.ramSize.toString(16)),this.RAM=B.getTypedArray(this.ramSize,0,"uint8")}},{key:"loadSRAM",value:function(e){e.length===this.ramSize&&(this.RAM=e.slice(0))}},{key:"getSRAM",value:function(){return new Uint8Array(this.RAM.buffer.slice(0,this.ramSize))}},{key:"cutSRAMFromBatteryFileArray",value:function(e){return new Uint8Array(e.buffer.slice(0,this.ramSize))}},{key:"saveState",value:function(){if(this.cartridge.hasBattery&&0!==this.RAM.length)return B.fromTypedArray(this.RAM)}},{key:"readRAM",value:function(e){return this.MBCRAMBanksEnabled||S.alwaysAllowRWtoBanks?this.RAM[e+this.currentRAMBankPosition]:255}},{key:"writeRAM",value:function(e,t){(this.MBCRAMBanksEnabled||S.alwaysAllowRWtoBanks)&&(this.emit("ramWrite"),this.RAM[e+this.currentRAMBankPosition]=t)}},{key:"setCurrentROMBank",value:function(){this.currentROMBank=Math.max(this.ROMBank1Offset%this.ROMBankEdge-1,0)<<14}},{key:"writeEnable",value:function(e,t){this.MBCRAMBanksEnabled=10==(15&t)}}]),t}(),L=function(e){function t(e){y(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.MBC1Mode=!1,r}return b(t,T),v(t,[{key:"writeType",value:function(e,t){this.MBC1Mode=1==(1&t),this.MBC1Mode?(this.ROMBank1Offset&=31,this.setCurrentROMBank()):(this.currentMBCRAMBank=0,this.currentRAMBankPosition=-40960)}},{key:"writeROMBank",value:function(e,t){this.ROMBank1Offset=96&this.ROMBank1Offset|31&t,this.setCurrentROMBank()}},{key:"writeRAMBank",value:function(e,t){this.MBC1Mode?(this.currentMBCRAMBank=3&t,this.currentRAMBankPosition=(this.currentMBCRAMBank<<13)-40960):(this.ROMBank1Offset=(3&t)<<5|31&this.ROMBank1Offset,this.setCurrentROMBank())}},{key:"setCurrentROMBank",value:function(){switch(this.ROMBank1Offset){case 0:case 32:case 64:case 96:this.currentROMBank=this.ROMBank1Offset%this.ROMBankEdge<<14;break;default:this.currentROMBank=this.ROMBank1Offset%this.ROMBankEdge-1<<14}}}]),t}(),F=function(e){function t(){return y(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,T),v(t,[{key:"writeROMBank",value:function(e,t){this.ROMBank1Offset=15&t,this.setCurrentROMBank()}}]),t}(),A=function(){function e(t){y(this,e),this.mbc=t}return v(e,[{key:"writeSeconds",value:function(e){e<60?this.RTCSeconds=e:console.log("(Bank #"+this.mbc.currentMBCRAMBank+") RTC write out of range: "+e)}},{key:"writeMinutes",value:function(e){e<60?this.RTCMinutes=e:console.log("(Bank #"+this.mbc.currentMBCRAMBank+") RTC write out of range: "+e)}},{key:"writeDaysLow",value:function(e){this.RTCDays=255&e|256&this.RTCDays}},{key:"writeDaysHigh",value:function(e){this.RTCDayOverFlow=e>127,this.RTCHalt=64==(64&e),this.RTCDays=(1&e)<<8|255&this.RTCDays}},{key:"writeHours",value:function(e){e<24?this.RTCHours=e:console.log("(Bank #"+this.mbc.currentMBCRAMBank+") RTC write out of range: "+e)}},{key:"readSeconds",value:function(){return this.latchedSeconds}},{key:"readMinutes",value:function(){return this.latchedMinutes}},{key:"readHours",value:function(){return this.latchedHours}},{key:"readDaysLow",value:function(){return this.latchedLDays}},{key:"readDaysHigh",value:function(){return(this.RTCDayOverFlow?128:0)+(this.RTCHALT?64:0)+this.latchedHDays}},{key:"writeLatch",value:function(e,t){0===t?this.RTCisLatched=!1:this.RTCisLatched||(this.RTCisLatched=!0,this.latchedSeconds=0|this.RTCSeconds,this.latchedMinutes=this.RTCMinutes,this.latchedHours=this.RTCHours,this.latchedLDays=255&this.RTCDays,this.latchedHDays=this.RTCDays>>8)}},{key:"get",value:function(){var e=Math.round(this.lastTime/1e3),t=e>>0&65535,r=e>>16&65535;return new Uint32Array([this.RTCSeconds,this.RTCMinutes,this.RTCHours,this.RTCDays,this.RTCDayOverFlow,this.latchedSeconds,this.latchedMinutes,this.latchedHours,this.latchedLDays,this.latchedHDays,t,r])}},{key:"load",value:function(e){var t=this.extract(e);this.RTCSeconds=t.seconds,this.RTCMinutes=t.minutes,this.RTCHours=t.hours,this.RTCDays=t.daysLow,this.RTCDayOverFlow=t.daysHigh,this.latchedSeconds=t.latchedSeconds,this.latchedMinutes=t.latchedMinutes,this.latchedHours=t.latchedHours,this.latchedLDays=t.latchedDaysLow,this.latchedHDays=t.latchedDaysHigh,this.lastTime=t.lastTime}},{key:"cutBatteryFileArray",value:function(e){return new Uint32Array(e.buffer.slice(this.mbc.ramSize,this.mbc.ramSize+48))}},{key:"extract",value:function(e){var t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],h=e[7],c=e[8],u=e[9],l=e[10],f=e[11],p=l;return l&&f&&(p=f<<16|l),{seconds:t,minutes:r,hours:i,daysLow:n,daysHigh:s,latchedSeconds:o,latchedMinutes:a,latchedHours:h,latchedDaysLow:c,latchedDaysHigh:u,lastTime:1e3*p}}},{key:"saveState",value:function(){return[this.lastTime,this.RTCisLatched,this.latchedSeconds,this.latchedMinutes,this.latchedHours,this.latchedLDays,this.latchedHDays,this.RTCSeconds,this.RTCMinutes,this.RTCHours,this.RTCDays,this.RTCDayOverFlow,this.RTCHALT]}},{key:"loadState",value:function(e){var t=0;this.lastTime=e[t++],this.RTCisLatched=e[t++],this.latchedSeconds=e[t++],this.latchedMinutes=e[t++],this.latchedHours=e[t++],this.latchedLDays=e[t++],this.latchedHDays=e[t++],this.RTCSeconds=e[t++],this.RTCMinutes=e[t++],this.RTCHours=e[t++],this.RTCDays=e[t++],this.RTCDayOverFlow=e[t++],this.RTCHALT=e[t]}},{key:"updateClock",value:function(){var e=(new Date).getTime(),t=e-this.lastTime;if(this.lastTime=e,!this.RTCHALT)for(this.RTCSeconds+=t/1e3;this.RTCSeconds>=60;)this.RTCSeconds-=60,++this.RTCMinutes,this.RTCMinutes>=60&&(this.RTCMinutes-=60,++this.RTCHours,this.RTCHours>=24&&(this.RTCHours-=24,++this.RTCDays,this.RTCDays>=512&&(this.RTCDays-=512,this.RTCDayOverFlow=!0)))}}]),e}(),x=function(e){function t(e){y(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.rtc=new A(r),r}return b(t,T),v(t,[{key:"writeROMBank",value:function(e,t){this.ROMBank1Offset=127&t,this.setCurrentROMBank()}},{key:"writeRAMBank",value:function(e,t){this.currentMBCRAMBank=t,t<4&&(this.currentRAMBankPosition=(this.currentMBCRAMBank<<13)-40960)}},{key:"writeRAM",value:function(e,t){if(this.MBCRAMBanksEnabled||S.alwaysAllowRWtoBanks)switch(this.currentMBCRAMBank){case 0:case 1:case 2:case 3:this.emit("ramWrite"),this.RAM[e+this.currentRAMBankPosition]=t;break;case 8:this.rtc&&this.rtc.writeSeconds(t);break;case 9:this.rtc&&this.rtc.writeMinutes(t);break;case 10:this.rtc&&this.rtc.writeHours(t);break;case 11:this.rtc&&this.rtc.writeDaysLow(t);break;case 12:this.rtc&&this.rtc.writeDaysHigh(t);break;default:console.log("Invalid MBC3 bank address selected: "+this.currentMBCRAMBank)}}},{key:"readRAM",value:function(e){if(this.MBCRAMBanksEnabled||S.alwaysAllowRWtoBanks)switch(this.currentMBCRAMBank){case 0:case 1:case 2:case 3:return this.RAM[e+this.currentRAMBankPosition];case 8:return this.rtc&&this.rtc.readSeconds();case 9:return this.rtc&&this.rtc.readMinutes();case 10:return this.rtc&&this.rtc.readHours();case 11:return this.rtc&&this.rtc.readDaysLow();case 12:return this.rtc&&this.rtc.readDaysHigh()}return 255}}]),t}(),H=function(e){function t(){return y(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,T),v(t,[{key:"setCurrentROMBank",value:function(){this.currentROMBank=this.ROMBank1Offset%this.ROMBankEdge-1<<14}},{key:"writeROMBankLow",value:function(e,t){this.ROMBank1Offset=256&this.ROMBank1Offset|t,this.setCurrentROMBank()}},{key:"writeROMBankHigh",value:function(e,t){this.ROMBank1Offset=(1&t)<<8|255&this.ROMBank1Offset,this.setCurrentROMBank()}},{key:"writeRAMBank",value:function(e,t){this.currentMBCRAMBank=15&t,this.currentRAMBankPosition=(this.currentMBCRAMBank<<13)-40960}}]),t}(),P=function(e){function t(e){y(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.highX=127,r.lowX=127,r.highY=127,r.lowY=127,r}return b(t,T),v(t,[{key:"applyGyroEvent",value:function(e,t){e*=-100,e+=2047,this.highX=e>>8,this.lowX=255&e,t*=-100,t+=2047,this.highY=t>>8,this.lowY=255&t}},{key:"read",value:function(e){if(this.MBCRAMBanksEnabled||S.alwaysAllowRWtoBanks)switch(e){case 40960:case 41056:case 41072:case 41088:return 0;case 41040:return this.highY;case 41024:return this.lowY;case 41008:return this.highX;case 40992:return this.lowX;default:return this.RAM[e+this.currentRAMBankPosition]}return 255}}]),t}(),M=function(){function e(t){y(this,e),this.rom=new w(t),this.hasMBC1=!1,this.hasMBC2=!1,this.hasMBC3=!1,this.hasMBC5=!1,this.hasMBC7=!1,this.hasSRAM=!1,this.cMMMO1=!1,this.hasBattery=!1,this.cRUMBLE=!1,this.cCamera=!1,this.cTAMA5=!1,this.cHuC3=!1,this.cHuC1=!1,this.hasRTC=!1}return v(e,[{key:"connect",value:function(e){this.gameboy=e,this.parseROM()}},{key:"parseROM",value:function(){if(this.gameboy.usedBootROM=S.bootBootRomFirst&&(!S.forceGBBootRom&&2048===this.gameboy.GBCBOOTROM.length||S.forceGBBootRom&&256===this.gameboy.GBBOOTROM.length),this.rom.length<16384)throw new Error("ROM size too small.");var e=0;if(this.gameboy.usedBootROM);else for(;e<16384;)this.gameboy.memory[e]=255&this.rom.getByte(e),++e}},{key:"interpret",value:function(){if(this.name=this.rom.getString(308,318),this.gameCode=this.rom.getString(319,322),this.colorCompatibilityByte=this.rom.getByte(323),this.type=this.rom.getByte(327),this.setTypeName(),this.name&&console.log("Game Title: "+this.name),this.gameCode&&console.log("Game Code: "+this.gameCode),this.colorCompatibilityByte&&console.log("Color Compatibility Byte: "+this.colorCompatibilityByte),this.type&&console.log("Cartridge Type: "+this.type),this.typeName&&console.log("Cartridge Type Name: "+this.typeName),this.romSizeType=this.rom.getByte(328),this.ramSizeType=this.rom.getByte(329),this.gameboy.usedBootROM)console.log("used boot rom"),this.useGBCMode=this.gameboy.usedGBCBootROM;else switch(this.colorCompatibilityByte){case 0:this.useGBCMode=!1;break;case 50:S.gbHasPriority||this.name+this.gameCode+this.colorCompatibilityByte!=="Game and Watch 50"?this.useGBCMode=!1:(this.useGBCMode=!0,console.log("Created a boot exception for Game and Watch Gallery 2 (GBC ID byte is wrong on the cartridge)."));break;case 128:this.useGBCMode=!S.gbHasPriority;break;case 192:this.useGBCMode=!0;break;default:this.useGBCMode=!1,console.warn("Unknown GameBoy game type code #"+this.colorCompatibilityByte+", defaulting to GB mode (Old games don't have a type code).")}var e=this.rom.getByte(331),t=65280&this.rom.getByte(324)|255&this.rom.getByte(325);51!==e?(this.isNewLicenseCode=!1,this.licenseCode=e):(this.isNewLicenseCode=!0,this.licenseCode=t)}},{key:"setTypeName",value:function(){switch(this.type){case 0:S.enableMBC1Override||(this.typeName="ROM");case 1:this.hasMBC1=!0,this.typeName="MBC1";break;case 2:this.hasMBC1=!0,this.hasSRAM=!0,this.typeName="MBC1 + SRAM";break;case 3:this.hasMBC1=!0,this.hasSRAM=!0,this.hasBattery=!0,this.typeName="MBC1 + SRAM + Battery";break;case 5:this.hasMBC2=!0,this.typeName="MBC2";break;case 6:this.hasMBC2=!0,this.hasBattery=!0,this.typeName="MBC2 + Battery";break;case 8:this.hasSRAM=!0,this.typeName="ROM + SRAM";break;case 9:this.hasSRAM=!0,this.hasBattery=!0,this.typeName="ROM + SRAM + Battery";break;case 11:this.cMMMO1=!0,this.typeName="MMMO1";break;case 12:this.cMMMO1=!0,this.hasSRAM=!0,this.typeName="MMMO1 + SRAM";break;case 13:this.cMMMO1=!0,this.hasSRAM=!0,this.hasBattery=!0,this.typeName="MMMO1 + SRAM + Battery";break;case 15:this.hasMBC3=!0,this.hasRTC=!0,this.hasBattery=!0,this.typeName="MBC3 + RTC + Battery";break;case 16:this.hasMBC3=!0,this.hasRTC=!0,this.hasBattery=!0,this.hasSRAM=!0,this.typeName="MBC3 + RTC + Battery + SRAM";break;case 17:this.hasMBC3=!0,this.typeName="MBC3";break;case 18:this.hasMBC3=!0,this.hasSRAM=!0,this.typeName="MBC3 + SRAM";break;case 19:this.hasMBC3=!0,this.hasSRAM=!0,this.hasBattery=!0,this.typeName="MBC3 + SRAM + Battery";break;case 25:this.hasMBC5=!0,this.typeName="MBC5";break;case 26:this.hasMBC5=!0,this.hasSRAM=!0,this.typeName="MBC5 + SRAM";break;case 27:this.hasMBC5=!0,this.hasSRAM=!0,this.hasBattery=!0,this.typeName="MBC5 + SRAM + Battery";break;case 28:this.cRUMBLE=!0,this.typeName="RUMBLE";break;case 29:this.cRUMBLE=!0,this.hasSRAM=!0,this.typeName="RUMBLE + SRAM";break;case 30:this.cRUMBLE=!0,this.hasSRAM=!0,this.hasBattery=!0,this.typeName="RUMBLE + SRAM + Battery";break;case 31:this.cCamera=!0,this.typeName="GameBoy Camera";break;case 34:this.hasMBC7=!0,this.hasSRAM=!0,this.hasBattery=!0,this.typeName="MBC7 + SRAM + Battery";break;case 253:this.cTAMA5=!0,this.typeName="TAMA5";break;case 254:this.cHuC3=!0,this.typeName="HuC3";break;case 255:this.cHuC1=!0,this.typeName="HuC1";break;default:this.typeName="Unknown",console.log("Cartridge type is unknown.")}this.hasMBC1&&(this.mbc1=new L(this)),this.hasMBC2&&(this.mbc2=new F(this)),this.hasMBC3&&(this.mbc3=new x(this)),this.hasMBC5&&(this.mbc5=new H(this)),this.hasMBC7&&(this.mbc7=new P(this)),this.mbc=this.mbc1||this.mbc2||this.mbc3||this.mbc5||this.mbc7||null}},{key:"setupRAM",value:function(){this.mbc.setupRAM(),this.gameboy.api.loadSRAM(),this.gameboy.api.loadRTC()}}]),e}(),E=function(){function e(t){y(this,e),this.gameboy=t}return v(e,[{key:"insertCartridge",value:function(e){e.connect(this.gameboy),this.cartridge=e}},{key:"readCartridge",value:function(){this.cartridge.interpret()}}]),e}(),O=function(){function e(t,r,i,n,s){y(this,e),this.fromSampleRate=t,this.toSampleRate=r,this.channels=0|i,this.outputBufferSize=n,this.noReturn=!!s,this.initialize()}return v(e,[{key:"initialize",value:function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error("Invalid settings specified for the resampler.");this.fromSampleRate===this.toSampleRate?(this.resampler=this.bypassResampler,this.ratioWeight=1):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers())}},{key:"compileLinearInterpolationFunction",value:function(){for(var e="var bufferLength = buffer.length;  \tvar outLength = this.outputBufferSize;  \tif ((bufferLength % "+this.channels+") === 0) {  \t\tif (bufferLength > 0) {  \t\t\tvar weight = this.lastWeight;  \t\t\tvar firstWeight = 0;  \t\t\tvar secondWeight = 0;  \t\t\tvar sourceOffset = 0;  \t\t\tvar outputOffset = 0;  \t\t\tvar outputBuffer = this.outputBuffer;  \t\t\tfor (; weight < 1; weight += "+this.ratioWeight+") {  \t\t\t\tsecondWeight = weight % 1;  \t\t\t\tfirstWeight = 1 - secondWeight;",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (this.lastOutput["+t+"] * firstWeight) + (buffer["+t+"] * secondWeight);";e+="}  \t\t\tweight -= 1;  \t\t\tfor (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; outputOffset < outLength && sourceOffset < bufferLength;) {  \t\t\t\tsecondWeight = weight % 1;  \t\t\t\tfirstWeight = 1 - secondWeight;";for(var r=0;r<this.channels;++r)e+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(r>0?" + "+r:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+r)+"] * secondWeight);";e+="weight += "+this.ratioWeight+";  \t\t\t\tsourceOffset = Math.floor(weight) * "+this.channels+";  \t\t\t}";for(var i=0;i<this.channels;++i)e+="this.lastOutput["+i+"] = buffer[sourceOffset++];";e+='this.lastWeight = weight % 1;  \t\t\treturn this.bufferSlice(outputOffset);  \t\t}  \t\telse {  \t\t\treturn (this.noReturn) ? 0 : [];  \t\t}  \t}  \telse {  \t\tthrow(new Error("Buffer was of incorrect sample length."));  \t}',this.resampler=Function("buffer",e)}},{key:"compileMultiTapFunction",value:function(){for(var e="var bufferLength = buffer.length;  \tvar outLength = this.outputBufferSize;  \tif ((bufferLength % "+this.channels+") === 0) {  \t\tif (bufferLength > 0) {  \t\t\tvar weight = 0;",t=0;t<this.channels;++t)e+="var output"+t+" = 0;";e+="var actualPosition = 0;  \t\t\tvar amountToNext = 0;  \t\t\tvar alreadyProcessedTail = !this.tailExists;  \t\t\tthis.tailExists = false;  \t\t\tvar outputBuffer = this.outputBuffer;  \t\t\tvar outputOffset = 0;  \t\t\tvar currentPosition = 0;  \t\t\tdo {  \t\t\t\tif (alreadyProcessedTail) {  \t\t\t\t\tweight = "+this.ratioWeight+";";for(var r=0;r<this.channels;++r)e+="output"+r+" = 0;";e+="}  \t\t\t\telse {  \t\t\t\t\tweight = this.lastWeight;";for(var i=0;i<this.channels;++i)e+="output"+i+" = this.lastOutput["+i+"];";e+="alreadyProcessedTail = true;  \t\t\t\t}  \t\t\t\twhile (weight > 0 && actualPosition < bufferLength) {  \t\t\t\t\tamountToNext = 1 + actualPosition - currentPosition;  \t\t\t\t\tif (weight >= amountToNext) {";for(var n=0;n<this.channels;++n)e+="output"+n+" += buffer[actualPosition++] * amountToNext;";e+="currentPosition = actualPosition;  \t\t\t\t\t\tweight -= amountToNext;  \t\t\t\t\t}  \t\t\t\t\telse {";for(var s=0;s<this.channels;++s)e+="output"+s+" += buffer[actualPosition"+(s>0?" + "+s:"")+"] * weight;";e+="currentPosition += weight;  \t\t\t\t\t\tweight = 0;  \t\t\t\t\t\tbreak;  \t\t\t\t\t}  \t\t\t\t}  \t\t\t\tif (weight <= 0) {";for(var o=0;o<this.channels;++o)e+="outputBuffer[outputOffset++] = output"+o+" / "+this.ratioWeight+";";e+="}  \t\t\t\telse {  \t\t\t\t\tthis.lastWeight = weight;";for(var a=0;a<this.channels;++a)e+="this.lastOutput["+a+"] = output"+a+";";e+='this.tailExists = true;  \t\t\t\t\tbreak;  \t\t\t\t}  \t\t\t} while (actualPosition < bufferLength && outputOffset < outLength);  \t\t\treturn this.bufferSlice(outputOffset);  \t\t}  \t\telse {  \t\t\treturn (this.noReturn) ? 0 : [];  \t\t}  \t}  \telse {  \t\tthrow(new Error("Buffer was of incorrect sample length."));  \t}',this.resampler=Function("buffer",e)}},{key:"bypassResampler",value:function(e){return this.noReturn?(this.outputBuffer=e,e.length):e}},{key:"bufferSlice",value:function(e){if(this.noReturn)return e;try{return this.outputBuffer.subarray(0,e)}catch(t){try{return this.outputBuffer.length=e,this.outputBuffer}catch(t){return this.outputBuffer.slice(0,e)}}}},{key:"initializeBuffers",value:function(){try{this.outputBuffer=new Float32Array(this.outputBufferSize),this.lastOutput=new Float32Array(this.channels)}catch(e){this.outputBuffer=[],this.lastOutput=[]}}}]),e}(),D=function(){function e(t,r,i,n,s){y(this,e),this.samplesPerCallback=2048,this.channelsAllocated=Math.max(t,1),this.sampleRate=Math.abs(r),this.bufferSize=this.samplesPerCallback*this.channelsAllocated,this.minBufferSize=i>=this.bufferSize&&i<n?i&-this.channelsAllocated:this.bufferSize,this.maxBufferSize=Math.floor(n)>this.minBufferSize+this.channelsAllocated?n&-this.channelsAllocated:this.minBufferSize*this.channelsAllocated,this.setVolume(s),this.initializeAudio()}return v(e,[{key:"writeAudio",value:function(e){for(var t=0;t<e.length&&this.audioBufferSize<this.maxBufferSize;)this.audioContextSampleBuffer[this.audioBufferSize++]=e[t++]}},{key:"remainingBuffer",value:function(){return Math.floor(this.resampledSamplesLeft()*this.resampleControl.ratioWeight/this.channelsAllocated)*this.channelsAllocated+this.audioBufferSize}},{key:"initializeAudio",value:function(){this.audioContext=this.audioContext||new AudioContext,this.audioNode||(this.audioNode=this.audioContext.createScriptProcessor(this.samplesPerCallback,0,this.channelsAllocated),this.audioNode.addEventListener("audioprocess",this.processAudio.bind(this)),this.audioNode.connect(this.audioContext.destination),this.resetCallbackAPIAudioBuffer(this.audioContext.sampleRate))}},{key:"processAudio",value:function(e){for(var t=[],r=0;r<this.channelsAllocated;)t[r]=e.outputBuffer.getChannelData(r),++r;this.refillResampledBuffer();for(var i=0;i<this.samplesPerCallback&&this.resampleBufferStart!==this.resampleBufferEnd;){for(r=0;r<this.channelsAllocated;)t[r][i]=this.resampledBuffer[this.resampleBufferStart++]*this.volume,++r;this.resampleBufferStart===this.resampleBufferSize&&(this.resampleBufferStart=0),++i}for(;i<this.samplesPerCallback;){for(r=0;r<this.channelsAllocated;++r)t[r][i]=0;++i}}},{key:"setVolume",value:function(e){this.volume=Math.max(0,Math.min(1,e))}},{key:"resetCallbackAPIAudioBuffer",value:function(e){this.audioBufferSize=this.resampleBufferEnd=this.resampleBufferStart=0,this.initializeResampler(e),this.resampledBuffer=new Float32Array(this.resampleBufferSize)}},{key:"refillResampledBuffer",value:function(){if(this.audioBufferSize>0){for(var e=this.resampleControl.resampler(this.getBufferSamples()),t=this.resampleControl.outputBuffer,r=0;r<e;)this.resampledBuffer[this.resampleBufferEnd++]=t[r++],this.resampleBufferEnd===this.resampleBufferSize&&(this.resampleBufferEnd=0),this.resampleBufferStart===this.resampleBufferEnd&&(this.resampleBufferStart+=this.channelsAllocated,this.resampleBufferStart===this.resampleBufferSize&&(this.resampleBufferStart=0));this.audioBufferSize=0}}},{key:"initializeResampler",value:function(e){this.audioContextSampleBuffer=new Float32Array(this.maxBufferSize),this.resampleBufferSize=Math.max(this.maxBufferSize*Math.ceil(e/this.sampleRate)+this.channelsAllocated,this.bufferSize),this.resampleControl=new O(this.sampleRate,e,this.channelsAllocated,this.resampleBufferSize,!0)}},{key:"resampledSamplesLeft",value:function(){return(this.resampleBufferStart<=this.resampleBufferEnd?0:this.resampleBufferSize)+this.resampleBufferEnd-this.resampleBufferStart}},{key:"getBufferSamples",value:function(){return this.audioContextSampleBuffer.subarray(0,this.audioBufferSize)}}]),e}(),W=[function(){this.FCarry=this.registerB>127,this.registerB=this.registerB<<1&255|(this.FCarry?1:0),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerB},function(){this.FCarry=this.registerC>127,this.registerC=this.registerC<<1&255|(this.FCarry?1:0),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerC},function(){this.FCarry=this.registerD>127,this.registerD=this.registerD<<1&255|(this.FCarry?1:0),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerD},function(){this.FCarry=this.registerE>127,this.registerE=this.registerE<<1&255|(this.FCarry?1:0),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerE},function(){this.FCarry=this.registersHL>32767,this.registersHL=this.registersHL<<1&65024|(this.FCarry?256:0)|255&this.registersHL,this.FHalfCarry=this.FSubtract=!1,this.FZero=this.registersHL<256},function(){this.FCarry=128==(128&this.registersHL),this.registersHL=65280&this.registersHL|this.registersHL<<1&255|(this.FCarry?1:0),this.FHalfCarry=this.FSubtract=!1,this.FZero=0==(255&this.registersHL)},function(){var e=this.memoryReader[this.registersHL](this.registersHL);this.FCarry=e>127,e=e<<1&255|(this.FCarry?1:0),this.memoryWriter[this.registersHL](this.registersHL,e),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===e},function(){this.FCarry=this.registerA>127,this.registerA=this.registerA<<1&255|(this.FCarry?1:0),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerA},function(){this.FCarry=1==(1&this.registerB),this.registerB=(this.FCarry?128:0)|this.registerB>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerB},function(){this.FCarry=1==(1&this.registerC),this.registerC=(this.FCarry?128:0)|this.registerC>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerC},function(){this.FCarry=1==(1&this.registerD),this.registerD=(this.FCarry?128:0)|this.registerD>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerD},function(){this.FCarry=1==(1&this.registerE),this.registerE=(this.FCarry?128:0)|this.registerE>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerE},function(){this.FCarry=256==(256&this.registersHL),this.registersHL=(this.FCarry?32768:0)|this.registersHL>>1&65280|255&this.registersHL,this.FHalfCarry=this.FSubtract=!1,this.FZero=this.registersHL<256},function(){this.FCarry=1==(1&this.registersHL),this.registersHL=65280&this.registersHL|(this.FCarry?128:0)|(255&this.registersHL)>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0==(255&this.registersHL)},function(){var e=this.memoryReader[this.registersHL](this.registersHL);this.FCarry=1==(1&e),e=(this.FCarry?128:0)|e>>1,this.memoryWriter[this.registersHL](this.registersHL,e),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===e},function(){this.FCarry=1==(1&this.registerA),this.registerA=(this.FCarry?128:0)|this.registerA>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerA},function(){var e=this.registerB>127;this.registerB=this.registerB<<1&255|(this.FCarry?1:0),this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerB},function(){var e=this.registerC>127;this.registerC=this.registerC<<1&255|(this.FCarry?1:0),this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerC},function(){var e=this.registerD>127;this.registerD=this.registerD<<1&255|(this.FCarry?1:0),this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerD},function(){var e=this.registerE>127;this.registerE=this.registerE<<1&255|(this.FCarry?1:0),this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerE},function(){var e=this.registersHL>32767;this.registersHL=this.registersHL<<1&65024|(this.FCarry?256:0)|255&this.registersHL,this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=this.registersHL<256},function(){var e=128==(128&this.registersHL);this.registersHL=65280&this.registersHL|this.registersHL<<1&255|(this.FCarry?1:0),this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0==(255&this.registersHL)},function(){var e=this.memoryReader[this.registersHL](this.registersHL),t=e>127;e=e<<1&255|(this.FCarry?1:0),this.FCarry=t,this.memoryWriter[this.registersHL](this.registersHL,e),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===e},function(){var e=this.registerA>127;this.registerA=this.registerA<<1&255|(this.FCarry?1:0),this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerA},function(){var e=1==(1&this.registerB);this.registerB=(this.FCarry?128:0)|this.registerB>>1,this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerB},function(){var e=1==(1&this.registerC);this.registerC=(this.FCarry?128:0)|this.registerC>>1,this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerC},function(){var e=1==(1&this.registerD);this.registerD=(this.FCarry?128:0)|this.registerD>>1,this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerD},function(){var e=1==(1&this.registerE);this.registerE=(this.FCarry?128:0)|this.registerE>>1,this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerE},function(){var e=256==(256&this.registersHL);this.registersHL=(this.FCarry?32768:0)|this.registersHL>>1&65280|255&this.registersHL,this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=this.registersHL<256},function(){var e=1==(1&this.registersHL);this.registersHL=65280&this.registersHL|(this.FCarry?128:0)|(255&this.registersHL)>>1,this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0==(255&this.registersHL)},function(){var e=this.memoryReader[this.registersHL](this.registersHL),t=1==(1&e);e=(this.FCarry?128:0)|e>>1,this.FCarry=t,this.memoryWriter[this.registersHL](this.registersHL,e),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===e},function(){var e=1==(1&this.registerA);this.registerA=(this.FCarry?128:0)|this.registerA>>1,this.FCarry=e,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerA},function(){this.FCarry=this.registerB>127,this.registerB=this.registerB<<1&255,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerB},function(){this.FCarry=this.registerC>127,this.registerC=this.registerC<<1&255,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerC},function(){this.FCarry=this.registerD>127,this.registerD=this.registerD<<1&255,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerD},function(){this.FCarry=this.registerE>127,this.registerE=this.registerE<<1&255,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerE},function(){this.FCarry=this.registersHL>32767,this.registersHL=this.registersHL<<1&65024|255&this.registersHL,this.FHalfCarry=this.FSubtract=!1,this.FZero=this.registersHL<256},function(){this.FCarry=128==(128&this.registersHL),this.registersHL=65280&this.registersHL|this.registersHL<<1&255,this.FHalfCarry=this.FSubtract=!1,this.FZero=0==(255&this.registersHL)},function(){var e=this.memoryReader[this.registersHL](this.registersHL);this.FCarry=e>127,e=e<<1&255,this.memoryWriter[this.registersHL](this.registersHL,e),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===e},function(){this.FCarry=this.registerA>127,this.registerA=this.registerA<<1&255,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerA},function(){this.FCarry=1==(1&this.registerB),this.registerB=128&this.registerB|this.registerB>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerB},function(){this.FCarry=1==(1&this.registerC),this.registerC=128&this.registerC|this.registerC>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerC},function(){this.FCarry=1==(1&this.registerD),this.registerD=128&this.registerD|this.registerD>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerD},function(){this.FCarry=1==(1&this.registerE),this.registerE=128&this.registerE|this.registerE>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerE},function(){this.FCarry=256==(256&this.registersHL),this.registersHL=this.registersHL>>1&65280|33023&this.registersHL,this.FHalfCarry=this.FSubtract=!1,this.FZero=this.registersHL<256},function(){this.FCarry=1==(1&this.registersHL),this.registersHL=65408&this.registersHL|(255&this.registersHL)>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0==(255&this.registersHL)},function(){var e=this.memoryReader[this.registersHL](this.registersHL);this.FCarry=1==(1&e),e=128&e|e>>1,this.memoryWriter[this.registersHL](this.registersHL,e),this.FHalfCarry=this.FSubtract=!1,this.FZero=0===e},function(){this.FCarry=1==(1&this.registerA),this.registerA=128&this.registerA|this.registerA>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerA},function(){this.registerB=(15&this.registerB)<<4|this.registerB>>4,this.FZero=0===this.registerB,this.FCarry=this.FHalfCarry=this.FSubtract=!1},function(){this.registerC=(15&this.registerC)<<4|this.registerC>>4,this.FZero=0===this.registerC,this.FCarry=this.FHalfCarry=this.FSubtract=!1},function(){this.registerD=(15&this.registerD)<<4|this.registerD>>4,this.FZero=0===this.registerD,this.FCarry=this.FHalfCarry=this.FSubtract=!1},function(){this.registerE=(15&this.registerE)<<4|this.registerE>>4,this.FZero=0===this.registerE,this.FCarry=this.FHalfCarry=this.FSubtract=!1},function(){this.registersHL=(3840&this.registersHL)<<4|(61440&this.registersHL)>>4|255&this.registersHL,this.FZero=this.registersHL<256,this.FCarry=this.FHalfCarry=this.FSubtract=!1},function(){this.registersHL=65280&this.registersHL|(15&this.registersHL)<<4|(240&this.registersHL)>>4,this.FZero=0==(255&this.registersHL),this.FCarry=this.FHalfCarry=this.FSubtract=!1},function(){var e=this.memoryReader[this.registersHL](this.registersHL);e=(15&e)<<4|e>>4,this.memoryWriter[this.registersHL](this.registersHL,e),this.FZero=0===e,this.FCarry=this.FHalfCarry=this.FSubtract=!1},function(){this.registerA=(15&this.registerA)<<4|this.registerA>>4,this.FZero=0===this.registerA,this.FCarry=this.FHalfCarry=this.FSubtract=!1},function(){this.FCarry=1==(1&this.registerB),this.registerB>>=1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerB},function(){this.FCarry=1==(1&this.registerC),this.registerC>>=1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerC},function(){this.FCarry=1==(1&this.registerD),this.registerD>>=1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerD},function(){this.FCarry=1==(1&this.registerE),this.registerE>>=1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerE},function(){this.FCarry=256==(256&this.registersHL),this.registersHL=this.registersHL>>1&65280|255&this.registersHL,this.FHalfCarry=this.FSubtract=!1,this.FZero=this.registersHL<256},function(){this.FCarry=1==(1&this.registersHL),this.registersHL=65280&this.registersHL|(255&this.registersHL)>>1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0==(255&this.registersHL)},function(){var e=this.memoryReader[this.registersHL](this.registersHL);this.FCarry=1==(1&e),this.memoryWriter[this.registersHL](this.registersHL,e>>1),this.FHalfCarry=this.FSubtract=!1,this.FZero=e<2},function(){this.FCarry=1==(1&this.registerA),this.registerA>>=1,this.FHalfCarry=this.FSubtract=!1,this.FZero=0===this.registerA},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(1&this.registerB)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(1&this.registerC)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(1&this.registerD)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(1&this.registerE)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(256&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(1&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(1&this.memoryReader[this.registersHL](this.registersHL))},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(1&this.registerA)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(2&this.registerB)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(2&this.registerC)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(2&this.registerD)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(2&this.registerE)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(512&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(2&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(2&this.memoryReader[this.registersHL](this.registersHL))},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(2&this.registerA)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(4&this.registerB)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(4&this.registerC)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(4&this.registerD)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(4&this.registerE)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(1024&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(4&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(4&this.memoryReader[this.registersHL](this.registersHL))},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(4&this.registerA)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(8&this.registerB)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(8&this.registerC)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(8&this.registerD)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(8&this.registerE)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(2048&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(8&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(8&this.memoryReader[this.registersHL](this.registersHL))},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(8&this.registerA)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(16&this.registerB)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(16&this.registerC)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(16&this.registerD)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(16&this.registerE)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(4096&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(16&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(16&this.memoryReader[this.registersHL](this.registersHL))},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(16&this.registerA)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(32&this.registerB)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(32&this.registerC)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(32&this.registerD)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(32&this.registerE)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(8192&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(32&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(32&this.memoryReader[this.registersHL](this.registersHL))},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(32&this.registerA)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(64&this.registerB)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(64&this.registerC)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(64&this.registerD)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(64&this.registerE)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(16384&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(64&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(64&this.memoryReader[this.registersHL](this.registersHL))},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(64&this.registerA)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(128&this.registerB)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(128&this.registerC)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(128&this.registerD)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(128&this.registerE)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(32768&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(128&this.registersHL)},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(128&this.memoryReader[this.registersHL](this.registersHL))},function(){this.FHalfCarry=!0,this.FSubtract=!1,this.FZero=0==(128&this.registerA)},function(){this.registerB&=254},function(){this.registerC&=254},function(){this.registerD&=254},function(){this.registerE&=254},function(){this.registersHL&=65279},function(){this.registersHL&=65534},function(){this.memoryWriter[this.registersHL](this.registersHL,254&this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA&=254},function(){this.registerB&=253},function(){this.registerC&=253},function(){this.registerD&=253},function(){this.registerE&=253},function(){this.registersHL&=65023},function(){this.registersHL&=65533},function(){this.memoryWriter[this.registersHL](this.registersHL,253&this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA&=253},function(){this.registerB&=251},function(){this.registerC&=251},function(){this.registerD&=251},function(){this.registerE&=251},function(){this.registersHL&=64511},function(){this.registersHL&=65531},function(){this.memoryWriter[this.registersHL](this.registersHL,251&this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA&=251},function(){this.registerB&=247},function(){this.registerC&=247},function(){this.registerD&=247},function(){this.registerE&=247},function(){this.registersHL&=63487},function(){this.registersHL&=65527},function(){this.memoryWriter[this.registersHL](this.registersHL,247&this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA&=247},function(){this.registerB&=239},function(){this.registerC&=239},function(){this.registerD&=239},function(){this.registerE&=239},function(){this.registersHL&=61439},function(){this.registersHL&=65519},function(){this.memoryWriter[this.registersHL](this.registersHL,239&this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA&=239},function(){this.registerB&=223},function(){this.registerC&=223},function(){this.registerD&=223},function(){this.registerE&=223},function(){this.registersHL&=57343},function(){this.registersHL&=65503},function(){this.memoryWriter[this.registersHL](this.registersHL,223&this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA&=223},function(){this.registerB&=191},function(){this.registerC&=191},function(){this.registerD&=191},function(){this.registerE&=191},function(){this.registersHL&=49151},function(){this.registersHL&=65471},function(){this.memoryWriter[this.registersHL](this.registersHL,191&this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA&=191},function(){this.registerB&=127},function(){this.registerC&=127},function(){this.registerD&=127},function(){this.registerE&=127},function(){this.registersHL&=32767},function(){this.registersHL&=65407},function(){this.memoryWriter[this.registersHL](this.registersHL,127&this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA&=127},function(){this.registerB|=1},function(){this.registerC|=1},function(){this.registerD|=1},function(){this.registerE|=1},function(){this.registersHL|=256},function(){this.registersHL|=1},function(){this.memoryWriter[this.registersHL](this.registersHL,1|this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA|=1},function(){this.registerB|=2},function(){this.registerC|=2},function(){this.registerD|=2},function(){this.registerE|=2},function(){this.registersHL|=512},function(){this.registersHL|=2},function(){this.memoryWriter[this.registersHL](this.registersHL,2|this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA|=2},function(){this.registerB|=4},function(){this.registerC|=4},function(){this.registerD|=4},function(){this.registerE|=4},function(){this.registersHL|=1024},function(){this.registersHL|=4},function(){this.memoryWriter[this.registersHL](this.registersHL,4|this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA|=4},function(){this.registerB|=8},function(){this.registerC|=8},function(){this.registerD|=8},function(){this.registerE|=8},function(){this.registersHL|=2048},function(){this.registersHL|=8},function(){this.memoryWriter[this.registersHL](this.registersHL,8|this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA|=8},function(){this.registerB|=16},function(){this.registerC|=16},function(){this.registerD|=16},function(){this.registerE|=16},function(){this.registersHL|=4096},function(){this.registersHL|=16},function(){this.memoryWriter[this.registersHL](this.registersHL,16|this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA|=16},function(){this.registerB|=32},function(){this.registerC|=32},function(){this.registerD|=32},function(){this.registerE|=32},function(){this.registersHL|=8192},function(){this.registersHL|=32},function(){this.memoryWriter[this.registersHL](this.registersHL,32|this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA|=32},function(){this.registerB|=64},function(){this.registerC|=64},function(){this.registerD|=64},function(){this.registerE|=64},function(){this.registersHL|=16384},function(){this.registersHL|=64},function(){this.memoryWriter[this.registersHL](this.registersHL,64|this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA|=64},function(){this.registerB|=128},function(){this.registerC|=128},function(){this.registerD|=128},function(){this.registerE|=128},function(){this.registersHL|=32768},function(){this.registersHL|=128},function(){this.memoryWriter[this.registersHL](this.registersHL,128|this.memoryReader[this.registersHL](this.registersHL))},function(){this.registerA|=128}],G=[8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,12,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8,8,8,8,8,8,8,16,8],N=[function(){},function(){this.registerC=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.registerB=this.memoryRead(this.programCounter+1&65535),this.programCounter=this.programCounter+2&65535},function(){this.memoryWrite(this.registerB<<8|this.registerC,this.registerA)},function(){var e=1+(this.registerB<<8|this.registerC);this.registerB=e>>8&255,this.registerC=255&e},function(){this.registerB=this.registerB+1&255,this.FZero=0===this.registerB,this.FHalfCarry=0==(15&this.registerB),this.FSubtract=!1},function(){this.registerB=this.registerB-1&255,this.FZero=0===this.registerB,this.FHalfCarry=15==(15&this.registerB),this.FSubtract=!0},function(){this.registerB=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535},function(){this.FCarry=this.registerA>127,this.registerA=this.registerA<<1&255|this.registerA>>7,this.FZero=this.FSubtract=this.FHalfCarry=!1},function(){var e=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+2&65535,this.memoryWrite(e,255&this.stackPointer),this.memoryWrite(e+1&65535,this.stackPointer>>8)},function(){var e=this.registersHL+(this.registerB<<8|this.registerC);this.FHalfCarry=(4095&this.registersHL)>(4095&e),this.FCarry=e>65535,this.registersHL=65535&e,this.FSubtract=!1},function(){this.registerA=this.memoryRead(this.registerB<<8|this.registerC)},function(){var e=(this.registerB<<8|this.registerC)-1&65535;this.registerB=e>>8,this.registerC=255&e},function(){this.registerC=this.registerC+1&255,this.FZero=0===this.registerC,this.FHalfCarry=0==(15&this.registerC),this.FSubtract=!1},function(){this.registerC=this.registerC-1&255,this.FZero=0===this.registerC,this.FHalfCarry=15==(15&this.registerC),this.FSubtract=!0},function(){this.registerC=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535},function(){this.registerA=this.registerA>>1|(1&this.registerA)<<7,this.FCarry=this.registerA>127,this.FZero=this.FSubtract=this.FHalfCarry=!1},function(){this.cartridgeSlot.cartridge.useGBCMode&&1==(1&this.memory[65357])?(this.memory[65357]>127?(console.log("Going into single clock speed mode."),this.doubleSpeedShifter=0,this.memory[65357]&=127):(console.log("Going into double clock speed mode."),this.doubleSpeedShifter=1,this.memory[65357]|=128),this.memory[65357]&=254):this.handleSTOP()},function(){this.registerE=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.registerD=this.memoryRead(this.programCounter+1&65535),this.programCounter=this.programCounter+2&65535},function(){this.memoryWrite(this.registerD<<8|this.registerE,this.registerA)},function(){var e=1+(this.registerD<<8|this.registerE);this.registerD=e>>8&255,this.registerE=255&e},function(){this.registerD=this.registerD+1&255,this.FZero=0===this.registerD,this.FHalfCarry=0==(15&this.registerD),this.FSubtract=!1},function(){this.registerD=this.registerD-1&255,this.FZero=0===this.registerD,this.FHalfCarry=15==(15&this.registerD),this.FSubtract=!0},function(){this.registerD=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535},function(){var e=this.FCarry?1:0;this.FCarry=this.registerA>127,this.registerA=this.registerA<<1&255|e,this.FZero=this.FSubtract=this.FHalfCarry=!1},function(){this.programCounter=this.programCounter+(this.memoryReader[this.programCounter].apply(this,[this.programCounter])<<24>>24)+1&65535},function(){var e=this.registersHL+(this.registerD<<8|this.registerE);this.FHalfCarry=(4095&this.registersHL)>(4095&e),this.FCarry=e>65535,this.registersHL=65535&e,this.FSubtract=!1},function(){this.registerA=this.memoryRead(this.registerD<<8|this.registerE)},function(){var e=(this.registerD<<8|this.registerE)-1&65535;this.registerD=e>>8,this.registerE=255&e},function(){this.registerE=this.registerE+1&255,this.FZero=0===this.registerE,this.FHalfCarry=0==(15&this.registerE),this.FSubtract=!1},function(){this.registerE=this.registerE-1&255,this.FZero=0===this.registerE,this.FHalfCarry=15==(15&this.registerE),this.FSubtract=!0},function(){this.registerE=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535},function(){var e=this.FCarry?128:0;this.FCarry=1==(1&this.registerA),this.registerA=this.registerA>>1|e,this.FZero=this.FSubtract=this.FHalfCarry=!1},function(){this.FZero?this.programCounter=this.programCounter+1&65535:(this.programCounter=this.programCounter+(this.memoryReader[this.programCounter].apply(this,[this.programCounter])<<24>>24)+1&65535,this.CPUTicks+=4)},function(){this.registersHL=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+2&65535},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.registerA]),this.registersHL=this.registersHL+1&65535},function(){this.registersHL=this.registersHL+1&65535},function(){var e=1+(this.registersHL>>8)&255;this.FZero=0===e,this.FHalfCarry=0==(15&e),this.FSubtract=!1,this.registersHL=e<<8|255&this.registersHL},function(){var e=(this.registersHL>>8)-1&255;this.FZero=0===e,this.FHalfCarry=15==(15&e),this.FSubtract=!0,this.registersHL=e<<8|255&this.registersHL},function(){this.registersHL=this.memoryReader[this.programCounter].apply(this,[this.programCounter])<<8|255&this.registersHL,this.programCounter=this.programCounter+1&65535},function(){this.FSubtract?this.FCarry&&this.FHalfCarry?(this.registerA=this.registerA+154&255,this.FHalfCarry=!1):this.FCarry?this.registerA=this.registerA+160&255:this.FHalfCarry&&(this.registerA=this.registerA+250&255,this.FHalfCarry=!1):((this.FCarry||this.registerA>153)&&(this.registerA=this.registerA+96&255,this.FCarry=!0),(this.FHalfCarry||(15&this.registerA)>9)&&(this.registerA=this.registerA+6&255,this.FHalfCarry=!1)),this.FZero=0===this.registerA},function(){this.FZero?(this.programCounter=this.programCounter+(this.memoryReader[this.programCounter].apply(this,[this.programCounter])<<24>>24)+1&65535,this.CPUTicks+=4):this.programCounter=this.programCounter+1&65535},function(){this.FHalfCarry=(4095&this.registersHL)>2047,this.FCarry=this.registersHL>32767,this.registersHL=this.registersHL<<1&65535,this.FSubtract=!1},function(){this.registerA=this.memoryReader[this.registersHL].apply(this,[this.registersHL]),this.registersHL=this.registersHL+1&65535},function(){this.registersHL=this.registersHL-1&65535},function(){var e=this.registersHL+1&255;this.FZero=0===e,this.FHalfCarry=0==(15&e),this.FSubtract=!1,this.registersHL=65280&this.registersHL|e},function(){var e=this.registersHL-1&255;this.FZero=0===e,this.FHalfCarry=15==(15&e),this.FSubtract=!0,this.registersHL=65280&this.registersHL|e},function(){this.registersHL=65280&this.registersHL|this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535},function(){this.registerA^=255,this.FSubtract=this.FHalfCarry=!0},function(){this.FCarry?this.programCounter=this.programCounter+1&65535:(this.programCounter=this.programCounter+(this.memoryReader[this.programCounter].apply(this,[this.programCounter])<<24>>24)+1&65535,this.CPUTicks+=4)},function(){this.stackPointer=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+2&65535},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.registerA]),this.registersHL=this.registersHL-1&65535},function(){this.stackPointer=this.stackPointer+1&65535},function(){var e=this.memoryReader[this.registersHL].apply(this,[this.registersHL])+1&255;this.FZero=0===e,this.FHalfCarry=0==(15&e),this.FSubtract=!1,this.memoryWriter[this.registersHL].apply(this,[this.registersHL,e])},function(){var e=this.memoryReader[this.registersHL].apply(this,[this.registersHL])-1&255;this.FZero=0===e,this.FHalfCarry=15==(15&e),this.FSubtract=!0,this.memoryWriter[this.registersHL].apply(this,[this.registersHL,e])},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.memoryReader[this.programCounter].apply(this,[this.programCounter])]),this.programCounter=this.programCounter+1&65535},function(){this.FCarry=!0,this.FSubtract=this.FHalfCarry=!1},function(){this.FCarry?(this.programCounter=this.programCounter+(this.memoryReader[this.programCounter].apply(this,[this.programCounter])<<24>>24)+1&65535,this.CPUTicks+=4):this.programCounter=this.programCounter+1&65535},function(){var e=this.registersHL+this.stackPointer;this.FHalfCarry=(4095&this.registersHL)>(4095&e),this.FCarry=e>65535,this.registersHL=65535&e,this.FSubtract=!1},function(){this.registerA=this.memoryReader[this.registersHL].apply(this,[this.registersHL]),this.registersHL=this.registersHL-1&65535},function(){this.stackPointer=this.stackPointer-1&65535},function(){this.registerA=this.registerA+1&255,this.FZero=0===this.registerA,this.FHalfCarry=0==(15&this.registerA),this.FSubtract=!1},function(){this.registerA=this.registerA-1&255,this.FZero=0===this.registerA,this.FHalfCarry=15==(15&this.registerA),this.FSubtract=!0},function(){this.registerA=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535},function(){this.FCarry=!this.FCarry,this.FSubtract=this.FHalfCarry=!1},function(){},function(){this.registerB=this.registerC},function(){this.registerB=this.registerD},function(){this.registerB=this.registerE},function(){this.registerB=this.registersHL>>8},function(){this.registerB=255&this.registersHL},function(){this.registerB=this.memoryReader[this.registersHL].apply(this,[this.registersHL])},function(){this.registerB=this.registerA},function(){this.registerC=this.registerB},function(){},function(){this.registerC=this.registerD},function(){this.registerC=this.registerE},function(){this.registerC=this.registersHL>>8},function(){this.registerC=255&this.registersHL},function(){this.registerC=this.memoryReader[this.registersHL].apply(this,[this.registersHL])},function(){this.registerC=this.registerA},function(){this.registerD=this.registerB},function(){this.registerD=this.registerC},function(){},function(){this.registerD=this.registerE},function(){this.registerD=this.registersHL>>8},function(){this.registerD=255&this.registersHL},function(){this.registerD=this.memoryReader[this.registersHL].apply(this,[this.registersHL])},function(){this.registerD=this.registerA},function(){this.registerE=this.registerB},function(){this.registerE=this.registerC},function(){this.registerE=this.registerD},function(){},function(){this.registerE=this.registersHL>>8},function(){this.registerE=255&this.registersHL},function(){this.registerE=this.memoryReader[this.registersHL].apply(this,[this.registersHL])},function(){this.registerE=this.registerA},function(){this.registersHL=this.registerB<<8|255&this.registersHL},function(){this.registersHL=this.registerC<<8|255&this.registersHL},function(){this.registersHL=this.registerD<<8|255&this.registersHL},function(){this.registersHL=this.registerE<<8|255&this.registersHL},function(){},function(){this.registersHL=257*(255&this.registersHL)},function(){this.registersHL=this.memoryReader[this.registersHL].apply(this,[this.registersHL])<<8|255&this.registersHL},function(){this.registersHL=this.registerA<<8|255&this.registersHL},function(){this.registersHL=65280&this.registersHL|this.registerB},function(){this.registersHL=65280&this.registersHL|this.registerC},function(){this.registersHL=65280&this.registersHL|this.registerD},function(){this.registersHL=65280&this.registersHL|this.registerE},function(){this.registersHL=65280&this.registersHL|this.registersHL>>8},function(){},function(){this.registersHL=65280&this.registersHL|this.memoryReader[this.registersHL].apply(this,[this.registersHL])},function(){this.registersHL=65280&this.registersHL|this.registerA},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.registerB])},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.registerC])},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.registerD])},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.registerE])},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.registersHL>>8])},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,255&this.registersHL])},function(){(this.interruptsEnabled&this.interruptsRequested&31)>0?this.cartridgeSlot.cartridge.useGBCMode||this.usedBootROM?this.CPUTicks+=4:this.skipPCIncrement=!0:this.calculateHALTPeriod()},function(){this.memoryWriter[this.registersHL].apply(this,[this.registersHL,this.registerA])},function(){this.registerA=this.registerB},function(){this.registerA=this.registerC},function(){this.registerA=this.registerD},function(){this.registerA=this.registerE},function(){this.registerA=this.registersHL>>8},function(){this.registerA=255&this.registersHL},function(){this.registerA=this.memoryReader[this.registersHL].apply(this,[this.registersHL])},function(){},function(){var e=this.registerA+this.registerB;this.FHalfCarry=(15&e)<(15&this.registerA),this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+this.registerC;this.FHalfCarry=(15&e)<(15&this.registerA),this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+this.registerD;this.FHalfCarry=(15&e)<(15&this.registerA),this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+this.registerE;this.FHalfCarry=(15&e)<(15&this.registerA),this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+(this.registersHL>>8);this.FHalfCarry=(15&e)<(15&this.registerA),this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+(255&this.registersHL);this.FHalfCarry=(15&e)<(15&this.registerA),this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+this.memoryReader[this.registersHL].apply(this,[this.registersHL]);this.FHalfCarry=(15&e)<(15&this.registerA),this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){this.FHalfCarry=8==(8&this.registerA),this.FCarry=this.registerA>127,this.registerA=this.registerA<<1&255,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+this.registerB+(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)+(15&this.registerB)+(this.FCarry?1:0)>15,this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+this.registerC+(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)+(15&this.registerC)+(this.FCarry?1:0)>15,this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+this.registerD+(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)+(15&this.registerD)+(this.FCarry?1:0)>15,this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA+this.registerE+(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)+(15&this.registerE)+(this.FCarry?1:0)>15,this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registersHL>>8,t=this.registerA+e+(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)+(15&e)+(this.FCarry?1:0)>15,this.FCarry=t>255,this.registerA=255&t,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=255&this.registersHL,t=this.registerA+e+(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)+(15&e)+(this.FCarry?1:0)>15,this.FCarry=t>255,this.registerA=255&t,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.memoryReader[this.registersHL].apply(this,[this.registersHL]),t=this.registerA+e+(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)+(15&e)+(this.FCarry?1:0)>15,this.FCarry=t>255,this.registerA=255&t,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA<<1|(this.FCarry?1:0);this.FHalfCarry=(this.registerA<<1&30|(this.FCarry?1:0))>15,this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){var e=this.registerA-this.registerB;this.FHalfCarry=(15&this.registerA)<(15&e),this.FCarry=e<0,this.registerA=255&e,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-this.registerC;this.FHalfCarry=(15&this.registerA)<(15&e),this.FCarry=e<0,this.registerA=255&e,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-this.registerD;this.FHalfCarry=(15&this.registerA)<(15&e),this.FCarry=e<0,this.registerA=255&e,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-this.registerE;this.FHalfCarry=(15&this.registerA)<(15&e),this.FCarry=e<0,this.registerA=255&e,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-(this.registersHL>>8);this.FHalfCarry=(15&this.registerA)<(15&e),this.FCarry=e<0,this.registerA=255&e,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-(255&this.registersHL);this.FHalfCarry=(15&this.registerA)<(15&e),this.FCarry=e<0,this.registerA=255&e,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-this.memoryReader[this.registersHL].apply(this,[this.registersHL]);this.FHalfCarry=(15&this.registerA)<(15&e),this.FCarry=e<0,this.registerA=255&e,this.FZero=0===e,this.FSubtract=!0},function(){this.registerA=0,this.FHalfCarry=this.FCarry=!1,this.FZero=this.FSubtract=!0},function(){var e=this.registerA-this.registerB-(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)-(15&this.registerB)-(this.FCarry?1:0)<0,this.FCarry=e<0,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!0},function(){var e=this.registerA-this.registerC-(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)-(15&this.registerC)-(this.FCarry?1:0)<0,this.FCarry=e<0,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!0},function(){var e=this.registerA-this.registerD-(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)-(15&this.registerD)-(this.FCarry?1:0)<0,this.FCarry=e<0,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!0},function(){var e=this.registerA-this.registerE-(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)-(15&this.registerE)-(this.FCarry?1:0)<0,this.FCarry=e<0,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!0},function(){var e=this.registersHL>>8,t=this.registerA-e-(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)-(15&e)-(this.FCarry?1:0)<0,this.FCarry=t<0,this.registerA=255&t,this.FZero=0===this.registerA,this.FSubtract=!0},function(){var e=this.registerA-(255&this.registersHL)-(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)-(15&this.registersHL)-(this.FCarry?1:0)<0,this.FCarry=e<0,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!0},function(){var e=this.memoryReader[this.registersHL].apply(this,[this.registersHL]),t=this.registerA-e-(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)-(15&e)-(this.FCarry?1:0)<0,this.FCarry=t<0,this.registerA=255&t,this.FZero=0===this.registerA,this.FSubtract=!0},function(){this.FCarry?(this.FZero=!1,this.FSubtract=this.FHalfCarry=this.FCarry=!0,this.registerA=255):(this.FHalfCarry=this.FCarry=!1,this.FSubtract=this.FZero=!0,this.registerA=0)},function(){this.registerA&=this.registerB,this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.registerA&=this.registerC,this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.registerA&=this.registerD,this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.registerA&=this.registerE,this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.registerA&=this.registersHL>>8,this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.registerA&=this.registersHL,this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.registerA&=this.memoryReader[this.registersHL].apply(this,[this.registersHL]),this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.registerA^=this.registerB,this.FZero=0===this.registerA,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.registerA^=this.registerC,this.FZero=0===this.registerA,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.registerA^=this.registerD,this.FZero=0===this.registerA,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.registerA^=this.registerE,this.FZero=0===this.registerA,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.registerA^=this.registersHL>>8,this.FZero=0===this.registerA,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.registerA^=255&this.registersHL,this.FZero=0===this.registerA,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.registerA^=this.memoryReader[this.registersHL].apply(this,[this.registersHL]),this.FZero=0===this.registerA,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.registerA=0,this.FZero=!0,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.registerA|=this.registerB,this.FZero=0===this.registerA,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){this.registerA|=this.registerC,this.FZero=0===this.registerA,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){this.registerA|=this.registerD,this.FZero=0===this.registerA,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){this.registerA|=this.registerE,this.FZero=0===this.registerA,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){this.registerA|=this.registersHL>>8,this.FZero=0===this.registerA,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){this.registerA|=255&this.registersHL,this.FZero=0===this.registerA,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){this.registerA|=this.memoryReader[this.registersHL].apply(this,[this.registersHL]),this.FZero=0===this.registerA,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){this.FZero=0===this.registerA,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){var e=this.registerA-this.registerB;this.FHalfCarry=(15&e)>(15&this.registerA),this.FCarry=e<0,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-this.registerC;this.FHalfCarry=(15&e)>(15&this.registerA),this.FCarry=e<0,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-this.registerD;this.FHalfCarry=(15&e)>(15&this.registerA),this.FCarry=e<0,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-this.registerE;this.FHalfCarry=(15&e)>(15&this.registerA),this.FCarry=e<0,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-(this.registersHL>>8);this.FHalfCarry=(15&e)>(15&this.registerA),this.FCarry=e<0,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-(255&this.registersHL);this.FHalfCarry=(15&e)>(15&this.registerA),this.FCarry=e<0,this.FZero=0===e,this.FSubtract=!0},function(){var e=this.registerA-this.memoryReader[this.registersHL].apply(this,[this.registersHL]);this.FHalfCarry=(15&e)>(15&this.registerA),this.FCarry=e<0,this.FZero=0===e,this.FSubtract=!0},function(){this.FHalfCarry=this.FCarry=!1,this.FZero=this.FSubtract=!0},function(){this.FZero||(this.programCounter=this.memoryRead(this.stackPointer+1&65535)<<8|this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.stackPointer=this.stackPointer+2&65535,this.CPUTicks+=12)},function(){this.registerC=this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.registerB=this.memoryRead(this.stackPointer+1&65535),this.stackPointer=this.stackPointer+2&65535},function(){this.FZero?this.programCounter=this.programCounter+2&65535:(this.programCounter=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.CPUTicks+=4)},function(){this.programCounter=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter])},function(){if(this.FZero)this.programCounter=this.programCounter+2&65535;else{var e=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+2&65535,this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=e,this.CPUTicks+=12}},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.registerB]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.registerC])},function(){var e=this.registerA+this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+1&65535,this.FHalfCarry=(15&e)<(15&this.registerA),this.FCarry=e>255,this.registerA=255&e,this.FZero=0===this.registerA,this.FSubtract=!1},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=0},function(){this.FZero&&(this.programCounter=this.memoryRead(this.stackPointer+1&65535)<<8|this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.stackPointer=this.stackPointer+2&65535,this.CPUTicks+=12)},function(){this.programCounter=this.memoryRead(this.stackPointer+1&65535)<<8|this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.stackPointer=this.stackPointer+2&65535},function(){this.FZero?(this.programCounter=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.CPUTicks+=4):this.programCounter=this.programCounter+2&65535},function(){var e=this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+1&65535,this.CPUTicks+=G[e],W[e].apply(this)},function(){if(this.FZero){var e=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+2&65535,this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=e,this.CPUTicks+=12}else this.programCounter=this.programCounter+2&65535},function(){var e=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+2&65535,this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=e},function(){var e=this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+1&65535;var t=this.registerA+e+(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)+(15&e)+(this.FCarry?1:0)>15,this.FCarry=t>255,this.registerA=255&t,this.FZero=0===this.registerA,this.FSubtract=!1},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=8},function(){this.FCarry||(this.programCounter=this.memoryRead(this.stackPointer+1&65535)<<8|this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.stackPointer=this.stackPointer+2&65535,this.CPUTicks+=12)},function(){this.registerE=this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.registerD=this.memoryRead(this.stackPointer+1&65535),this.stackPointer=this.stackPointer+2&65535},function(){this.FCarry?this.programCounter=this.programCounter+2&65535:(this.programCounter=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.CPUTicks+=4)},function(){console.log("Illegal op code 0xD3 called, pausing emulation.",2),pause()},function(){if(this.FCarry)this.programCounter=this.programCounter+2&65535;else{var e=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+2&65535,this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=e,this.CPUTicks+=12}},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.registerD]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.registerE])},function(){var e=this.registerA-this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+1&65535,this.FHalfCarry=(15&this.registerA)<(15&e),this.FCarry=e<0,this.registerA=255&e,this.FZero=0===e,this.FSubtract=!0},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=16},function(){this.FCarry&&(this.programCounter=this.memoryRead(this.stackPointer+1&65535)<<8|this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.stackPointer=this.stackPointer+2&65535,this.CPUTicks+=12)},function(){this.programCounter=this.memoryRead(this.stackPointer+1&65535)<<8|this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.stackPointer=this.stackPointer+2&65535,this.IRQEnableDelay=2===this.IRQEnableDelay||118===this.memoryReader[this.programCounter].apply(this,[this.programCounter])?1:2},function(){this.FCarry?(this.programCounter=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.CPUTicks+=4):this.programCounter=this.programCounter+2&65535},function(){console.log("Illegal op code 0xDB called, pausing emulation.",2),pause()},function(){if(this.FCarry){var e=this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+2&65535,this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=e,this.CPUTicks+=12}else this.programCounter=this.programCounter+2&65535},function(){console.log("Illegal op code 0xDD called, pausing emulation.",2),pause()},function(){var e=this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+1&65535;var t=this.registerA-e-(this.FCarry?1:0);this.FHalfCarry=(15&this.registerA)-(15&e)-(this.FCarry?1:0)<0,this.FCarry=t<0,this.registerA=255&t,this.FZero=0===this.registerA,this.FSubtract=!0},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=24},function(){this.memoryHighWrite(this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.registerA),this.programCounter=this.programCounter+1&65535},function(){this.registersHL=this.memoryRead(this.stackPointer+1&65535)<<8|this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]),this.stackPointer=this.stackPointer+2&65535},function(){this.memoryHighWriter[this.registerC].apply(this,[this.registerC,this.registerA])},function(){console.log("Illegal op code 0xE3 called, pausing emulation.",2),pause()},function(){console.log("Illegal op code 0xE4 called, pausing emulation.",2),pause()},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.registersHL>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.registersHL])},function(){this.registerA&=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535,this.FZero=0===this.registerA,this.FHalfCarry=!0,this.FSubtract=this.FCarry=!1},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=32},function(){var e=this.memoryReader[this.programCounter].apply(this,[this.programCounter])<<24>>24;this.programCounter=this.programCounter+1&65535;var t=this.stackPointer+e&65535;e=this.stackPointer^e^t,this.stackPointer=t,this.FCarry=256==(256&e),this.FHalfCarry=16==(16&e),this.FZero=this.FSubtract=!1},function(){this.programCounter=this.registersHL},function(){this.memoryWrite(this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.registerA),this.programCounter=this.programCounter+2&65535},function(){console.log("Illegal op code 0xEB called, pausing emulation.",2),pause()},function(){console.log("Illegal op code 0xEC called, pausing emulation.",2),pause()},function(){console.log("Illegal op code 0xED called, pausing emulation.",2),pause()},function(){this.registerA^=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535,this.FZero=0===this.registerA,this.FSubtract=this.FHalfCarry=this.FCarry=!1},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=40},function(){this.registerA=this.memoryHighRead(this.memoryReader[this.programCounter].apply(this,[this.programCounter])),this.programCounter=this.programCounter+1&65535},function(){var e=this.memoryReader[this.stackPointer].apply(this,[this.stackPointer]);this.FZero=e>127,this.FSubtract=64==(64&e),this.FHalfCarry=32==(32&e),this.FCarry=16==(16&e),this.registerA=this.memoryRead(this.stackPointer+1&65535),this.stackPointer=this.stackPointer+2&65535},function(){this.registerA=this.memoryHighReader[this.registerC].apply(this,[this.registerC])},function(){this.IME=!1,this.IRQEnableDelay=0},function(){console.log("Illegal op code 0xF4 called, pausing emulation.",2),pause()},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.registerA]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,(this.FZero?128:0)|(this.FSubtract?64:0)|(this.FHalfCarry?32:0)|(this.FCarry?16:0)])},function(){this.registerA|=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.FZero=0===this.registerA,this.programCounter=this.programCounter+1&65535,this.FSubtract=this.FCarry=this.FHalfCarry=!1},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=48},function(){var e=this.memoryReader[this.programCounter].apply(this,[this.programCounter])<<24>>24;this.programCounter=this.programCounter+1&65535,this.registersHL=this.stackPointer+e&65535,e=this.stackPointer^e^this.registersHL,this.FCarry=256==(256&e),this.FHalfCarry=16==(16&e),this.FZero=this.FSubtract=!1},function(){this.stackPointer=this.registersHL},function(){this.registerA=this.memoryRead(this.memoryRead(this.programCounter+1&65535)<<8|this.memoryReader[this.programCounter].apply(this,[this.programCounter])),this.programCounter=this.programCounter+2&65535},function(){this.IRQEnableDelay=2===this.IRQEnableDelay||118===this.memoryReader[this.programCounter].apply(this,[this.programCounter])?1:2},function(){console.log("Illegal op code 0xFC called, pausing emulation.",2),pause()},function(){console.log("Illegal op code 0xFD called, pausing emulation.",2),pause()},function(){var e=this.registerA-this.memoryReader[this.programCounter].apply(this,[this.programCounter]);this.programCounter=this.programCounter+1&65535,this.FHalfCarry=(15&e)>(15&this.registerA),this.FCarry=e<0,this.FZero=0===e,this.FSubtract=!0},function(){this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=56}],_=[15,0,124,255,0,0,0,248,255,255,255,255,255,255,255,1,128,191,243,255,191,255,63,0,255,191,127,255,159,255,191,255,255,0,0,191,119,243,241,255,255,255,255,255,255,255,255,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,145,128,0,0,0,0,0,252,0,0,0,0,255,126,255,254,255,255,255,255,255,255,62,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,192,255,193,0,254,255,255,255,248,255,0,0,0,143,0,0,255,255,255,255,255,255,255,255,206,237,102,102,204,13,0,11,3,115,0,131,0,12,0,13,0,8,17,31,136,137,0,14,220,204,110,230,221,221,217,153,187,187,103,99,110,14,236,204,221,220,153,159,187,185,51,62,69,236,82,250,8,183,7,93,1,253,192,255,8,252,0,229,11,248,194,206,244,249,15,127,69,109,61,254,70,151,51,94,8,239,241,255,134,131,36,116,18,252,0,159,180,183,6,213,208,122,0,158,4,95,65,47,29,119,54,117,129,170,112,58,152,209,113,2,77,1,193,255,13,0,211,5,249,0,11,0],q=[[!1,!1,!1,!1,!1,!1,!1,!0],[!0,!1,!1,!1,!1,!1,!1,!0],[!0,!1,!1,!1,!1,!0,!0,!0],[!1,!0,!0,!0,!0,!0,!0,!1]],I=[!0,1,!0,!1,!0,!0,0,19,0,216,333,65534,256,!1,!0,!1,0,0,[],[],0,[],!1,1,-53248,0,0,0,!1,!1,!1,!1,!1,0,!1,!1,!0,0,128,!1,56,60,0,1024,0,0,0,0,(new Date).getTime(),0,[],!0,!0,8192,512,0,0,!1,0,0,!0,0,!1,0,1,0,!1,0,!1,8192,512,0,0,!1,0,0,!0,0,!1,0,4,0,!0,null,8,0,0,0,0,!1,0,0,!0,32767,!1,8,8,!1,!1,!1,!1,!1,!1,!1,!1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,q[2],0,q[2],!1,!1,!1,!1,8192,0,2048,8,0,0,2048,0,144,0,0,!1,0,0,0,0,0,0,0,0,0,!1,!1,!1,!1,0,-61440,0,0,null,null,null,null,null,null,null,null,null,null,null,null,0,0,0,0,!1,0,0,!1,1,1],j=function(){function e(t){y(this,e),this.gameboy=t}return v(e,[{key:"init",value:function(){this.loadOld(I.slice(0))}},{key:"get",value:function(){var e=this.gameboy;return e.cartridgeSlot.cartridge?u(e.memory.buffer.slice(0),e.VRAM.buffer.slice(0)):null}},{key:"load",value:function(e){this.gameboy}},{key:"loadOld",value:function(e){var t=0,i=this.gameboy;i.inBootstrap=e[t++],i.registerA=e[t++],i.FZero=e[t++],i.FSubtract=e[t++],i.FHalfCarry=e[t++],i.FCarry=e[t++],i.registerB=e[t++],i.registerC=e[t++],i.registerD=e[t++],i.registerE=e[t++],i.registersHL=e[t++],i.stackPointer=e[t++],i.programCounter=e[t++],i.halt=e[t++],i.IME=e[t++],i.hdmaRunning=e[t++],i.CPUTicks=e[t++],i.doubleSpeedShifter=e[t++],i.memory=r(e[t++],"uint8"),i.VRAM=r(e[t++],"uint8"),i.currVRAMBank=e[t++],i.GBCMemory=r(e[t++],"uint8"),i.useGBCMode=e[t++],i.gbcRamBank=e[t++],i.gbcRamBankPosition=e[t++],i.ROMBank1Offset=e[t++],i.cartridgeSlot.cartridge?i.cartridgeSlot.cartridge.mbc.currentROMBank=e[t++]:t++,i.modeSTAT=e[t++],i.LYCMatchTriggerSTAT=e[t++],i.mode2TriggerSTAT=e[t++],i.mode1TriggerSTAT=e[t++],i.mode0TriggerSTAT=e[t++],i.LCDisOn=e[t++],i.gfxWindowCHRBankPosition=e[t++],i.gfxWindowDisplay=e[t++],i.gfxSpriteShow=e[t++],i.gfxSpriteNormalHeight=e[t++],i.gfxBackgroundCHRBankPosition=e[t++],i.gfxBackgroundBankOffset=e[t++],i.TIMAEnabled=e[t++],i.DIVTicks=e[t++],i.LCDTicks=e[t++],i.timerTicks=e[t++],i.TACClocker=e[t++],i.serialTimer=e[t++],i.serialShiftTimer=e[t++],i.serialShiftTimerAllocated=e[t++],i.IRQEnableDelay=e[t++],i.cartridgeSlot.cartridge&&i.cartridgeSlot.cartridge.hasRTC?i.cartridgeSlot.cartridge.mbc3.rtc.lastTime=e[t++]:t++,i.drewBlank=e[t++],i.frameBuffer=r(e[t++],"int32"),i.bgEnabled=e[t++],i.BGPriorityEnabled=e[t++],i.channel1FrequencyTracker=e[t++],i.channel1FrequencyCounter=e[t++],i.channel1totalLength=e[t++],i.channel1envelopeVolume=e[t++],i.channel1envelopeType=e[t++],i.channel1envelopeSweeps=e[t++],i.channel1envelopeSweepsLast=e[t++],i.channel1consecutive=e[t++],i.channel1frequency=e[t++],i.channel1SweepFault=e[t++],i.channel1ShadowFrequency=e[t++],i.channel1timeSweep=e[t++],i.channel1lastTimeSweep=e[t++],i.channel1Swept=e[t++],i.channel1frequencySweepDivider=e[t++],i.channel1decreaseSweep=e[t++],i.channel2FrequencyTracker=e[t++],i.channel2FrequencyCounter=e[t++],i.channel2totalLength=e[t++],i.channel2envelopeVolume=e[t++],i.channel2envelopeType=e[t++],i.channel2envelopeSweeps=e[t++],i.channel2envelopeSweepsLast=e[t++],i.channel2consecutive=e[t++],i.channel2frequency=e[t++],i.channel3canPlay=e[t++],i.channel3totalLength=e[t++],i.channel3patternType=e[t++],i.channel3frequency=e[t++],i.channel3consecutive=e[t++],i.channel3PCM=r(e[t++],"int8"),i.channel4FrequencyPeriod=e[t++],i.channel4lastSampleLookup=e[t++],i.channel4totalLength=e[t++],i.channel4envelopeVolume=e[t++],i.channel4currentVolume=e[t++],i.channel4envelopeType=e[t++],i.channel4envelopeSweeps=e[t++],i.channel4envelopeSweepsLast=e[t++],i.channel4consecutive=e[t++],i.channel4BitRange=e[t++],i.soundMasterEnabled=e[t++],i.VinLeftChannelMasterVolume=e[t++],i.VinRightChannelMasterVolume=e[t++],i.leftChannel1=e[t++],i.leftChannel2=e[t++],i.leftChannel3=e[t++],i.leftChannel4=e[t++],i.rightChannel1=e[t++],i.rightChannel2=e[t++],i.rightChannel3=e[t++],i.rightChannel4=e[t++],i.channel1currentSampleLeft=e[t++],i.channel1currentSampleRight=e[t++],i.channel2currentSampleLeft=e[t++],i.channel2currentSampleRight=e[t++],i.channel3currentSampleLeft=e[t++],i.channel3currentSampleRight=e[t++],i.channel4currentSampleLeft=e[t++],i.channel4currentSampleRight=e[t++],i.channel1currentSampleLeftSecondary=e[t++],i.channel1currentSampleRightSecondary=e[t++],i.channel2currentSampleLeftSecondary=e[t++],i.channel2currentSampleRightSecondary=e[t++],i.channel3currentSampleLeftSecondary=e[t++],i.channel3currentSampleRightSecondary=e[t++],i.channel4currentSampleLeftSecondary=e[t++],i.channel4currentSampleRightSecondary=e[t++],i.channel1currentSampleLeftTrimary=e[t++],i.channel1currentSampleRightTrimary=e[t++],i.channel2currentSampleLeftTrimary=e[t++],i.channel2currentSampleRightTrimary=e[t++],i.mixerOutputCache=e[t++],i.channel1DutyTracker=e[t++],i.channel1CachedDuty=e[t++],i.channel2DutyTracker=e[t++],i.channel2CachedDuty=e[t++],i.channel1Enabled=e[t++],i.channel2Enabled=e[t++],i.channel3Enabled=e[t++],i.channel4Enabled=e[t++],i.sequencerClocks=e[t++],i.sequencePosition=e[t++],i.channel3Counter=e[t++],i.channel4Counter=e[t++],i.cachedChannel3Sample=e[t++],i.cachedChannel4Sample=e[t++],i.channel3FrequencyPeriod=e[t++],i.channel3lastSampleLookup=e[t++],i.actualScanLine=e[t++],i.lastUnrenderedLine=e[t++],i.queuedScanLines=e[t++],i.cartridgeSlot.cartridge&&i.cartridgeSlot.cartridge.hasRTC?(i.cartridgeSlot.cartridge.mbc3.rtc.RTCisLatched=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.latchedSeconds=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.latchedMinutes=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.latchedHours=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.latchedLDays=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.latchedHDays=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.RTCSeconds=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.RTCMinutes=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.RTCHours=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.RTCDays=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.RTCDayOverFlow=e[t++],i.cartridgeSlot.cartridge.mbc3.rtc.RTCHALT=e[t++]):t+=12,i.usedBootROM=e[t++],i.skipPCIncrement=e[t++],i.STATTracker=e[t++],i.gbcRamBankPositionECHO=e[t++],i.windowY=e[t++],i.windowX=e[t++],i.gbcOBJRawPalette=r(e[t++],"uint8"),i.gbcBGRawPalette=r(e[t++],"uint8"),i.gbOBJPalette=r(e[t++],"int32"),i.gbBGPalette=r(e[t++],"int32"),i.gbcOBJPalette=r(e[t++],"int32"),i.gbcBGPalette=r(e[t++],"int32"),i.gbBGColorizedPalette=r(e[t++],"int32"),i.gbOBJColorizedPalette=r(e[t++],"int32"),i.cachedBGPaletteConversion=r(e[t++],"int32"),i.cachedOBJPaletteConversion=r(e[t++],"int32"),i.BGCHRBank1=r(e[t++],"uint8"),i.BGCHRBank2=r(e[t++],"uint8"),i.haltPostClocks=e[t++],i.interruptsRequested=e[t++],i.interruptsEnabled=e[t++],i.checkIRQMatching(),i.remainingClocks=e[t++],i.colorizedGBPalettes=e[t++],i.backgroundY=e[t++],i.backgroundX=e[t++],i.CPUStopped=e[t++],i.audioClocksUntilNextEvent=e[t++],i.audioClocksUntilNextEventCounter=e[t]}}]),e}(),U=function(){function e(t){y(this,e),this.initialValue=15,this.value=255,this.gameboy=t}return v(e,[{key:"down",value:function(e){this.value&=255^1<<e,!this.gameboy.cartridgeSlot.cartridge||this.gameboy.cartridgeSlot.cartridge.useGBCMode||this.gameboy.usedBootROM&&this.gameboy.usedGBCBootROM||(this.gameboy.interruptsRequested|=16,this.gameboy.remainingClocks=0,this.gameboy.checkIRQMatching()),this.writeToMemory()}},{key:"up",value:function(e){this.value|=1<<e,this.writeToMemory()}},{key:"writeToMemory",value:function(){this.gameboy.memory[65280]=(48&this.gameboy.memory[65280])+((0==(32&this.gameboy.memory[65280])?this.value>>4:15)&(0==(16&this.gameboy.memory[65280])?15&this.value:15)),this.gameboy.CPUStopped=!1}}]),e}(),l.prototype.loadState=function(e){this.stateManager.load(e),this.initializeReferencesFromSaveState(),this.memoryReadJumpCompile(),this.memoryWriteJumpCompile(),this.lcd.init(),this.initSound(),this.noiseSampleTable=32767===this.channel4BitRange?this.LSFR15Table:this.LSFR7Table,this.channel4VolumeShifter=32767===this.channel4BitRange?15:7},l.prototype.start=function(e){var t=this;this.init(),this.cartridgeSlot.insertCartridge(e),this.cartridgeSlot.readCartridge(),this.cartridgeSlot.cartridge.mbc.setupROM(),this.cartridgeSlot.cartridge&&this.cartridgeSlot.cartridge.mbc&&this.cartridgeSlot.cartridge.mbc.on("ramWrite",function(){t.events.emit("sramWrite")}),this.usedBootROM?(this.setupRAM(),this.initBootstrap()):(this.inBootstrap=!1,this.setupRAM(),this.initSkipBootstrap()),this.checkIRQMatching()},l.prototype.init=function(){this.stateManager.init(),this.initMemory(),this.lcd.init(),this.initSound()},l.prototype.setupRAM=function(){this.cartridgeSlot.cartridge.setupRAM(),this.cartridgeSlot.cartridge.useGBCMode&&(this.VRAM=B.getTypedArray(8192,0,"uint8"),this.GBCMemory=B.getTypedArray(28672,0,"uint8")),this.memoryReadJumpCompile(),this.memoryWriteJumpCompile(),this.initializeModeSpecificArrays()},l.prototype.initMemory=function(){this.memory=B.getTypedArray(65536,0,"uint8"),this.frameBuffer=B.getTypedArray(23040,16316664,"int32"),this.BGCHRBank1=B.getTypedArray(2048,0,"uint8"),this.channel3PCM=B.getTypedArray(32,0,"int8")},l.prototype.generateCacheArray=function(e){for(var t=[],r=0;r<e;)t[r++]=B.getTypedArray(64,0,"uint8");return t},l.prototype.initSkipBootstrap=function(){for(var e=255;e>=0;){if(e>=48&&e<64)this.memoryWrite(65280|e,_[e]);else switch(e){case 0:case 1:case 2:case 5:case 7:case 15:case 255:this.memoryWrite(65280|e,_[e]);break;default:this.memory[65280|e]=_[e]}--e}this.cartridgeSlot.cartridge.useGBCMode?(this.memory[65388]=254,this.memory[65396]=254):(this.memory[65352]=255,this.memory[65353]=255,this.memory[65388]=255,this.memory[65396]=255),console.log("Starting without the GBC boot ROM."),this.registerA=this.cartridgeSlot.cartridge.useGBCMode?17:1,this.registerB=0,this.registerC=19,this.registerD=0,this.registerE=216,this.FZero=!0,this.FSubtract=!1,this.FHalfCarry=!0,this.FCarry=!0,this.registersHL=333,this.LCDCONTROL=this.LINECONTROL,this.IME=!1,this.IRQLineMatched=0,this.interruptsRequested=225,this.interruptsEnabled=0,this.hdmaRunning=!1,this.CPUTicks=12,this.STATTracker=0,this.modeSTAT=1,this.spriteCount=252,this.LYCMatchTriggerSTAT=!1,this.mode2TriggerSTAT=!1,this.mode1TriggerSTAT=!1,this.mode0TriggerSTAT=!1,this.LCDisOn=!0,this.channel1FrequencyTracker=8192,this.channel1DutyTracker=0,this.channel1CachedDuty=q[2],this.channel1totalLength=0,this.channel1envelopeVolume=0,this.channel1envelopeType=!1,this.channel1envelopeSweeps=0,this.channel1envelopeSweepsLast=0,this.channel1consecutive=!0,this.channel1frequency=1985,this.channel1SweepFault=!0,this.channel1ShadowFrequency=1985,this.channel1timeSweep=1,this.channel1lastTimeSweep=0,this.channel1Swept=!1,this.channel1frequencySweepDivider=0,this.channel1decreaseSweep=!1,this.channel2FrequencyTracker=8192,this.channel2DutyTracker=0,this.channel2CachedDuty=q[2],this.channel2totalLength=0,this.channel2envelopeVolume=0,this.channel2envelopeType=!1,this.channel2envelopeSweeps=0,this.channel2envelopeSweepsLast=0,this.channel2consecutive=!0,this.channel2frequency=0,this.channel3canPlay=!1,this.channel3totalLength=0,this.channel3patternType=4,this.channel3frequency=0,this.channel3consecutive=!0,this.channel3Counter=1048,this.channel4FrequencyPeriod=8,this.channel4totalLength=0,this.channel4envelopeVolume=0,this.channel4currentVolume=0,this.channel4envelopeType=!1,this.channel4envelopeSweeps=0,this.channel4envelopeSweepsLast=0,this.channel4consecutive=!0,this.channel4BitRange=32767,this.channel4VolumeShifter=15,this.channel1FrequencyCounter=512,this.channel2FrequencyCounter=512,this.channel3Counter=2048,this.channel3FrequencyPeriod=2048,this.channel3lastSampleLookup=0,this.channel4lastSampleLookup=0,this.VinLeftChannelMasterVolume=8,this.VinRightChannelMasterVolume=8,this.soundMasterEnabled=!0,this.leftChannel1=!0,this.leftChannel2=!0,this.leftChannel3=!0,this.leftChannel4=!0,this.rightChannel1=!0,this.rightChannel2=!0,this.rightChannel3=!1,this.rightChannel4=!1,this.DIVTicks=27044,this.LCDTicks=160,this.timerTicks=0,this.TIMAEnabled=!1,this.TACClocker=1024,this.serialTimer=0,this.serialShiftTimer=0,this.serialShiftTimerAllocated=0,this.IRQEnableDelay=0,this.actualScanLine=144,this.lastUnrenderedLine=0,this.gfxWindowDisplay=!1,this.gfxSpriteShow=!1,this.gfxSpriteNormalHeight=!0,this.bgEnabled=!0,this.BGPriorityEnabled=!0,this.gfxWindowCHRBankPosition=0,this.gfxBackgroundCHRBankPosition=0,this.gfxBackgroundBankOffset=0,this.windowY=0,this.windowX=0,this.drewBlank=0,this.midScanlineOffset=-1,this.currentX=0},l.prototype.initBootstrap=function(){console.log("Starting selected boot ROM"),this.programCounter=0,this.stackPointer=0,this.IME=!1,this.LCDTicks=0,this.DIVTicks=0,this.registerA=0,this.registerB=0,this.registerC=0,this.registerD=0,this.registerE=0,this.FZero=this.FSubtract=this.FHalfCarry=this.FCarry=!1,this.registersHL=0,this.leftChannel1=!1,this.leftChannel2=!1,this.leftChannel3=!1,this.leftChannel4=!1,this.rightChannel1=!1,this.rightChannel2=!1,this.rightChannel3=!1,this.rightChannel4=!1,this.channel2frequency=this.channel1frequency=0,this.channel4consecutive=this.channel2consecutive=this.channel1consecutive=!1,this.VinLeftChannelMasterVolume=8,this.VinRightChannelMasterVolume=8,this.memory[65280]=this.joypad.initialValue},l.prototype.disableBootROM=function(){for(var e=0;e<256;)this.memory[e]=this.cartridgeSlot.cartridge.rom.getByte(e),++e;if(this.usedGBCBootROM){for(e=512;e<2304;++e)this.memory[e]=this.cartridgeSlot.cartridge.rom.getByte(e);this.cartridgeSlot.cartridge.useGBCMode?this.recompileBootIOWriteHandling():this.GBCtoGBModeAdjust()}else this.recompileBootIOWriteHandling()},l.prototype.initializeTiming=function(){this.clocksPerSecond=4194304*this.emulatorSpeed,this.baseCPUCyclesPerIteration=this.clocksPerSecond/1e3*S.runInterval,this.CPUCyclesTotalRoundoff=this.baseCPUCyclesPerIteration%4,this.CPUCyclesTotalBase=this.CPUCyclesTotal=this.baseCPUCyclesPerIteration-this.CPUCyclesTotalRoundoff|0,this.CPUCyclesTotalCurrent=0},l.prototype.setSpeed=function(e){this.emulatorSpeed=e,this.initializeTiming(),this.audioServer&&this.initSound()},l.prototype.initSound=function(){this.audioResamplerFirstPassFactor=Math.max(Math.min(Math.floor(this.clocksPerSecond/44100),Math.floor(136.53125)),1),this.downSampleInputDivider=1/(240*this.audioResamplerFirstPassFactor),S.soundOn?this.audioServer||(this.audioServer=new D(2,this.clocksPerSecond/this.audioResamplerFirstPassFactor,0,Math.max(this.baseCPUCyclesPerIteration*S.maxAudioBufferSpanAmountOverXInterpreterIterations/this.audioResamplerFirstPassFactor,8192)<<1,S.soundVolume),this.initAudioBuffer()):this.audioServer&&this.audioServer.changeVolume(0)},l.prototype.changeVolume=function(){this.audioServer&&this.audioServer.changeVolume(S.soundVolume)},l.prototype.initAudioBuffer=function(){this.audioIndex=0,this.audioDestinationPosition=0,this.downsampleInput=0,this.bufferContainAmount=Math.max(this.baseCPUCyclesPerIteration*S.minAudioBufferSpanAmountOverXInterpreterIterations/this.audioResamplerFirstPassFactor,4096)<<1,this.numSamplesTotal=this.baseCPUCyclesPerIteration/this.audioResamplerFirstPassFactor<<1,this.audioBuffer=B.getTypedArray(this.numSamplesTotal,0,"float32")},l.prototype.intializeWhiteNoise=function(){var e=1;this.LSFR15Table=B.getTypedArray(524288,0,"int8");for(var t=32767,r=16383,i=0;i<32768;++i)e=1-(1&t),this.LSFR15Table[32768|i]=e,this.LSFR15Table[65536|i]=2*e,this.LSFR15Table[98304|i]=3*e,this.LSFR15Table[131072|i]=4*e,this.LSFR15Table[163840|i]=5*e,this.LSFR15Table[196608|i]=6*e,this.LSFR15Table[229376|i]=7*e,this.LSFR15Table[262144|i]=8*e,this.LSFR15Table[294912|i]=9*e,this.LSFR15Table[327680|i]=10*e,this.LSFR15Table[360448|i]=11*e,this.LSFR15Table[393216|i]=12*e,this.LSFR15Table[425984|i]=13*e,this.LSFR15Table[458752|i]=14*e,this.LSFR15Table[491520|i]=15*e,t=(r=t>>1)|(1&(r^t))<<14;for(this.LSFR7Table=B.getTypedArray(2048,0,"int8"),t=127,i=0;i<128;++i)e=1-(1&t),this.LSFR7Table[128|i]=e,this.LSFR7Table[256|i]=2*e,this.LSFR7Table[384|i]=3*e,this.LSFR7Table[512|i]=4*e,this.LSFR7Table[640|i]=5*e,this.LSFR7Table[768|i]=6*e,this.LSFR7Table[896|i]=7*e,this.LSFR7Table[1024|i]=8*e,this.LSFR7Table[1152|i]=9*e,this.LSFR7Table[1280|i]=10*e,this.LSFR7Table[1408|i]=11*e,this.LSFR7Table[1536|i]=12*e,this.LSFR7Table[1664|i]=13*e,this.LSFR7Table[1792|i]=14*e,this.LSFR7Table[1920|i]=15*e,t=(r=t>>1)|(1&(r^t))<<6;this.noiseSampleTable=this.LSFR15Table},l.prototype.audioUnderrunAdjustment=function(){if(S.soundOn){var e=this.audioServer.remainingBuffer();"number"==typeof e&&((e=this.bufferContainAmount-Math.max(e,0))>0&&this.recalculateIterationClockLimitForAudio((e>>1)*this.audioResamplerFirstPassFactor))}},l.prototype.initializeAudioStartState=function(){this.channel1FrequencyTracker=8192,this.channel1DutyTracker=0,this.channel1CachedDuty=q[2],this.channel1totalLength=0,this.channel1envelopeVolume=0,this.channel1envelopeType=!1,this.channel1envelopeSweeps=0,this.channel1envelopeSweepsLast=0,this.channel1consecutive=!0,this.channel1frequency=0,this.channel1SweepFault=!1,this.channel1ShadowFrequency=0,this.channel1timeSweep=1,this.channel1lastTimeSweep=0,this.channel1Swept=!1,this.channel1frequencySweepDivider=0,this.channel1decreaseSweep=!1,this.channel2FrequencyTracker=8192,this.channel2DutyTracker=0,this.channel2CachedDuty=q[2],this.channel2totalLength=0,this.channel2envelopeVolume=0,this.channel2envelopeType=!1,this.channel2envelopeSweeps=0,this.channel2envelopeSweepsLast=0,this.channel2consecutive=!0,this.channel2frequency=0,this.channel3canPlay=!1,this.channel3totalLength=0,this.channel3patternType=4,this.channel3frequency=0,this.channel3consecutive=!0,this.channel3Counter=2048,this.channel4FrequencyPeriod=8,this.channel4totalLength=0,this.channel4envelopeVolume=0,this.channel4currentVolume=0,this.channel4envelopeType=!1,this.channel4envelopeSweeps=0,this.channel4envelopeSweepsLast=0,this.channel4consecutive=!0,this.channel4BitRange=32767,this.noiseSampleTable=this.LSFR15Table,this.channel4VolumeShifter=15,this.channel1FrequencyCounter=8192,this.channel2FrequencyCounter=8192,this.channel3Counter=2048,this.channel3FrequencyPeriod=2048,this.channel3lastSampleLookup=0,this.channel4lastSampleLookup=0,this.VinLeftChannelMasterVolume=8,this.VinRightChannelMasterVolume=8,this.mixerOutputCache=0,this.sequencerClocks=8192,this.sequencePosition=0,this.channel4FrequencyPeriod=8,this.channel4Counter=8,this.cachedChannel3Sample=0,this.cachedChannel4Sample=0,this.channel1Enabled=!1,this.channel2Enabled=!1,this.channel3Enabled=!1,this.channel4Enabled=!1,this.channel1canPlay=!1,this.channel2canPlay=!1,this.channel4canPlay=!1,this.audioClocksUntilNextEvent=1,this.audioClocksUntilNextEventCounter=1,this.channel1OutputLevelCache(),this.channel2OutputLevelCache(),this.channel3OutputLevelCache(),this.channel4OutputLevelCache(),this.noiseSampleTable=this.LSFR15Table},l.prototype.outputAudio=function(){this.audioBuffer[this.audioDestinationPosition++]=(this.downsampleInput>>>16)*this.downSampleInputDivider-1,this.audioBuffer[this.audioDestinationPosition++]=(65535&this.downsampleInput)*this.downSampleInputDivider-1,this.audioDestinationPosition===this.numSamplesTotal&&(this.audioServer.writeAudio(this.audioBuffer),this.audioDestinationPosition=0),this.downsampleInput=0},l.prototype.generateAudio=function(e){var t=0;if(this.soundMasterEnabled&&!this.CPUStopped)for(var r=0;e>0;){for(r=Math.min(this.audioClocksUntilNextEventCounter,this.sequencerClocks,e),this.audioClocksUntilNextEventCounter-=r,this.sequencerClocks-=r,e-=r;r>0;)r-=t=Math.min(r,this.audioResamplerFirstPassFactor-this.audioIndex),this.audioIndex+=t,this.downsampleInput+=this.mixerOutputCache*t,this.audioIndex===this.audioResamplerFirstPassFactor&&(this.audioIndex=0,this.outputAudio());0===this.sequencerClocks&&(this.audioComputeSequencer(),this.sequencerClocks=8192),0===this.audioClocksUntilNextEventCounter&&this.computeAudioChannels()}else for(;e>0;)e-=t=Math.min(e,this.audioResamplerFirstPassFactor-this.audioIndex),this.audioIndex+=t,this.audioIndex===this.audioResamplerFirstPassFactor&&(this.audioIndex=0,this.outputAudio())},l.prototype.generateAudioFake=function(e){if(this.soundMasterEnabled&&!this.CPUStopped)for(var t=0;e>0;)t=Math.min(this.audioClocksUntilNextEventCounter,this.sequencerClocks,e),this.audioClocksUntilNextEventCounter-=t,this.sequencerClocks-=t,e-=t,0===this.sequencerClocks&&(this.audioComputeSequencer(),this.sequencerClocks=8192),0===this.audioClocksUntilNextEventCounter&&this.computeAudioChannels()},l.prototype.audioJIT=function(){S.soundOn?this.generateAudio(this.audioTicks):this.generateAudioFake(this.audioTicks),this.audioTicks=0},l.prototype.audioComputeSequencer=function(){switch(this.sequencePosition++){case 0:this.clockAudioLength();break;case 2:this.clockAudioLength(),this.clockAudioSweep();break;case 4:this.clockAudioLength();break;case 6:this.clockAudioLength(),this.clockAudioSweep();break;case 7:this.clockAudioEnvelope(),this.sequencePosition=0}},l.prototype.clockAudioLength=function(){this.channel1totalLength>1?--this.channel1totalLength:1===this.channel1totalLength&&(this.channel1totalLength=0,this.channel1EnableCheck(),this.memory[65318]&=254),this.channel2totalLength>1?--this.channel2totalLength:1===this.channel2totalLength&&(this.channel2totalLength=0,this.channel2EnableCheck(),this.memory[65318]&=253),this.channel3totalLength>1?--this.channel3totalLength:1===this.channel3totalLength&&(this.channel3totalLength=0,this.channel3EnableCheck(),this.memory[65318]&=251),this.channel4totalLength>1?--this.channel4totalLength:1===this.channel4totalLength&&(this.channel4totalLength=0,this.channel4EnableCheck(),this.memory[65318]&=247)},l.prototype.clockAudioSweep=function(){!this.channel1SweepFault&&this.channel1timeSweep>0&&0==--this.channel1timeSweep&&this.runAudioSweep()},l.prototype.runAudioSweep=function(){this.channel1lastTimeSweep>0&&(this.channel1frequencySweepDivider>0?(this.channel1Swept=!0,this.channel1decreaseSweep?(this.channel1ShadowFrequency-=this.channel1ShadowFrequency>>this.channel1frequencySweepDivider,this.channel1frequency=2047&this.channel1ShadowFrequency,this.channel1FrequencyTracker=2048-this.channel1frequency<<2):(this.channel1ShadowFrequency+=this.channel1ShadowFrequency>>this.channel1frequencySweepDivider,this.channel1frequency=this.channel1ShadowFrequency,this.channel1ShadowFrequency<=2047?(this.channel1FrequencyTracker=2048-this.channel1frequency<<2,this.channel1ShadowFrequency+(this.channel1ShadowFrequency>>this.channel1frequencySweepDivider)>2047&&(this.channel1SweepFault=!0,this.channel1EnableCheck(),this.memory[65318]&=254)):(this.channel1frequency&=2047,this.channel1SweepFault=!0,this.channel1EnableCheck(),this.memory[65318]&=254)),this.channel1timeSweep=this.channel1lastTimeSweep):(this.channel1SweepFault=!0,this.channel1EnableCheck()))},l.prototype.channel1AudioSweepPerformDummy=function(){if(this.channel1frequencySweepDivider>0&&!this.channel1decreaseSweep){var e=this.channel1ShadowFrequency+(this.channel1ShadowFrequency>>this.channel1frequencySweepDivider);e<=2047?e+(e>>this.channel1frequencySweepDivider)>2047&&(this.channel1SweepFault=!0,this.channel1EnableCheck(),this.memory[65318]&=254):(this.channel1SweepFault=!0,this.channel1EnableCheck(),this.memory[65318]&=254)}},l.prototype.clockAudioEnvelope=function(){this.channel1envelopeSweepsLast>-1&&(this.channel1envelopeSweeps>0?--this.channel1envelopeSweeps:this.channel1envelopeType?this.channel1envelopeVolume<15?(++this.channel1envelopeVolume,this.channel1envelopeSweeps=this.channel1envelopeSweepsLast,this.channel1OutputLevelCache()):this.channel1envelopeSweepsLast=-1:this.channel1envelopeVolume>0?(--this.channel1envelopeVolume,this.channel1envelopeSweeps=this.channel1envelopeSweepsLast,this.channel1OutputLevelCache()):this.channel1envelopeSweepsLast=-1),this.channel2envelopeSweepsLast>-1&&(this.channel2envelopeSweeps>0?--this.channel2envelopeSweeps:this.channel2envelopeType?this.channel2envelopeVolume<15?(++this.channel2envelopeVolume,this.channel2envelopeSweeps=this.channel2envelopeSweepsLast,this.channel2OutputLevelCache()):this.channel2envelopeSweepsLast=-1:this.channel2envelopeVolume>0?(--this.channel2envelopeVolume,this.channel2envelopeSweeps=this.channel2envelopeSweepsLast,this.channel2OutputLevelCache()):this.channel2envelopeSweepsLast=-1),this.channel4envelopeSweepsLast>-1&&(this.channel4envelopeSweeps>0?--this.channel4envelopeSweeps:this.channel4envelopeType?this.channel4envelopeVolume<15?(this.channel4currentVolume=++this.channel4envelopeVolume<<this.channel4VolumeShifter,this.channel4envelopeSweeps=this.channel4envelopeSweepsLast,this.channel4UpdateCache()):this.channel4envelopeSweepsLast=-1:this.channel4envelopeVolume>0?(this.channel4currentVolume=--this.channel4envelopeVolume<<this.channel4VolumeShifter,this.channel4envelopeSweeps=this.channel4envelopeSweepsLast,this.channel4UpdateCache()):this.channel4envelopeSweepsLast=-1)},l.prototype.computeAudioChannels=function(){this.channel1FrequencyCounter-=this.audioClocksUntilNextEvent,this.channel2FrequencyCounter-=this.audioClocksUntilNextEvent,this.channel3Counter-=this.audioClocksUntilNextEvent,this.channel4Counter-=this.audioClocksUntilNextEvent,0===this.channel1FrequencyCounter&&(this.channel1FrequencyCounter=this.channel1FrequencyTracker,this.channel1DutyTracker=this.channel1DutyTracker+1&7,this.channel1OutputLevelTrimaryCache()),0===this.channel2FrequencyCounter&&(this.channel2FrequencyCounter=this.channel2FrequencyTracker,this.channel2DutyTracker=this.channel2DutyTracker+1&7,this.channel2OutputLevelTrimaryCache()),0===this.channel3Counter&&(this.channel3canPlay&&(this.channel3lastSampleLookup=this.channel3lastSampleLookup+1&31),this.channel3Counter=this.channel3FrequencyPeriod,this.channel3UpdateCache()),0===this.channel4Counter&&(this.channel4lastSampleLookup=this.channel4lastSampleLookup+1&this.channel4BitRange,this.channel4Counter=this.channel4FrequencyPeriod,this.channel4UpdateCache()),this.audioClocksUntilNextEventCounter=this.audioClocksUntilNextEvent=Math.min(this.channel1FrequencyCounter,this.channel2FrequencyCounter,this.channel3Counter,this.channel4Counter)},l.prototype.channel1EnableCheck=function(){this.channel1Enabled=(this.channel1consecutive||this.channel1totalLength>0)&&!this.channel1SweepFault&&this.channel1canPlay,this.channel1OutputLevelSecondaryCache()},l.prototype.channel1VolumeEnableCheck=function(){this.channel1canPlay=this.memory[65298]>7,this.channel1EnableCheck(),this.channel1OutputLevelSecondaryCache()},l.prototype.channel1OutputLevelCache=function(){this.channel1currentSampleLeft=this.leftChannel1?this.channel1envelopeVolume:0,this.channel1currentSampleRight=this.rightChannel1?this.channel1envelopeVolume:0,this.channel1OutputLevelSecondaryCache()},l.prototype.channel1OutputLevelSecondaryCache=function(){this.channel1Enabled?(this.channel1currentSampleLeftSecondary=this.channel1currentSampleLeft,this.channel1currentSampleRightSecondary=this.channel1currentSampleRight):(this.channel1currentSampleLeftSecondary=0,this.channel1currentSampleRightSecondary=0),this.channel1OutputLevelTrimaryCache()},l.prototype.channel1OutputLevelTrimaryCache=function(){this.channel1CachedDuty[this.channel1DutyTracker]&&S.enabledChannels[0]?(this.channel1currentSampleLeftTrimary=this.channel1currentSampleLeftSecondary,this.channel1currentSampleRightTrimary=this.channel1currentSampleRightSecondary):(this.channel1currentSampleLeftTrimary=0,this.channel1currentSampleRightTrimary=0),this.mixerOutputLevelCache()},l.prototype.channel2EnableCheck=function(){this.channel2Enabled=(this.channel2consecutive||this.channel2totalLength>0)&&this.channel2canPlay,this.channel2OutputLevelSecondaryCache()},l.prototype.channel2VolumeEnableCheck=function(){this.channel2canPlay=this.memory[65303]>7,this.channel2EnableCheck(),this.channel2OutputLevelSecondaryCache()},l.prototype.channel2OutputLevelCache=function(){this.channel2currentSampleLeft=this.leftChannel2?this.channel2envelopeVolume:0,this.channel2currentSampleRight=this.rightChannel2?this.channel2envelopeVolume:0,this.channel2OutputLevelSecondaryCache()},l.prototype.channel2OutputLevelSecondaryCache=function(){this.channel2Enabled?(this.channel2currentSampleLeftSecondary=this.channel2currentSampleLeft,this.channel2currentSampleRightSecondary=this.channel2currentSampleRight):(this.channel2currentSampleLeftSecondary=0,this.channel2currentSampleRightSecondary=0),this.channel2OutputLevelTrimaryCache()},l.prototype.channel2OutputLevelTrimaryCache=function(){this.channel2CachedDuty[this.channel2DutyTracker]&&S.enabledChannels[1]?(this.channel2currentSampleLeftTrimary=this.channel2currentSampleLeftSecondary,this.channel2currentSampleRightTrimary=this.channel2currentSampleRightSecondary):(this.channel2currentSampleLeftTrimary=0,this.channel2currentSampleRightTrimary=0),this.mixerOutputLevelCache()},l.prototype.channel3EnableCheck=function(){this.channel3Enabled=this.channel3consecutive||this.channel3totalLength>0,this.channel3OutputLevelSecondaryCache()},l.prototype.channel3OutputLevelCache=function(){this.channel3currentSampleLeft=this.leftChannel3?this.cachedChannel3Sample:0,this.channel3currentSampleRight=this.rightChannel3?this.cachedChannel3Sample:0,this.channel3OutputLevelSecondaryCache()},l.prototype.channel3OutputLevelSecondaryCache=function(){this.channel3Enabled&&S.enabledChannels[2]?(this.channel3currentSampleLeftSecondary=this.channel3currentSampleLeft,this.channel3currentSampleRightSecondary=this.channel3currentSampleRight):(this.channel3currentSampleLeftSecondary=0,this.channel3currentSampleRightSecondary=0),this.mixerOutputLevelCache()},l.prototype.channel4EnableCheck=function(){this.channel4Enabled=(this.channel4consecutive||this.channel4totalLength>0)&&this.channel4canPlay,this.channel4OutputLevelSecondaryCache()},l.prototype.channel4VolumeEnableCheck=function(){this.channel4canPlay=this.memory[65313]>7,this.channel4EnableCheck(),this.channel4OutputLevelSecondaryCache()},l.prototype.channel4OutputLevelCache=function(){this.channel4currentSampleLeft=this.leftChannel4?this.cachedChannel4Sample:0,this.channel4currentSampleRight=this.rightChannel4?this.cachedChannel4Sample:0,this.channel4OutputLevelSecondaryCache()},l.prototype.channel4OutputLevelSecondaryCache=function(){this.channel4Enabled&&S.enabledChannels[3]?(this.channel4currentSampleLeftSecondary=this.channel4currentSampleLeft,this.channel4currentSampleRightSecondary=this.channel4currentSampleRight):(this.channel4currentSampleLeftSecondary=0,this.channel4currentSampleRightSecondary=0),this.mixerOutputLevelCache()},l.prototype.mixerOutputLevelCache=function(){this.mixerOutputCache=(this.channel1currentSampleLeftTrimary+this.channel2currentSampleLeftTrimary+this.channel3currentSampleLeftSecondary+this.channel4currentSampleLeftSecondary)*this.VinLeftChannelMasterVolume<<16|(this.channel1currentSampleRightTrimary+this.channel2currentSampleRightTrimary+this.channel3currentSampleRightSecondary+this.channel4currentSampleRightSecondary)*this.VinRightChannelMasterVolume},l.prototype.channel3UpdateCache=function(){this.cachedChannel3Sample=this.channel3PCM[this.channel3lastSampleLookup]>>this.channel3patternType,this.channel3OutputLevelCache()},l.prototype.channel3WriteRAM=function(e,t){this.channel3canPlay&&this.audioJIT(),this.memory[65328|e]=t,e<<=1,this.channel3PCM[e]=t>>4,this.channel3PCM[1|e]=15&t},l.prototype.channel4UpdateCache=function(){this.cachedChannel4Sample=this.noiseSampleTable[this.channel4currentVolume|this.channel4lastSampleLookup],this.channel4OutputLevelCache()},l.prototype.run=function(){0==(2&this.stopEmulator)&&(1==(1&this.stopEmulator)?this.CPUStopped?(this.audioUnderrunAdjustment(),this.audioTicks+=this.CPUCyclesTotal,this.audioJIT(),this.stopEmulator|=1):(this.stopEmulator=0,this.audioUnderrunAdjustment(),this.cartridgeSlot.cartridge.hasRTC&&this.cartridgeSlot.cartridge.mbc.rtc.updateClock(),this.halt?(this.CPUTicks=0,this.calculateHALTPeriod(),this.halt?(this.updateCore(),this.iterationEndRoutine()):this.executeIteration()):this.executeIteration(),this.lcd.requestDraw()):(console.log("Iterator restarted a faulted core.",2),pause()))},l.prototype.executeIteration=function(){for(var e=0,t=0;0===this.stopEmulator;){switch(this.IRQEnableDelay){case 1:this.IME=!0,this.checkIRQMatching();case 2:--this.IRQEnableDelay}if(this.IRQLineMatched>0&&this.launchIRQ(),e=this.memoryReader[this.programCounter].apply(this,[this.programCounter]),this.programCounter=this.programCounter+1&65535,this.skipPCIncrement&&(this.programCounter=this.programCounter-1&65535,this.skipPCIncrement=!1),this.CPUTicks=R[e],N[e].apply(this),this.LCDTicks+=this.CPUTicks>>this.doubleSpeedShifter,this.LCDCONTROL[this.actualScanLine](this),t=this.CPUTicks>>this.doubleSpeedShifter,this.audioTicks+=t,this.emulatorTicks+=t,this.DIVTicks+=this.CPUTicks,this.TIMAEnabled)for(this.timerTicks+=this.CPUTicks;this.timerTicks>=this.TACClocker;)this.timerTicks-=this.TACClocker,256==++this.memory[65285]&&(this.memory[65285]=this.memory[65286],this.interruptsRequested|=4,this.checkIRQMatching());this.serialTimer>0&&(this.serialTimer-=this.CPUTicks,this.serialTimer<=0&&(this.interruptsRequested|=8,this.checkIRQMatching()),this.serialShiftTimer-=this.CPUTicks,this.serialShiftTimer<=0&&(this.serialShiftTimer=this.serialShiftTimerAllocated,this.memory[65281]=this.memory[65281]<<1&254|1)),this.emulatorTicks>=this.CPUCyclesTotal&&this.iterationEndRoutine()}},l.prototype.iterationEndRoutine=function(){0==(1&this.stopEmulator)&&(this.audioJIT(),this.memory[65284]=this.memory[65284]+(this.DIVTicks>>8)&255,this.DIVTicks&=255,this.stopEmulator|=1,this.emulatorTicks-=this.CPUCyclesTotal,this.CPUCyclesTotalCurrent+=this.CPUCyclesTotalRoundoff,this.recalculateIterationClockLimit())},l.prototype.handleSTOP=function(){this.CPUStopped=!0,this.iterationEndRoutine(),this.emulatorTicks<0&&(this.audioTicks-=this.emulatorTicks,this.audioJIT())},l.prototype.recalculateIterationClockLimit=function(){var e=this.CPUCyclesTotalCurrent%4;this.CPUCyclesTotal=this.CPUCyclesTotalBase+this.CPUCyclesTotalCurrent-e,this.CPUCyclesTotalCurrent=e},l.prototype.recalculateIterationClockLimitForAudio=function(e){this.CPUCyclesTotal+=Math.min(e>>2<<2,this.CPUCyclesTotalBase<<1)},l.prototype.scanLineMode2=function(){1!=this.STATTracker&&(this.mode2TriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching()),this.STATTracker=1,this.modeSTAT=2)},l.prototype.scanLineMode3=function(){3!=this.modeSTAT&&(0===this.STATTracker&&this.mode2TriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching()),this.STATTracker=1,this.modeSTAT=3)},l.prototype.scanLineMode0=function(){0!=this.modeSTAT&&(2!=this.STATTracker&&(0===this.STATTracker&&(this.mode2TriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching()),this.modeSTAT=3),this.incrementScanLineQueue(),this.updateSpriteCount(this.actualScanLine),this.STATTracker=2),this.LCDTicks>=this.spriteCount&&(this.hdmaRunning&&this.executeHDMA(),this.mode0TriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching()),this.STATTracker=3,this.modeSTAT=0))},l.prototype.clocksUntilLYCMatch=function(){return 0!=this.memory[65349]?this.memory[65349]>this.actualScanLine?456*(this.memory[65349]-this.actualScanLine):456*(154-this.actualScanLine+this.memory[65349]):456*(153===this.actualScanLine&&0===this.memory[65348]?154:153-this.actualScanLine)+8},l.prototype.clocksUntilMode0=function(){switch(this.modeSTAT){case 0:return 143===this.actualScanLine?(this.updateSpriteCount(0),this.spriteCount+5016):(this.updateSpriteCount(this.actualScanLine+1),this.spriteCount+456);case 2:case 3:return this.updateSpriteCount(this.actualScanLine),this.spriteCount;case 1:return this.updateSpriteCount(0),this.spriteCount+456*(154-this.actualScanLine)}},l.prototype.updateSpriteCount=function(e){if(this.spriteCount=252,this.cartridgeSlot.cartridge.useGBCMode&&this.gfxSpriteShow)for(var t=e+16,r=0,i=this.gfxSpriteNormalHeight?8:16,n=65024;n<65184&&this.spriteCount<312;n+=4)(r=t-this.memory[n])>-1&&r<i&&(this.spriteCount+=6)},l.prototype.matchLYC=function(){this.memory[65348]===this.memory[65349]?(this.memory[65345]|=4,this.LYCMatchTriggerSTAT&&(this.interruptsRequested|=2,this.checkIRQMatching())):this.memory[65345]&=123},l.prototype.updateCore=function(){this.LCDTicks+=this.CPUTicks>>this.doubleSpeedShifter,this.LCDCONTROL[this.actualScanLine](this);var e=this.CPUTicks>>this.doubleSpeedShifter;if(this.audioTicks+=e,this.emulatorTicks+=e,this.DIVTicks+=this.CPUTicks,this.TIMAEnabled)for(this.timerTicks+=this.CPUTicks;this.timerTicks>=this.TACClocker;)this.timerTicks-=this.TACClocker,256==++this.memory[65285]&&(this.memory[65285]=this.memory[65286],this.interruptsRequested|=4,this.checkIRQMatching());this.serialTimer>0&&(this.serialTimer-=this.CPUTicks,this.serialTimer<=0&&(this.interruptsRequested|=8,this.checkIRQMatching()),this.serialShiftTimer-=this.CPUTicks,this.serialShiftTimer<=0&&(this.serialShiftTimer=this.serialShiftTimerAllocated,this.memory[65281]=this.memory[65281]<<1&254|1))},l.prototype.updateCoreFull=function(){this.updateCore(),this.emulatorTicks>=this.CPUCyclesTotal&&this.iterationEndRoutine()},l.prototype.initializeLCDController=function(){for(var e=this,t=0;t<154;)t<143?this.LINECONTROL[t]=function(){e.LCDTicks<80?e.scanLineMode2():e.LCDTicks<252?e.scanLineMode3():e.LCDTicks<456?e.scanLineMode0():(e.LCDTicks-=456,3!=e.STATTracker&&(2!=e.STATTracker&&(0===e.STATTracker&&e.mode2TriggerSTAT&&(e.interruptsRequested|=2),e.incrementScanLineQueue()),e.hdmaRunning&&e.executeHDMA(),e.mode0TriggerSTAT&&(e.interruptsRequested|=2)),e.actualScanLine=++e.memory[65348],e.actualScanLine===e.memory[65349]?(e.memory[65345]|=4,e.LYCMatchTriggerSTAT&&(e.interruptsRequested|=2)):e.memory[65345]&=123,e.checkIRQMatching(),e.STATTracker=0,e.modeSTAT=2,e.LINECONTROL[e.actualScanLine].apply(e))}:143===t?this.LINECONTROL[143]=function(){e.LCDTicks<80?e.scanLineMode2():e.LCDTicks<252?e.scanLineMode3():e.LCDTicks<456?e.scanLineMode0():(e.LCDTicks-=456,3!=e.STATTracker&&(2!=e.STATTracker&&(0===e.STATTracker&&e.mode2TriggerSTAT&&(e.interruptsRequested|=2),e.incrementScanLineQueue()),e.hdmaRunning&&e.executeHDMA(),e.mode0TriggerSTAT&&(e.interruptsRequested|=2)),e.actualScanLine=e.memory[65348]=144,144===e.memory[65349]?(e.memory[65345]|=4,e.LYCMatchTriggerSTAT&&(e.interruptsRequested|=2)):e.memory[65345]&=123,e.STATTracker=0,e.modeSTAT=1,e.interruptsRequested|=e.mode1TriggerSTAT?3:1,e.checkIRQMatching(),0===e.drewBlank?(e.totalLinesPassed<144||144===e.totalLinesPassed&&e.midScanlineOffset>-1)&&(e.graphicsJITVBlank(),e.lcd.prepareFrame()):--e.drewBlank,e.LINECONTROL[144].apply(e))}:t<153?this.LINECONTROL[t]=function(){e.LCDTicks>=456&&(e.LCDTicks-=456,e.actualScanLine=++e.memory[65348],e.actualScanLine===e.memory[65349]?(e.memory[65345]|=4,e.LYCMatchTriggerSTAT&&(e.interruptsRequested|=2,e.checkIRQMatching())):e.memory[65345]&=123,e.LINECONTROL[e.actualScanLine].apply(e))}:this.LINECONTROL[153]=function(){e.LCDTicks>=8&&(4!=e.STATTracker&&153===e.memory[65348]&&(e.memory[65348]=0,0===e.memory[65349]?(e.memory[65345]|=4,e.LYCMatchTriggerSTAT&&(e.interruptsRequested|=2,e.checkIRQMatching())):e.memory[65345]&=123,e.STATTracker=4),e.LCDTicks>=456&&(e.LCDTicks-=456,e.STATTracker=e.actualScanLine=0,e.LINECONTROL[0].apply(e)))},++t},l.prototype.executeHDMA=function(){this.DMAWrite(1),this.halt?this.LCDTicks-this.spriteCount<(4>>this.doubleSpeedShifter|32)&&(this.CPUTicks=4+(32+this.spriteCount<<this.doubleSpeedShifter),this.LCDTicks=this.spriteCount+(4>>this.doubleSpeedShifter|32)):this.LCDTicks+=4>>this.doubleSpeedShifter|32,0===this.memory[65365]?(this.hdmaRunning=!1,this.memory[65365]=255):--this.memory[65365]},l.prototype.updateClock=function(){return this.cartridgeSlot.cartridge.updateClock()},l.prototype.renderScanLine=function(e){if(this.pixelStart=160*e,this.bgEnabled)this.pixelEnd=160,this.BGLayerRender(e),this.WindowLayerRender(e);else for(var t=160*(e+1),r=this.cartridgeSlot.cartridge.useGBCMode||this.colorizedGBPalettes?16316664:15728606,i=160*e+this.currentX;i<t;i++)this.frameBuffer[i]=r;this.SpriteLayerRender(e),this.currentX=0,this.midScanlineOffset=-1},l.prototype.renderMidScanLine=function(){if(this.actualScanLine<144&&3===this.modeSTAT&&(-1===this.midScanlineOffset&&(this.midScanlineOffset=7&this.backgroundX),this.LCDTicks>=82)){if(this.pixelEnd=this.LCDTicks-74,this.pixelEnd=Math.min(this.pixelEnd-this.midScanlineOffset-this.pixelEnd%8,160),this.bgEnabled)this.pixelStart=160*this.lastUnrenderedLine,this.BGLayerRender(this.lastUnrenderedLine),this.WindowLayerRender(this.lastUnrenderedLine);else for(var e=160*this.lastUnrenderedLine+this.pixelEnd,t=this.cartridgeSlot.cartridge.useGBCMode||this.colorizedGBPalettes?16316664:15728606,r=160*this.lastUnrenderedLine+this.currentX;r<e;r++)this.frameBuffer[r]=t;this.currentX=this.pixelEnd}},l.prototype.initializeModeSpecificArrays=function(){this.LCDCONTROL=this.LCDisOn?this.LINECONTROL:this.DISPLAYOFFCONTROL,this.cartridgeSlot.cartridge.useGBCMode?(this.gbcOBJRawPalette=B.getTypedArray(64,0,"uint8"),this.gbcBGRawPalette=B.getTypedArray(64,0,"uint8"),this.gbcOBJPalette=B.getTypedArray(32,16777216,"int32"),this.gbcBGPalette=B.getTypedArray(64,0,"int32"),this.BGCHRBank2=B.getTypedArray(2048,0,"uint8"),this.BGCHRCurrentBank=this.currVRAMBank>0?this.BGCHRBank2:this.BGCHRBank1,this.tileCache=this.generateCacheArray(3968)):(this.gbOBJPalette=B.getTypedArray(8,0,"int32"),this.gbBGPalette=B.getTypedArray(4,0,"int32"),this.BGPalette=this.gbBGPalette,this.OBJPalette=this.gbOBJPalette,this.tileCache=this.generateCacheArray(1792),this.sortBuffer=B.getTypedArray(256,0,"uint8"),this.OAMAddressCache=B.getTypedArray(10,0,"int32")),this.renderPathBuild()},l.prototype.GBCtoGBModeAdjust=function(){console.log("Stepping down from GBC mode.",0),this.VRAM=this.GBCMemory=this.BGCHRCurrentBank=this.BGCHRBank2=null,this.tileCache.length=1792,S.colorizeGBMode?(this.gbBGColorizedPalette=B.getTypedArray(4,0,"int32"),this.gbOBJColorizedPalette=B.getTypedArray(8,0,"int32"),this.cachedBGPaletteConversion=B.getTypedArray(4,0,"int32"),this.cachedOBJPaletteConversion=B.getTypedArray(8,0,"int32"),this.BGPalette=this.gbBGColorizedPalette,this.OBJPalette=this.gbOBJColorizedPalette,this.gbOBJPalette=this.gbBGPalette=null,this.getGBCColor()):(this.gbOBJPalette=B.getTypedArray(8,0,"int32"),this.gbBGPalette=B.getTypedArray(4,0,"int32"),this.BGPalette=this.gbBGPalette,this.OBJPalette=this.gbOBJPalette),this.sortBuffer=B.getTypedArray(256,0,"uint8"),this.OAMAddressCache=B.getTypedArray(10,0,"int32"),this.renderPathBuild(),this.memoryReadJumpCompile(),this.memoryWriteJumpCompile()},l.prototype.renderPathBuild=function(){this.cartridgeSlot.cartridge.useGBCMode?(this.priorityFlaggingPathRebuild(),this.SpriteLayerRender=this.SpriteGBCLayerRender):(this.BGLayerRender=this.BGGBLayerRender,this.WindowLayerRender=this.WindowGBLayerRender,this.SpriteLayerRender=this.SpriteGBLayerRender)},l.prototype.priorityFlaggingPathRebuild=function(){this.BGPriorityEnabled?(this.BGLayerRender=this.BGGBCLayerRender,this.WindowLayerRender=this.WindowGBCLayerRender):(this.BGLayerRender=this.BGGBCLayerRenderNoPriorityFlagging,this.WindowLayerRender=this.WindowGBCLayerRenderNoPriorityFlagging)},l.prototype.initializeReferencesFromSaveState=function(){this.LCDCONTROL=this.LCDisOn?this.LINECONTROL:this.DISPLAYOFFCONTROL;var e=0;if(this.cartridgeSlot.cartridge.useGBCMode)for(this.BGCHRCurrentBank=this.currVRAMBank>0?this.BGCHRBank2:this.BGCHRBank1,this.tileCache=this.generateCacheArray(3968);e<6144;e+=16)this.generateGBCTileBank1(e),this.generateGBCTileBank2(e);else{for(this.colorizedGBPalettes?(this.BGPalette=this.gbBGColorizedPalette,this.OBJPalette=this.gbOBJColorizedPalette,this.updateGBBGPalette=this.updateGBColorizedBGPalette,this.updateGBOBJPalette=this.updateGBColorizedOBJPalette):(this.BGPalette=this.gbBGPalette,this.OBJPalette=this.gbOBJPalette),this.tileCache=this.generateCacheArray(1792),e=32768;e<36864;e+=2)this.generateGBOAMTileLine(e);for(e=36864;e<38912;e+=2)this.generateGBTileLine(e);this.sortBuffer=B.getTypedArray(256,0,"uint8"),this.OAMAddressCache=B.getTypedArray(10,0,"int32")}this.renderPathBuild()},l.prototype.RGBTint=function(e){var t=31&e,r=e>>5&31,i=e>>10&31;return 13*t+2*r+i>>1<<16|3*r+i<<9|3*t+2*r+11*i>>1},l.prototype.getGBCColor=function(){for(var e=0;e<4;e++){var t=e<<1;this.cachedBGPaletteConversion[e]=this.RGBTint(this.gbcBGRawPalette[1|t]<<8|this.gbcBGRawPalette[t]),this.cachedOBJPaletteConversion[e]=this.RGBTint(this.gbcOBJRawPalette[1|t]<<8|this.gbcOBJRawPalette[t])}for(e=4;e<8;e++)t=e<<1,this.cachedOBJPaletteConversion[e]=this.RGBTint(this.gbcOBJRawPalette[1|t]<<8|this.gbcOBJRawPalette[t]);this.updateGBBGPalette=this.updateGBColorizedBGPalette,this.updateGBOBJPalette=this.updateGBColorizedOBJPalette,this.updateGBBGPalette(this.memory[65351]),this.updateGBOBJPalette(0,this.memory[65352]),this.updateGBOBJPalette(1,this.memory[65353]),this.colorizedGBPalettes=!0},l.prototype.updateGBRegularBGPalette=function(e){this.gbBGPalette[0]=33554432|this.colors[3&e],this.gbBGPalette[1]=this.colors[e>>2&3],this.gbBGPalette[2]=this.colors[e>>4&3],this.gbBGPalette[3]=this.colors[e>>6]},l.prototype.updateGBColorizedBGPalette=function(e){this.gbBGColorizedPalette[0]=33554432|this.cachedBGPaletteConversion[3&e],this.gbBGColorizedPalette[1]=this.cachedBGPaletteConversion[e>>2&3],this.gbBGColorizedPalette[2]=this.cachedBGPaletteConversion[e>>4&3],this.gbBGColorizedPalette[3]=this.cachedBGPaletteConversion[e>>6]},l.prototype.updateGBRegularOBJPalette=function(e,t){this.gbOBJPalette[1|e]=this.colors[t>>2&3],this.gbOBJPalette[2|e]=this.colors[t>>4&3],this.gbOBJPalette[3|e]=this.colors[t>>6]},l.prototype.updateGBColorizedOBJPalette=function(e,t){this.gbOBJColorizedPalette[1|e]=this.cachedOBJPaletteConversion[e|t>>2&3],this.gbOBJColorizedPalette[2|e]=this.cachedOBJPaletteConversion[e|t>>4&3],this.gbOBJColorizedPalette[3|e]=this.cachedOBJPaletteConversion[e|t>>6]},l.prototype.updateGBCBGPalette=function(e,t){this.gbcBGRawPalette[e]!=t&&(this.midScanLineJIT(),this.gbcBGRawPalette[e]=t,0==(6&e)?(t=33554432|this.RGBTint(this.gbcBGRawPalette[1|e]<<8|this.gbcBGRawPalette[62&e]),e>>=1,this.gbcBGPalette[e]=t,this.gbcBGPalette[32|e]=16777216|t):(t=this.RGBTint(this.gbcBGRawPalette[1|e]<<8|this.gbcBGRawPalette[62&e]),e>>=1,this.gbcBGPalette[e]=t,this.gbcBGPalette[32|e]=16777216|t))},l.prototype.updateGBCOBJPalette=function(e,t){this.gbcOBJRawPalette[e]!=t&&(this.gbcOBJRawPalette[e]=t,(6&e)>0&&(this.midScanLineJIT(),this.gbcOBJPalette[e>>1]=16777216|this.RGBTint(this.gbcOBJRawPalette[1|e]<<8|this.gbcOBJRawPalette[62&e])))},l.prototype.BGGBLayerRender=function(e){var t=this.backgroundY+e&255,r=(7&t)<<3,i=this.gfxBackgroundCHRBankPosition|(248&t)<<2,n=this.backgroundX+this.currentX&255,s=this.pixelStart+this.currentX,o=this.pixelStart+(this.gfxWindowDisplay&&e-this.windowY>=0?Math.min(Math.max(this.windowX,0)+this.currentX,this.pixelEnd):this.pixelEnd),a=i+(n>>3),h=this.BGCHRBank1[a];h<this.gfxBackgroundBankOffset&&(h|=256);for(var c=this.tileCache[h],u=7&n;u<8&&s<o&&n<256;++n)this.frameBuffer[s++]=this.BGPalette[c[r|u++]];var l=Math.min(o-s,256-n)>>3;for(n+=l<<3,l+=a;a<l;)(h=this.BGCHRBank1[++a])<this.gfxBackgroundBankOffset&&(h|=256),c=this.tileCache[h],u=r,this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u]];if(s<o){if(n<256)for((h=this.BGCHRBank1[++a])<this.gfxBackgroundBankOffset&&(h|=256),c=this.tileCache[h],u=r-1;s<o&&n<256;++n)this.frameBuffer[s++]=this.BGPalette[c[++u]];for(l=(o-s>>3)+i;i<l;)(h=this.BGCHRBank1[i++])<this.gfxBackgroundBankOffset&&(h|=256),c=this.tileCache[h],u=r,this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u++]],this.frameBuffer[s++]=this.BGPalette[c[u]];if(s<o)switch(h=this.BGCHRBank1[i],h<this.gfxBackgroundBankOffset&&(h|=256),c=this.tileCache[h],o-s){case 7:this.frameBuffer[s+6]=this.BGPalette[c[6|r]];case 6:this.frameBuffer[s+5]=this.BGPalette[c[5|r]];case 5:this.frameBuffer[s+4]=this.BGPalette[c[4|r]];case 4:this.frameBuffer[s+3]=this.BGPalette[c[3|r]];case 3:this.frameBuffer[s+2]=this.BGPalette[c[2|r]];case 2:this.frameBuffer[s+1]=this.BGPalette[c[1|r]];case 1:this.frameBuffer[s]=this.BGPalette[c[r]]}}},l.prototype.BGGBCLayerRender=function(e){var t=this.backgroundY+e&255,r=(7&t)<<3,i=this.gfxBackgroundCHRBankPosition|(248&t)<<2,n=this.backgroundX+this.currentX&255,s=this.pixelStart+this.currentX,o=this.pixelStart+(this.gfxWindowDisplay&&e-this.windowY>=0?Math.min(Math.max(this.windowX,0)+this.currentX,this.pixelEnd):this.pixelEnd),a=i+(n>>3),h=this.BGCHRBank1[a];h<this.gfxBackgroundBankOffset&&(h|=256);for(var c=this.BGCHRBank2[a],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2|(128&c)>>2,f=7&n;f<8&&s<o&&n<256;++n)this.frameBuffer[s++]=this.gbcBGPalette[l|u[r|f++]];var p=Math.min(o-s,256-n)>>3;for(n+=p<<3,p+=a;a<p;)(h=this.BGCHRBank1[++a])<this.gfxBackgroundBankOffset&&(h|=256),c=this.BGCHRBank2[a],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2|(128&c)>>2,f=r,this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f]];if(s<o){if(n<256)for((h=this.BGCHRBank1[++a])<this.gfxBackgroundBankOffset&&(h|=256),c=this.BGCHRBank2[a],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2|(128&c)>>2,f=r-1;s<o&&n<256;++n)this.frameBuffer[s++]=this.gbcBGPalette[l|u[++f]];for(p=(o-s>>3)+i;i<p;)(h=this.BGCHRBank1[i])<this.gfxBackgroundBankOffset&&(h|=256),c=this.BGCHRBank2[i++],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2|(128&c)>>2,f=r,this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f]];if(s<o)switch(h=this.BGCHRBank1[i],h<this.gfxBackgroundBankOffset&&(h|=256),c=this.BGCHRBank2[i],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2|(128&c)>>2,o-s){case 7:this.frameBuffer[s+6]=this.gbcBGPalette[l|u[6|r]];case 6:this.frameBuffer[s+5]=this.gbcBGPalette[l|u[5|r]];case 5:this.frameBuffer[s+4]=this.gbcBGPalette[l|u[4|r]];case 4:this.frameBuffer[s+3]=this.gbcBGPalette[l|u[3|r]];case 3:this.frameBuffer[s+2]=this.gbcBGPalette[l|u[2|r]];case 2:this.frameBuffer[s+1]=this.gbcBGPalette[l|u[1|r]];case 1:this.frameBuffer[s]=this.gbcBGPalette[l|u[r]]}}},l.prototype.BGGBCLayerRenderNoPriorityFlagging=function(e){var t=this.backgroundY+e&255,r=(7&t)<<3,i=this.gfxBackgroundCHRBankPosition|(248&t)<<2,n=this.backgroundX+this.currentX&255,s=this.pixelStart+this.currentX,o=this.pixelStart+(this.gfxWindowDisplay&&e-this.windowY>=0?Math.min(Math.max(this.windowX,0)+this.currentX,this.pixelEnd):this.pixelEnd),a=i+(n>>3),h=this.BGCHRBank1[a];h<this.gfxBackgroundBankOffset&&(h|=256);for(var c=this.BGCHRBank2[a],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2,f=7&n;f<8&&s<o&&n<256;++n)this.frameBuffer[s++]=this.gbcBGPalette[l|u[r|f++]];var p=Math.min(o-s,256-n)>>3;for(n+=p<<3,p+=a;a<p;)(h=this.BGCHRBank1[++a])<this.gfxBackgroundBankOffset&&(h|=256),c=this.BGCHRBank2[a],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2,f=r,this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f]];if(s<o){if(n<256)for((h=this.BGCHRBank1[++a])<this.gfxBackgroundBankOffset&&(h|=256),c=this.BGCHRBank2[a],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2,f=r-1;s<o&&n<256;++n)this.frameBuffer[s++]=this.gbcBGPalette[l|u[++f]];for(p=(o-s>>3)+i;i<p;)(h=this.BGCHRBank1[i])<this.gfxBackgroundBankOffset&&(h|=256),c=this.BGCHRBank2[i++],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2,f=r,this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f++]],this.frameBuffer[s++]=this.gbcBGPalette[l|u[f]];if(s<o)switch(h=this.BGCHRBank1[i],h<this.gfxBackgroundBankOffset&&(h|=256),c=this.BGCHRBank2[i],u=this.tileCache[(8&c)<<8|(96&c)<<4|h],l=(7&c)<<2,o-s){case 7:this.frameBuffer[s+6]=this.gbcBGPalette[l|u[6|r]];case 6:this.frameBuffer[s+5]=this.gbcBGPalette[l|u[5|r]];case 5:this.frameBuffer[s+4]=this.gbcBGPalette[l|u[4|r]];case 4:this.frameBuffer[s+3]=this.gbcBGPalette[l|u[3|r]];case 3:this.frameBuffer[s+2]=this.gbcBGPalette[l|u[2|r]];case 2:this.frameBuffer[s+1]=this.gbcBGPalette[l|u[1|r]];case 1:this.frameBuffer[s]=this.gbcBGPalette[l|u[r]]}}},l.prototype.WindowGBLayerRender=function(e){if(this.gfxWindowDisplay){var t=e-this.windowY;if(t>=0){var r=this.windowX>0?this.windowX+this.currentX:this.currentX,i=this.pixelStart+r,n=this.pixelStart+this.pixelEnd;if(i<n){var s=(7&t)<<3,o=(this.gfxWindowCHRBankPosition|(248&t)<<2)+(this.currentX>>3),a=this.BGCHRBank1[o];a<this.gfxBackgroundBankOffset&&(a|=256);var h=this.tileCache[a],c=r-this.windowX&7;for(r=Math.min(8,c+n-i);c<r;)this.frameBuffer[i++]=this.BGPalette[h[s|c++]];for(r=o+(n-i>>3);o<r;)(a=this.BGCHRBank1[++o])<this.gfxBackgroundBankOffset&&(a|=256),h=this.tileCache[a],c=s,this.frameBuffer[i++]=this.BGPalette[h[c++]],this.frameBuffer[i++]=this.BGPalette[h[c++]],this.frameBuffer[i++]=this.BGPalette[h[c++]],this.frameBuffer[i++]=this.BGPalette[h[c++]],this.frameBuffer[i++]=this.BGPalette[h[c++]],this.frameBuffer[i++]=this.BGPalette[h[c++]],this.frameBuffer[i++]=this.BGPalette[h[c++]],this.frameBuffer[i++]=this.BGPalette[h[c]];if(i<n)switch(a=this.BGCHRBank1[++o],a<this.gfxBackgroundBankOffset&&(a|=256),h=this.tileCache[a],n-i){case 7:this.frameBuffer[i+6]=this.BGPalette[h[6|s]];case 6:this.frameBuffer[i+5]=this.BGPalette[h[5|s]];case 5:this.frameBuffer[i+4]=this.BGPalette[h[4|s]];case 4:this.frameBuffer[i+3]=this.BGPalette[h[3|s]];case 3:this.frameBuffer[i+2]=this.BGPalette[h[2|s]];case 2:this.frameBuffer[i+1]=this.BGPalette[h[1|s]];case 1:this.frameBuffer[i]=this.BGPalette[h[s]]}}}}},l.prototype.WindowGBCLayerRender=function(e){if(this.gfxWindowDisplay){var t=e-this.windowY;if(t>=0){var r=this.windowX>0?this.windowX+this.currentX:this.currentX,i=this.pixelStart+r,n=this.pixelStart+this.pixelEnd;if(i<n){var s=(7&t)<<3,o=(this.gfxWindowCHRBankPosition|(248&t)<<2)+(this.currentX>>3),a=this.BGCHRBank1[o];a<this.gfxBackgroundBankOffset&&(a|=256);var h=this.BGCHRBank2[o],c=this.tileCache[(8&h)<<8|(96&h)<<4|a],u=(7&h)<<2|(128&h)>>2,l=r-this.windowX&7;for(r=Math.min(8,l+n-i);l<r;)this.frameBuffer[i++]=this.gbcBGPalette[u|c[s|l++]];for(r=o+(n-i>>3);o<r;)(a=this.BGCHRBank1[++o])<this.gfxBackgroundBankOffset&&(a|=256),h=this.BGCHRBank2[o],c=this.tileCache[(8&h)<<8|(96&h)<<4|a],u=(7&h)<<2|(128&h)>>2,l=s,this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l]];if(i<n)switch(a=this.BGCHRBank1[++o],a<this.gfxBackgroundBankOffset&&(a|=256),h=this.BGCHRBank2[o],c=this.tileCache[(8&h)<<8|(96&h)<<4|a],u=(7&h)<<2|(128&h)>>2,n-i){case 7:this.frameBuffer[i+6]=this.gbcBGPalette[u|c[6|s]];case 6:this.frameBuffer[i+5]=this.gbcBGPalette[u|c[5|s]];case 5:this.frameBuffer[i+4]=this.gbcBGPalette[u|c[4|s]];case 4:this.frameBuffer[i+3]=this.gbcBGPalette[u|c[3|s]];case 3:this.frameBuffer[i+2]=this.gbcBGPalette[u|c[2|s]];case 2:this.frameBuffer[i+1]=this.gbcBGPalette[u|c[1|s]];case 1:this.frameBuffer[i]=this.gbcBGPalette[u|c[s]]}}}}},l.prototype.WindowGBCLayerRenderNoPriorityFlagging=function(e){if(this.gfxWindowDisplay){var t=e-this.windowY;if(t>=0){var r=this.windowX>0?this.windowX+this.currentX:this.currentX,i=this.pixelStart+r,n=this.pixelStart+this.pixelEnd;if(i<n){var s=(7&t)<<3,o=(this.gfxWindowCHRBankPosition|(248&t)<<2)+(this.currentX>>3),a=this.BGCHRBank1[o];a<this.gfxBackgroundBankOffset&&(a|=256);var h=this.BGCHRBank2[o],c=this.tileCache[(8&h)<<8|(96&h)<<4|a],u=(7&h)<<2,l=r-this.windowX&7;for(r=Math.min(8,l+n-i);l<r;)this.frameBuffer[i++]=this.gbcBGPalette[u|c[s|l++]];for(r=o+(n-i>>3);o<r;)(a=this.BGCHRBank1[++o])<this.gfxBackgroundBankOffset&&(a|=256),h=this.BGCHRBank2[o],c=this.tileCache[(8&h)<<8|(96&h)<<4|a],u=(7&h)<<2,l=s,this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l++]],this.frameBuffer[i++]=this.gbcBGPalette[u|c[l]];if(i<n)switch(a=this.BGCHRBank1[++o],a<this.gfxBackgroundBankOffset&&(a|=256),h=this.BGCHRBank2[o],c=this.tileCache[(8&h)<<8|(96&h)<<4|a],u=(7&h)<<2,n-i){case 7:this.frameBuffer[i+6]=this.gbcBGPalette[u|c[6|s]];case 6:this.frameBuffer[i+5]=this.gbcBGPalette[u|c[5|s]];case 5:this.frameBuffer[i+4]=this.gbcBGPalette[u|c[4|s]];case 4:this.frameBuffer[i+3]=this.gbcBGPalette[u|c[3|s]];case 3:this.frameBuffer[i+2]=this.gbcBGPalette[u|c[2|s]];case 2:this.frameBuffer[i+1]=this.gbcBGPalette[u|c[1|s]];case 1:this.frameBuffer[i]=this.gbcBGPalette[u|c[s]]}}}}},l.prototype.SpriteGBLayerRender=function(e){if(this.gfxSpriteShow){for(var t=e+16,r=65024,i=0,n=1,s=0,o=0,a=0,h=0,c=null,u=0,l=0,f=0,p=0,d=0;n<168;)this.sortBuffer[n++]=255;if(this.gfxSpriteNormalHeight)for(f=this.findLowestSpriteDrawable(t,7);l<f;++l)for(r=this.OAMAddressCache[l],i=t-this.memory[r]<<3,h=(16&(a=this.memory[3|r]))>>2,c=this.tileCache[(96&a)<<4|this.memory[2|r]],d=s=this.memory[1|r],o=Math.min(168-d,8),n=d>7?0:8-d,p=this.pixelStart+(d>8?d-8:0);n<o;++n,++p,++d)this.sortBuffer[d]>s&&(this.frameBuffer[p]>=33554432?(u=c[i|n])>0&&(this.frameBuffer[p]=this.OBJPalette[h|u],this.sortBuffer[d]=s):this.frameBuffer[p]<16777216&&((u=c[i|n])>0&&a<128&&(this.frameBuffer[p]=this.OBJPalette[h|u],this.sortBuffer[d]=s)));else for(f=this.findLowestSpriteDrawable(t,15);l<f;++l)for(r=this.OAMAddressCache[l],i=t-this.memory[r]<<3,h=(16&(a=this.memory[3|r]))>>2,c=(64&a)==(64&i)?this.tileCache[(96&a)<<4|254&this.memory[2|r]]:this.tileCache[(96&a)<<4|this.memory[2|r]|1],i&=63,d=s=this.memory[1|r],o=Math.min(168-d,8),n=d>7?0:8-d,p=this.pixelStart+(d>8?d-8:0);n<o;++n,++p,++d)this.sortBuffer[d]>s&&(this.frameBuffer[p]>=33554432?(u=c[i|n])>0&&(this.frameBuffer[p]=this.OBJPalette[h|u],this.sortBuffer[d]=s):this.frameBuffer[p]<16777216&&((u=c[i|n])>0&&a<128&&(this.frameBuffer[p]=this.OBJPalette[h|u],this.sortBuffer[d]=s)))}},l.prototype.findLowestSpriteDrawable=function(e,t){for(var r=65024,i=0,n=0;r<65184&&i<10;)((n=e-this.memory[r])&t)===n&&(this.OAMAddressCache[i++]=r),r+=4;return i},l.prototype.SpriteGBCLayerRender=function(e){if(this.gfxSpriteShow){var t=65024,r=e+16,i=0,n=0,s=0,o=0,a=0,h=0,c=null,u=0,l=0,f=0;if(this.gfxSpriteNormalHeight){for(;t<65184&&f<10;t+=4)if((7&(i=r-this.memory[t]))===i){for(n=this.memory[1|t]-8,s=Math.min(160,n+8),h=(7&(a=this.memory[3|t]))<<2,c=this.tileCache[(8&a)<<8|(96&a)<<4|this.memory[2|t]],o=n>0?n:0,n-=i<<3,l=this.pixelStart+o;o<s;++o,++l)this.frameBuffer[l]>=33554432?(u=c[o-n])>0&&(this.frameBuffer[l]=this.gbcOBJPalette[h|u]):this.frameBuffer[l]<16777216&&((u=c[o-n])>0&&a<128&&(this.frameBuffer[l]=this.gbcOBJPalette[h|u]));++f}}else for(;t<65184&&f<10;t+=4)if((15&(i=r-this.memory[t]))===i){for(n=this.memory[1|t]-8,s=Math.min(160,n+8),h=(7&(a=this.memory[3|t]))<<2,c=(64&a)==(64&i<<3)?this.tileCache[(8&a)<<8|(96&a)<<4|254&this.memory[2|t]]:this.tileCache[(8&a)<<8|(96&a)<<4|this.memory[2|t]|1],o=n>0?n:0,n-=(7&i)<<3,l=this.pixelStart+o;o<s;++o,++l)this.frameBuffer[l]>=33554432?(u=c[o-n])>0&&(this.frameBuffer[l]=this.gbcOBJPalette[h|u]):this.frameBuffer[l]<16777216&&((u=c[o-n])>0&&a<128&&(this.frameBuffer[l]=this.gbcOBJPalette[h|u]));++f}}},l.prototype.generateGBTileLine=function(e){var t=this.memory[1|e]<<8|this.memory[40958&e],r=this.tileCache[(8176&e)>>4];r[7|(e=(14&e)<<2)]=(256&t)>>7|1&t,r[6|e]=(512&t)>>8|(2&t)>>1,r[5|e]=(1024&t)>>9|(4&t)>>2,r[4|e]=(2048&t)>>10|(8&t)>>3,r[3|e]=(4096&t)>>11|(16&t)>>4,r[2|e]=(8192&t)>>12|(32&t)>>5,r[1|e]=(16384&t)>>13|(64&t)>>6,r[e]=(32768&t)>>14|(128&t)>>7},l.prototype.generateGBCTileLineBank1=function(e){var t=this.memory[1|e]<<8|this.memory[40958&e];e&=8190;var r=this.tileCache[e>>4],i=this.tileCache[512|e>>4],n=this.tileCache[1024|e>>4],s=this.tileCache[1536|e>>4],o=56-(e=(14&e)<<2);s[o]=i[e]=n[7|o]=r[7|e]=(256&t)>>7|1&t,s[1|o]=i[1|e]=n[6|o]=r[6|e]=(512&t)>>8|(2&t)>>1,s[2|o]=i[2|e]=n[5|o]=r[5|e]=(1024&t)>>9|(4&t)>>2,s[3|o]=i[3|e]=n[4|o]=r[4|e]=(2048&t)>>10|(8&t)>>3,s[4|o]=i[4|e]=n[3|o]=r[3|e]=(4096&t)>>11|(16&t)>>4,s[5|o]=i[5|e]=n[2|o]=r[2|e]=(8192&t)>>12|(32&t)>>5,s[6|o]=i[6|e]=n[1|o]=r[1|e]=(16384&t)>>13|(64&t)>>6,s[7|o]=i[7|e]=n[o]=r[e]=(32768&t)>>14|(128&t)>>7},l.prototype.generateGBCTileBank1=function(e){var t=e>>4,r=this.tileCache[t],i=this.tileCache[512|t],n=this.tileCache[1024|t],s=this.tileCache[1536|t],o=0;e|=32768,t=0;var a=56;do{o=this.memory[1|e]<<8|this.memory[e],s[a]=i[t]=n[7|a]=r[7|t]=(256&o)>>7|1&o,s[1|a]=i[1|t]=n[6|a]=r[6|t]=(512&o)>>8|(2&o)>>1,s[2|a]=i[2|t]=n[5|a]=r[5|t]=(1024&o)>>9|(4&o)>>2,s[3|a]=i[3|t]=n[4|a]=r[4|t]=(2048&o)>>10|(8&o)>>3,s[4|a]=i[4|t]=n[3|a]=r[3|t]=(4096&o)>>11|(16&o)>>4,s[5|a]=i[5|t]=n[2|a]=r[2|t]=(8192&o)>>12|(32&o)>>5,s[6|a]=i[6|t]=n[1|a]=r[1|t]=(16384&o)>>13|(64&o)>>6,s[7|a]=i[7|t]=n[a]=r[t]=(32768&o)>>14|(128&o)>>7,t+=8,a-=8,e+=2}while(a>-1)},l.prototype.generateGBCTileLineBank2=function(e){var t=this.VRAM[1|e]<<8|this.VRAM[8190&e],r=this.tileCache[2048|e>>4],i=this.tileCache[2560|e>>4],n=this.tileCache[3072|e>>4],s=this.tileCache[3584|e>>4],o=56-(e=(14&e)<<2);s[o]=i[e]=n[7|o]=r[7|e]=(256&t)>>7|1&t,s[1|o]=i[1|e]=n[6|o]=r[6|e]=(512&t)>>8|(2&t)>>1,s[2|o]=i[2|e]=n[5|o]=r[5|e]=(1024&t)>>9|(4&t)>>2,s[3|o]=i[3|e]=n[4|o]=r[4|e]=(2048&t)>>10|(8&t)>>3,s[4|o]=i[4|e]=n[3|o]=r[3|e]=(4096&t)>>11|(16&t)>>4,s[5|o]=i[5|e]=n[2|o]=r[2|e]=(8192&t)>>12|(32&t)>>5,s[6|o]=i[6|e]=n[1|o]=r[1|e]=(16384&t)>>13|(64&t)>>6,s[7|o]=i[7|e]=n[o]=r[e]=(32768&t)>>14|(128&t)>>7},l.prototype.generateGBCTileBank2=function(e){var t=e>>4,r=this.tileCache[2048|t],i=this.tileCache[2560|t],n=this.tileCache[3072|t],s=this.tileCache[3584|t],o=0;t=0;var a=56;do{o=this.VRAM[1|e]<<8|this.VRAM[e],s[a]=i[t]=n[7|a]=r[7|t]=(256&o)>>7|1&o,s[1|a]=i[1|t]=n[6|a]=r[6|t]=(512&o)>>8|(2&o)>>1,s[2|a]=i[2|t]=n[5|a]=r[5|t]=(1024&o)>>9|(4&o)>>2,s[3|a]=i[3|t]=n[4|a]=r[4|t]=(2048&o)>>10|(8&o)>>3,s[4|a]=i[4|t]=n[3|a]=r[3|t]=(4096&o)>>11|(16&o)>>4,s[5|a]=i[5|t]=n[2|a]=r[2|t]=(8192&o)>>12|(32&o)>>5,s[6|a]=i[6|t]=n[1|a]=r[1|t]=(16384&o)>>13|(64&o)>>6,s[7|a]=i[7|t]=n[a]=r[t]=(32768&o)>>14|(128&o)>>7,t+=8,a-=8,e+=2}while(a>-1)},l.prototype.generateGBOAMTileLine=function(e){var t=this.memory[1|e]<<8|this.memory[40958&e];e&=8190;var r=this.tileCache[e>>4],i=this.tileCache[512|e>>4],n=this.tileCache[1024|e>>4],s=this.tileCache[1536|e>>4],o=56-(e=(14&e)<<2);s[o]=i[e]=n[7|o]=r[7|e]=(256&t)>>7|1&t,s[1|o]=i[1|e]=n[6|o]=r[6|e]=(512&t)>>8|(2&t)>>1,s[2|o]=i[2|e]=n[5|o]=r[5|e]=(1024&t)>>9|(4&t)>>2,s[3|o]=i[3|e]=n[4|o]=r[4|e]=(2048&t)>>10|(8&t)>>3,s[4|o]=i[4|e]=n[3|o]=r[3|e]=(4096&t)>>11|(16&t)>>4,s[5|o]=i[5|e]=n[2|o]=r[2|e]=(8192&t)>>12|(32&t)>>5,s[6|o]=i[6|e]=n[1|o]=r[1|e]=(16384&t)>>13|(64&t)>>6,s[7|o]=i[7|e]=n[o]=r[e]=(32768&t)>>14|(128&t)>>7},l.prototype.graphicsJIT=function(){this.LCDisOn&&(this.totalLinesPassed=0,this.graphicsJITScanlineGroup())},l.prototype.graphicsJITVBlank=function(){this.totalLinesPassed+=this.queuedScanLines,this.graphicsJITScanlineGroup()},l.prototype.graphicsJITScanlineGroup=function(){for(;this.queuedScanLines>0;)this.renderScanLine(this.lastUnrenderedLine),this.lastUnrenderedLine<143?++this.lastUnrenderedLine:this.lastUnrenderedLine=0,--this.queuedScanLines},l.prototype.incrementScanLineQueue=function(){this.queuedScanLines<144?++this.queuedScanLines:(this.currentX=0,this.midScanlineOffset=-1,this.lastUnrenderedLine<143?++this.lastUnrenderedLine:this.lastUnrenderedLine=0)},l.prototype.midScanLineJIT=function(){this.graphicsJIT(),this.renderMidScanLine()},l.prototype.launchIRQ=function(){var e=0,t=1;do{if((t&this.IRQLineMatched)===t)return this.IME=!1,this.interruptsRequested-=t,this.IRQLineMatched=0,this.CPUTicks=20,this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,this.programCounter>>8]),this.stackPointer=this.stackPointer-1&65535,this.memoryWriter[this.stackPointer].apply(this,[this.stackPointer,255&this.programCounter]),this.programCounter=64|e<<3,void this.updateCore();t=1<<++e}while(e<5)},l.prototype.checkIRQMatching=function(){this.IME&&(this.IRQLineMatched=this.interruptsEnabled&this.interruptsRequested&31)},l.prototype.calculateHALTPeriod=function(){if(this.halt)var e=this.remainingClocks;else{this.halt=!0;e=-1;var t=0;this.LCDisOn&&(1==(1&this.interruptsEnabled)&&(e=456*((1===this.modeSTAT?298:144)-this.actualScanLine)-this.LCDTicks<<this.doubleSpeedShifter),2==(2&this.interruptsEnabled)&&(this.mode0TriggerSTAT&&(((t=this.clocksUntilMode0()-this.LCDTicks<<this.doubleSpeedShifter)<=e||-1===e)&&(e=t)),this.mode1TriggerSTAT&&0==(1&this.interruptsEnabled)&&(((t=456*((1===this.modeSTAT?298:144)-this.actualScanLine)-this.LCDTicks<<this.doubleSpeedShifter)<=e||-1===e)&&(e=t)),this.mode2TriggerSTAT&&(((t=(this.actualScanLine>=143?456*(154-this.actualScanLine):456)-this.LCDTicks<<this.doubleSpeedShifter)<=e||-1===e)&&(e=t)),this.LYCMatchTriggerSTAT&&this.memory[65349]<=153&&(((t=this.clocksUntilLYCMatch()-this.LCDTicks<<this.doubleSpeedShifter)<=e||-1===e)&&(e=t)))),this.TIMAEnabled&&4==(4&this.interruptsEnabled)&&(((t=(256-this.memory[65285])*this.TACClocker-this.timerTicks)<=e||-1===e)&&(e=t)),this.serialTimer>0&&8==(8&this.interruptsEnabled)&&(this.serialTimer<=e||-1===e)&&(e=this.serialTimer)}var r=this.CPUCyclesTotal-this.emulatorTicks<<this.doubleSpeedShifter;e>=0?e<=r?(this.CPUTicks=Math.max(e,this.CPUTicks),this.updateCoreFull(),this.halt=!1,this.CPUTicks=0):(this.CPUTicks=Math.max(r,this.CPUTicks),this.remainingClocks=e-this.CPUTicks):this.CPUTicks+=r},l.prototype.memoryRead=function(e){return this.memoryReader[e].apply(this,[e])},l.prototype.memoryHighRead=function(e){return this.memoryHighReader[e].apply(this,[e])},l.prototype.memoryReadJumpCompile=function(){for(var e=this,t=0;t<=65535;t++)if(t<16384)this.memoryReader[t]=this.memoryReadNormal;else if(t<32768)this.memoryReader[t]=this.memoryReadROM;else if(t<38912)this.memoryReader[t]=this.cartridgeSlot.cartridge.useGBCMode?this.VRAMDATAReadCGBCPU:this.VRAMDATAReadDMGCPU;else if(t<40960)this.memoryReader[t]=this.cartridgeSlot.cartridge.useGBCMode?this.VRAMCHRReadCGBCPU:this.VRAMCHRReadDMGCPU;else if(t>=40960&&t<49152)0!==this.cartridgeSlot.cartridge.ramSize?this.cartridgeSlot.cartridge.hasMBC7?this.memoryReader[t]=this.memoryReadMBC7:this.cartridgeSlot.cartridge.hasMBC3?this.memoryReader[t]=this.memoryReadMBC3:this.memoryReader[t]=this.memoryReadMBC:this.memoryReader[t]=this.memoryReadBAD;else if(t>=49152&&t<57344)!this.cartridgeSlot.cartridge.useGBCMode||t<53248?this.memoryReader[t]=this.memoryReadNormal:this.memoryReader[t]=this.memoryReadGBCMemory;else if(t>=57344&&t<65024)!this.cartridgeSlot.cartridge.useGBCMode||t<61440?this.memoryReader[t]=this.memoryReadECHONormal:this.memoryReader[t]=this.memoryReadECHOGBCMemory;else if(t<65184)this.memoryReader[t]=this.memoryReadOAM;else if(this.cartridgeSlot.cartridge.useGBCMode&&t>=65184&&t<65280)this.memoryReader[t]=this.memoryReadNormal;else if(t>=65280)switch(t){case 65280:this.memoryHighReader[0]=this.memoryReader[65280]=function(t){return 192|e.memory[65280]};break;case 65281:this.memoryHighReader[1]=this.memoryReader[65281]=function(t){return e.memory[65282]<128?e.memory[65281]:255};break;case 65282:this.cartridgeSlot.cartridge.useGBCMode?this.memoryHighReader[2]=this.memoryReader[65282]=function(t){return(e.serialTimer<=0?124:252)|e.memory[65282]}:this.memoryHighReader[2]=this.memoryReader[65282]=function(t){return(e.serialTimer<=0?126:254)|e.memory[65282]};break;case 65283:this.memoryHighReader[3]=this.memoryReader[65283]=this.memoryReadBAD;break;case 65284:this.memoryHighReader[4]=this.memoryReader[65284]=function(t){return e.memory[65284]=e.memory[65284]+(e.DIVTicks>>8)&255,e.DIVTicks&=255,e.memory[65284]};break;case 65285:case 65286:this.memoryHighReader[255&t]=this.memoryHighReadNormal,this.memoryReader[t]=this.memoryReadNormal;break;case 65287:this.memoryHighReader[7]=this.memoryReader[65287]=function(t){return 248|e.memory[65287]};break;case 65288:case 65289:case 65290:case 65291:case 65292:case 65293:case 65294:this.memoryHighReader[255&t]=this.memoryReader[t]=this.memoryReadBAD;break;case 65295:this.memoryHighReader[15]=this.memoryReader[65295]=function(t){return 224|e.interruptsRequested};break;case 65296:this.memoryHighReader[16]=this.memoryReader[65296]=function(t){return 128|e.memory[65296]};break;case 65297:this.memoryHighReader[17]=this.memoryReader[65297]=function(t){return 63|e.memory[65297]};break;case 65298:this.memoryHighReader[18]=this.memoryHighReadNormal,this.memoryReader[65298]=this.memoryReadNormal;break;case 65299:this.memoryHighReader[19]=this.memoryReader[65299]=this.memoryReadBAD;break;case 65300:this.memoryHighReader[20]=this.memoryReader[65300]=function(t){return 191|e.memory[65300]};break;case 65301:this.memoryHighReader[21]=this.memoryReadBAD,this.memoryReader[65301]=this.memoryReadBAD;break;case 65302:this.memoryHighReader[22]=this.memoryReader[65302]=function(t){return 63|e.memory[65302]};break;case 65303:this.memoryHighReader[23]=this.memoryHighReadNormal,this.memoryReader[65303]=this.memoryReadNormal;break;case 65304:this.memoryHighReader[24]=this.memoryReader[65304]=this.memoryReadBAD;break;case 65305:this.memoryHighReader[25]=this.memoryReader[65305]=function(t){return 191|e.memory[65305]};break;case 65306:this.memoryHighReader[26]=this.memoryReader[65306]=function(t){return 127|e.memory[65306]};break;case 65307:this.memoryHighReader[27]=this.memoryReader[65307]=this.memoryReadBAD;break;case 65308:this.memoryHighReader[28]=this.memoryReader[65308]=function(t){return 159|e.memory[65308]};break;case 65309:this.memoryHighReader[29]=this.memoryReader[65309]=this.memoryReadBAD;break;case 65310:this.memoryHighReader[30]=this.memoryReader[65310]=function(t){return 191|e.memory[65310]};break;case 65311:case 65312:this.memoryHighReader[255&t]=this.memoryReader[t]=this.memoryReadBAD;break;case 65313:case 65314:this.memoryHighReader[255&t]=this.memoryHighReadNormal,this.memoryReader[t]=this.memoryReadNormal;break;case 65315:this.memoryHighReader[35]=this.memoryReader[65315]=function(t){return 191|e.memory[65315]};break;case 65316:case 65317:this.memoryHighReader[255&t]=this.memoryHighReadNormal,this.memoryReader[t]=this.memoryReadNormal;break;case 65318:this.memoryHighReader[38]=this.memoryReader[65318]=function(t){return e.audioJIT(),112|e.memory[65318]};break;case 65319:case 65320:case 65321:case 65322:case 65323:case 65324:case 65325:case 65326:case 65327:this.memoryHighReader[255&t]=this.memoryReader[t]=this.memoryReadBAD;break;case 65328:case 65329:case 65330:case 65331:case 65332:case 65333:case 65334:case 65335:case 65336:case 65337:case 65338:case 65339:case 65340:case 65341:case 65342:case 65343:this.memoryReader[t]=function(t){return e.channel3canPlay?e.memory[65280|e.channel3lastSampleLookup>>1]:e.memory[t]},this.memoryHighReader[255&t]=function(t){return e.channel3canPlay?e.memory[65280|e.channel3lastSampleLookup>>1]:e.memory[65280|t]};break;case 65344:this.memoryHighReader[64]=this.memoryHighReadNormal,this.memoryReader[65344]=this.memoryReadNormal;break;case 65345:this.memoryHighReader[65]=this.memoryReader[65345]=function(t){return 128|e.memory[65345]|e.modeSTAT};break;case 65346:this.memoryHighReader[66]=this.memoryReader[65346]=function(t){return e.backgroundY};break;case 65347:this.memoryHighReader[67]=this.memoryReader[65347]=function(t){return e.backgroundX};break;case 65348:this.memoryHighReader[68]=this.memoryReader[65348]=function(t){return e.LCDisOn?e.memory[65348]:0};break;case 65349:case 65350:case 65351:case 65352:case 65353:this.memoryHighReader[255&t]=this.memoryHighReadNormal,this.memoryReader[t]=this.memoryReadNormal;break;case 65354:this.memoryHighReader[74]=this.memoryReader[65354]=function(t){return e.windowY};break;case 65355:this.memoryHighReader[75]=this.memoryHighReadNormal,this.memoryReader[65355]=this.memoryReadNormal;break;case 65356:this.memoryHighReader[76]=this.memoryReader[65356]=this.memoryReadBAD;break;case 65357:this.memoryHighReader[77]=this.memoryHighReadNormal,this.memoryReader[65357]=this.memoryReadNormal;break;case 65358:this.memoryHighReader[78]=this.memoryReader[65358]=this.memoryReadBAD;break;case 65359:this.memoryHighReader[79]=this.memoryReader[65359]=function(t){return e.currVRAMBank};break;case 65360:case 65361:case 65362:case 65363:case 65364:this.memoryHighReader[255&t]=this.memoryHighReadNormal,this.memoryReader[t]=this.memoryReadNormal;break;case 65365:this.cartridgeSlot.cartridge.useGBCMode?this.memoryHighReader[85]=this.memoryReader[65365]=function(t){return!e.LCDisOn&&e.hdmaRunning&&(e.DMAWrite(1+(127&e.memory[65365])),e.memory[65365]=255,e.hdmaRunning=!1),e.memory[65365]}:(this.memoryReader[65365]=this.memoryReadNormal,this.memoryHighReader[85]=this.memoryHighReadNormal);break;case 65366:this.cartridgeSlot.cartridge.useGBCMode?this.memoryHighReader[86]=this.memoryReader[65366]=function(t){return 60|(e.memory[65366]>=192?2|193&e.memory[65366]:195&e.memory[65366])}:(this.memoryReader[65366]=this.memoryReadNormal,this.memoryHighReader[86]=this.memoryHighReadNormal);break;case 65367:case 65368:case 65369:case 65370:case 65371:case 65372:case 65373:case 65374:case 65375:case 65376:case 65377:case 65378:case 65379:case 65380:case 65381:case 65382:case 65383:this.memoryHighReader[255&t]=this.memoryReader[t]=this.memoryReadBAD;break;case 65384:case 65385:case 65386:case 65387:this.memoryHighReader[255&t]=this.memoryHighReadNormal,this.memoryReader[t]=this.memoryReadNormal;break;case 65388:this.cartridgeSlot.cartridge.useGBCMode?this.memoryHighReader[108]=this.memoryReader[65388]=function(t){return 254|e.memory[65388]}:this.memoryHighReader[108]=this.memoryReader[65388]=this.memoryReadBAD;break;case 65389:case 65390:case 65391:this.memoryHighReader[255&t]=this.memoryReader[t]=this.memoryReadBAD;break;case 65392:this.cartridgeSlot.cartridge.useGBCMode?this.memoryHighReader[112]=this.memoryReader[65392]=function(t){return 64|e.memory[65392]}:this.memoryHighReader[112]=this.memoryReader[65392]=this.memoryReadBAD;break;case 65393:this.memoryHighReader[113]=this.memoryReader[65393]=this.memoryReadBAD;break;case 65394:case 65395:this.memoryHighReader[255&t]=this.memoryReader[t]=this.memoryReadNormal;break;case 65396:this.cartridgeSlot.cartridge.useGBCMode?this.memoryHighReader[116]=this.memoryReader[65396]=this.memoryReadNormal:this.memoryHighReader[116]=this.memoryReader[65396]=this.memoryReadBAD;break;case 65397:this.memoryHighReader[117]=this.memoryReader[65397]=function(t){return 143|e.memory[65397]};break;case 65398:this.memoryHighReader[118]=this.memoryReader[65398]=function(t){return e.audioJIT(),e.channel2envelopeVolume<<4|e.channel1envelopeVolume};break;case 65399:this.memoryHighReader[119]=this.memoryReader[65399]=function(t){return e.audioJIT(),e.channel4envelopeVolume<<4|e.channel3envelopeVolume};break;case 65400:case 65401:case 65402:case 65403:case 65404:case 65405:case 65406:case 65407:this.memoryHighReader[255&t]=this.memoryReader[t]=this.memoryReadBAD;break;case 65535:this.memoryHighReader[255]=this.memoryReader[65535]=function(t){return e.interruptsEnabled};break;default:this.memoryReader[t]=this.memoryReadNormal,this.memoryHighReader[255&t]=this.memoryHighReadNormal}else this.memoryReader[t]=this.memoryReadBAD},l.prototype.memoryReadNormal=function(e){return this.memory[e]},l.prototype.memoryHighReadNormal=function(e){return this.memory[65280|e]},l.prototype.memoryReadROM=function(e){return this.cartridgeSlot.cartridge.rom.getByte(this.cartridgeSlot.cartridge.mbc.currentROMBank+e)},l.prototype.memoryReadMBC=function(e){return this.cartridgeSlot.cartridge.mbc.readRAM(e)},l.prototype.memoryReadMBC7=function(e){return this.cartridgeSlot.cartridge.mbc.readRAM(e)},l.prototype.memoryReadMBC3=function(e){return this.cartridgeSlot.cartridge.mbc.readRAM(e)},l.prototype.memoryReadGBCMemory=function(e){return this.GBCMemory[e+this.gbcRamBankPosition]},l.prototype.memoryReadOAM=function(e){return this.modeSTAT>1?255:this.memory[e]},l.prototype.memoryReadECHOGBCMemory=function(e){return this.GBCMemory[e+this.gbcRamBankPositionECHO]},l.prototype.memoryReadECHONormal=function(e){return this.memory[e-8192]},l.prototype.memoryReadBAD=function(e){return 255},l.prototype.VRAMDATAReadCGBCPU=function(e){return this.modeSTAT>2?255:0===this.currVRAMBank?this.memory[e]:this.VRAM[8191&e]},l.prototype.VRAMDATAReadDMGCPU=function(e){return this.modeSTAT>2?255:this.memory[e]},l.prototype.VRAMCHRReadCGBCPU=function(e){return this.modeSTAT>2?255:this.BGCHRCurrentBank[2047&e]},l.prototype.VRAMCHRReadDMGCPU=function(e){return this.modeSTAT>2?255:this.BGCHRBank1[2047&e]},l.prototype.memoryWrite=function(e,t){this.memoryWriter[e].apply(this,[e,t])},l.prototype.memoryHighWrite=function(e,t){this.memoryHighWriter[e].apply(this,[e,t])},l.prototype.memoryWriteJumpCompile=function(){for(var e=0;e<=65535;e++)e<32768?this.cartridgeSlot.cartridge.hasMBC1?this.memoryWriter[e]=e<8192?this.MBCWriteEnable:e<16384?this.MBC1WriteROMBank:e<24576?this.MBC1WriteRAMBank:this.MBC1WriteType:this.cartridgeSlot.cartridge.hasMBC2?this.memoryWriter[e]=e<4096?this.MBCWriteEnable:e>=8448&&e<8704?this.MBC2WriteROMBank:this.cartIgnoreWrite:this.cartridgeSlot.cartridge.hasMBC3?this.memoryWriter[e]=e<8192?this.MBCWriteEnable:e<16384?this.MBC3WriteROMBank:e<24576?this.MBC3WriteRAMBank:this.MBC3WriteRTCLatch:this.cartridgeSlot.cartridge.hasMBC5||this.cartridgeSlot.cartridge.cRUMBLE||this.cartridgeSlot.cartridge.hasMBC7?this.memoryWriter[e]=e<8192?this.MBCWriteEnable:e<12288?this.MBC5WriteROMBankLow:e<16384?this.MBC5WriteROMBankHigh:e<24576?this.cartridgeSlot.cartridge.cRUMBLE?this.RUMBLEWriteRAMBank:this.MBC5WriteRAMBank:this.cartIgnoreWrite:this.cartridgeSlot.cartridge.cHuC3?this.memoryWriter[e]=e<8192?this.MBCWriteEnable:e<16384?this.MBC3WriteROMBank:e<24576?this.HuC3WriteRAMBank:this.cartIgnoreWrite:this.memoryWriter[e]=this.cartIgnoreWrite:e<36864?this.memoryWriter[e]=this.cartridgeSlot.cartridge.useGBCMode?this.VRAMGBCDATAWrite:this.VRAMGBDATAWrite:e<38912?this.memoryWriter[e]=this.cartridgeSlot.cartridge.useGBCMode?this.VRAMGBCDATAWrite:this.VRAMGBDATAUpperWrite:e<40960?this.memoryWriter[e]=this.cartridgeSlot.cartridge.useGBCMode?this.VRAMGBCCHRMAPWrite:this.VRAMGBCHRMAPWrite:e<49152?0!==this.cartridgeSlot.cartridge.ramSize?this.cartridgeSlot.cartridge.hasMBC3?this.memoryWriter[e]=this.memoryWriteMBC3RAM:this.memoryWriter[e]=this.memoryWriteMBCRAM:this.memoryWriter[e]=this.cartIgnoreWrite:e<57344?this.cartridgeSlot.cartridge.useGBCMode&&e>=53248?this.memoryWriter[e]=this.memoryWriteGBCRAM:this.memoryWriter[e]=this.memoryWriteNormal:e<65024?this.cartridgeSlot.cartridge.useGBCMode&&e>=61440?this.memoryWriter[e]=this.memoryWriteECHOGBCRAM:this.memoryWriter[e]=this.memoryWriteECHONormal:e<=65184?this.memoryWriter[e]=this.memoryWriteOAMRAM:e<65280?this.cartridgeSlot.cartridge.useGBCMode?this.memoryWriter[e]=this.memoryWriteNormal:this.memoryWriter[e]=this.cartIgnoreWrite:(this.memoryWriter[e]=this.memoryWriteNormal,this.memoryHighWriter[255&e]=this.memoryHighWriteNormal);this.registerWriteJumpCompile()},l.prototype.MBCWriteEnable=function(e,t){this.cartridgeSlot.cartridge.mbc.writeEnable(e,t)},l.prototype.MBC1WriteROMBank=function(e,t){this.cartridgeSlot.cartridge.mbc.writeROMBank(e,t)},l.prototype.MBC1WriteRAMBank=function(e,t){this.cartridgeSlot.cartridge.mbc.writeRAMBank(e,t)},l.prototype.MBC1WriteType=function(e,t){this.cartridgeSlot.cartridge.mbc.writeType(e,t)},l.prototype.MBC2WriteROMBank=function(e,t){this.cartridgeSlot.cartridge.mbc.writeROMBank(e,t)},l.prototype.MBC3WriteROMBank=function(e,t){return this.cartridgeSlot.cartridge.mbc.writeROMBank(e,t)},l.prototype.MBC3WriteRAMBank=function(e,t){return this.cartridgeSlot.cartridge.mbc.writeRAMBank(e,t)},l.prototype.MBC3WriteRTCLatch=function(e,t){return this.cartridgeSlot.cartridge.mbc.rtc.writeLatch(e,t)},l.prototype.MBC5WriteROMBankLow=function(e,t){return this.cartridgeSlot.cartridge.mbc.writeROMBankLow(e,t)},l.prototype.MBC5WriteROMBankHigh=function(e,t){return this.cartridgeSlot.cartridge.mbc.writeROMBankHigh(e,t)},l.prototype.MBC5WriteRAMBank=function(e,t){return this.cartridgeSlot.cartridge.mbc.writeRAMBank(e,t)},l.prototype.RUMBLEWriteRAMBank=function(e,t){this.cartridgeSlot.cartridge.mbc.currentMBCRAMBank=3&t,this.cartridgeSlot.cartridge.mbc.currentRAMBankPosition=(this.cartridgeSlot.cartridge.mbc.currentMBCRAMBank<<13)-40960},l.prototype.HuC3WriteRAMBank=function(e,t){this.cartridgeSlot.cartridge.mbc.currentMBCRAMBank=3&t,this.cartridgeSlot.cartridge.mbc.currentRAMBankPosition=(this.cartridgeSlot.cartridge.mbc.currentMBCRAMBank<<13)-40960},l.prototype.cartIgnoreWrite=function(e,t){},l.prototype.memoryWriteNormal=function(e,t){this.memory[e]=t},l.prototype.memoryHighWriteNormal=function(e,t){this.memory[65280|e]=t},l.prototype.memoryWriteMBCRAM=function(e,t){this.cartridgeSlot.cartridge.mbc.writeRAM(e,t)},l.prototype.memoryWriteMBC3RAM=function(e,t){return this.cartridgeSlot.cartridge.mbc.writeRAM(e,t)},l.prototype.memoryWriteGBCRAM=function(e,t){this.GBCMemory[e+this.gbcRamBankPosition]=t},l.prototype.memoryWriteOAMRAM=function(e,t){this.modeSTAT<2&&this.memory[e]!=t&&(this.graphicsJIT(),this.memory[e]=t)},l.prototype.memoryWriteECHOGBCRAM=function(e,t){this.GBCMemory[e+this.gbcRamBankPositionECHO]=t},l.prototype.memoryWriteECHONormal=function(e,t){this.memory[e-8192]=t},l.prototype.VRAMGBDATAWrite=function(e,t){this.modeSTAT<3&&this.memory[e]!=t&&(this.graphicsJIT(),this.memory[e]=t,this.generateGBOAMTileLine(e))},l.prototype.VRAMGBDATAUpperWrite=function(e,t){this.modeSTAT<3&&this.memory[e]!=t&&(this.graphicsJIT(),this.memory[e]=t,this.generateGBTileLine(e))},l.prototype.VRAMGBCDATAWrite=function(e,t){this.modeSTAT<3&&(0===this.currVRAMBank?this.memory[e]!=t&&(this.graphicsJIT(),this.memory[e]=t,this.generateGBCTileLineBank1(e)):(e&=8191,this.VRAM[e]!=t&&(this.graphicsJIT(),this.VRAM[e]=t,this.generateGBCTileLineBank2(e))))},l.prototype.VRAMGBCHRMAPWrite=function(e,t){this.modeSTAT<3&&(e&=2047,this.BGCHRBank1[e]!=t&&(this.graphicsJIT(),this.BGCHRBank1[e]=t))},l.prototype.VRAMGBCCHRMAPWrite=function(e,t){this.modeSTAT<3&&(e&=2047,this.BGCHRCurrentBank[e]!=t&&(this.graphicsJIT(),this.BGCHRCurrentBank[e]=t))},l.prototype.DMAWrite=function(e){this.halt||(this.CPUTicks+=4|e<<5<<this.doubleSpeedShifter);var t=this.memory[65361]<<8|this.memory[65362],r=this.memory[65363]<<8|this.memory[65364],i=this.memoryReader;this.graphicsJIT();var n=this.memory;if(0===this.currVRAMBank)do{r<6144?(n[32768|r]=i[t].apply(this,[t++]),n[32769|r]=i[t].apply(this,[t++]),n[32770|r]=i[t].apply(this,[t++]),n[32771|r]=i[t].apply(this,[t++]),n[32772|r]=i[t].apply(this,[t++]),n[32773|r]=i[t].apply(this,[t++]),n[32774|r]=i[t].apply(this,[t++]),n[32775|r]=i[t].apply(this,[t++]),n[32776|r]=i[t].apply(this,[t++]),n[32777|r]=i[t].apply(this,[t++]),n[32778|r]=i[t].apply(this,[t++]),n[32779|r]=i[t].apply(this,[t++]),n[32780|r]=i[t].apply(this,[t++]),n[32781|r]=i[t].apply(this,[t++]),n[32782|r]=i[t].apply(this,[t++]),n[32783|r]=i[t].apply(this,[t++]),this.generateGBCTileBank1(r),r+=16):(r&=2032,this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),this.BGCHRBank1[r++]=i[t].apply(this,[t++]),r=r+6144&8176),t&=65520,--e}while(e>0);else{var s=this.VRAM;do{r<6144?(s[r]=i[t].apply(this,[t++]),s[1|r]=i[t].apply(this,[t++]),s[2|r]=i[t].apply(this,[t++]),s[3|r]=i[t].apply(this,[t++]),s[4|r]=i[t].apply(this,[t++]),s[5|r]=i[t].apply(this,[t++]),s[6|r]=i[t].apply(this,[t++]),s[7|r]=i[t].apply(this,[t++]),s[8|r]=i[t].apply(this,[t++]),s[9|r]=i[t].apply(this,[t++]),s[10|r]=i[t].apply(this,[t++]),s[11|r]=i[t].apply(this,[t++]),s[12|r]=i[t].apply(this,[t++]),s[13|r]=i[t].apply(this,[t++]),s[14|r]=i[t].apply(this,[t++]),s[15|r]=i[t].apply(this,[t++]),this.generateGBCTileBank2(r),r+=16):(r&=2032,this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),this.BGCHRBank2[r++]=i[t].apply(this,[t++]),r=r+6144&8176),t&=65520,--e}while(e>0)}n[65361]=t>>8,n[65362]=240&t,n[65363]=r>>8,n[65364]=240&r},l.prototype.registerWriteJumpCompile=function(){var e=this;this.memoryHighWriter[0]=this.memoryWriter[65280]=function(t,r){e.memory[65280]=48&r|(0==(32&r)?e.joypad.value>>4:15)&(0==(16&r)?15&e.joypad.value:15)},this.memoryHighWriter[1]=this.memoryWriter[65281]=function(t,r){e.memory[65282]<128&&(e.memory[65281]=r)},this.memoryHighWriter[2]=this.memoryHighWriteNormal,this.memoryWriter[65282]=this.memoryWriteNormal,this.memoryHighWriter[3]=this.memoryWriter[65283]=this.cartIgnoreWrite,this.memoryHighWriter[4]=this.memoryWriter[65284]=function(t,r){e.DIVTicks&=255,e.memory[65284]=0},this.memoryHighWriter[5]=this.memoryWriter[65285]=function(t,r){e.memory[65285]=r},this.memoryHighWriter[6]=this.memoryWriter[65286]=function(t,r){e.memory[65286]=r},this.memoryHighWriter[7]=this.memoryWriter[65287]=function(t,r){e.memory[65287]=7&r,e.TIMAEnabled=4==(4&r),e.TACClocker=Math.pow(4,0!=(3&r)?3&r:4)<<2},this.memoryHighWriter[8]=this.memoryWriter[65288]=this.cartIgnoreWrite,this.memoryHighWriter[9]=this.memoryWriter[65289]=this.cartIgnoreWrite,this.memoryHighWriter[10]=this.memoryWriter[65290]=this.cartIgnoreWrite,this.memoryHighWriter[11]=this.memoryWriter[65291]=this.cartIgnoreWrite,this.memoryHighWriter[12]=this.memoryWriter[65292]=this.cartIgnoreWrite,this.memoryHighWriter[13]=this.memoryWriter[65293]=this.cartIgnoreWrite,this.memoryHighWriter[14]=this.memoryWriter[65294]=this.cartIgnoreWrite,this.memoryHighWriter[15]=this.memoryWriter[65295]=function(t,r){e.interruptsRequested=r,e.checkIRQMatching()},this.memoryHighWriter[16]=this.memoryWriter[65296]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),e.channel1decreaseSweep&&0==(8&r)&&e.channel1Swept&&(e.channel1SweepFault=!0),e.channel1lastTimeSweep=(112&r)>>4,e.channel1frequencySweepDivider=7&r,e.channel1decreaseSweep=8==(8&r),e.memory[65296]=r,e.channel1EnableCheck())},this.memoryHighWriter[17]=this.memoryWriter[65297]=function(t,r){!e.soundMasterEnabled&&e.cartridgeSlot.cartridge.useGBCMode||(e.soundMasterEnabled?e.audioJIT():r&=63,e.channel1CachedDuty=q[r>>6],e.channel1totalLength=64-(63&r),e.memory[65297]=r,e.channel1EnableCheck())},this.memoryHighWriter[18]=this.memoryWriter[65298]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),e.channel1Enabled&&0===e.channel1envelopeSweeps&&(8==(8&(e.memory[65298]^r))?(0==(8&e.memory[65298])&&(7==(7&e.memory[65298])?e.channel1envelopeVolume+=2:++e.channel1envelopeVolume),e.channel1envelopeVolume=16-e.channel1envelopeVolume&15):8==(15&e.memory[65298])&&(e.channel1envelopeVolume=1+e.channel1envelopeVolume&15),e.channel1OutputLevelCache()),e.channel1envelopeType=8==(8&r),e.memory[65298]=r,e.channel1VolumeEnableCheck())},this.memoryHighWriter[19]=this.memoryWriter[65299]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),e.channel1frequency=1792&e.channel1frequency|r,e.channel1FrequencyTracker=2048-e.channel1frequency<<2)},this.memoryHighWriter[20]=this.memoryWriter[65300]=function(t,r){if(e.soundMasterEnabled){if(e.audioJIT(),e.channel1consecutive=0==(64&r),e.channel1frequency=(7&r)<<8|255&e.channel1frequency,e.channel1FrequencyTracker=2048-e.channel1frequency<<2,r>127){e.channel1timeSweep=e.channel1lastTimeSweep,e.channel1Swept=!1;var i=e.memory[65298];e.channel1envelopeVolume=i>>4,e.channel1OutputLevelCache(),e.channel1envelopeSweepsLast=(7&i)-1,0===e.channel1totalLength&&(e.channel1totalLength=64),e.channel1lastTimeSweep>0||e.channel1frequencySweepDivider>0?e.memory[65318]|=1:e.memory[65318]&=254,64==(64&r)&&(e.memory[65318]|=1),e.channel1ShadowFrequency=e.channel1frequency,e.channel1SweepFault=!1,e.channel1AudioSweepPerformDummy()}e.channel1EnableCheck(),e.memory[65300]=r}},this.memoryHighWriter[21]=this.memoryWriter[65301]=this.cartIgnoreWrite,this.memoryHighWriter[22]=this.memoryWriter[65302]=function(t,r){!e.soundMasterEnabled&&e.cartridgeSlot.cartridge.useGBCMode||(e.soundMasterEnabled?e.audioJIT():r&=63,e.channel2CachedDuty=q[r>>6],e.channel2totalLength=64-(63&r),e.memory[65302]=r,e.channel2EnableCheck())},this.memoryHighWriter[23]=this.memoryWriter[65303]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),e.channel2Enabled&&0===e.channel2envelopeSweeps&&(8==(8&(e.memory[65303]^r))?(0==(8&e.memory[65303])&&(7==(7&e.memory[65303])?e.channel2envelopeVolume+=2:++e.channel2envelopeVolume),e.channel2envelopeVolume=16-e.channel2envelopeVolume&15):8==(15&e.memory[65303])&&(e.channel2envelopeVolume=1+e.channel2envelopeVolume&15),e.channel2OutputLevelCache()),e.channel2envelopeType=8==(8&r),e.memory[65303]=r,e.channel2VolumeEnableCheck())},this.memoryHighWriter[24]=this.memoryWriter[65304]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),e.channel2frequency=1792&e.channel2frequency|r,e.channel2FrequencyTracker=2048-e.channel2frequency<<2)},this.memoryHighWriter[25]=this.memoryWriter[65305]=function(t,r){if(e.soundMasterEnabled){if(e.audioJIT(),r>127){var i=e.memory[65303];e.channel2envelopeVolume=i>>4,e.channel2OutputLevelCache(),e.channel2envelopeSweepsLast=(7&i)-1,0===e.channel2totalLength&&(e.channel2totalLength=64),64==(64&r)&&(e.memory[65318]|=2)}e.channel2consecutive=0==(64&r),e.channel2frequency=(7&r)<<8|255&e.channel2frequency,e.channel2FrequencyTracker=2048-e.channel2frequency<<2,e.memory[65305]=r,e.channel2EnableCheck()}},this.memoryHighWriter[26]=this.memoryWriter[65306]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),!e.channel3canPlay&&r>=128&&(e.channel3lastSampleLookup=0,e.channel3UpdateCache()),e.channel3canPlay=r>127,e.channel3canPlay&&e.memory[65306]>127&&!e.channel3consecutive&&(e.memory[65318]|=4),e.memory[65306]=r)},this.memoryHighWriter[27]=this.memoryWriter[65307]=function(t,r){!e.soundMasterEnabled&&e.cartridgeSlot.cartridge.useGBCMode||(e.soundMasterEnabled&&e.audioJIT(),e.channel3totalLength=256-r,e.channel3EnableCheck())},this.memoryHighWriter[28]=this.memoryWriter[65308]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),r&=96,e.memory[65308]=r,e.channel3patternType=0===r?4:(r>>5)-1)},this.memoryHighWriter[29]=this.memoryWriter[65309]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),e.channel3frequency=1792&e.channel3frequency|r,e.channel3FrequencyPeriod=2048-e.channel3frequency<<1)},this.memoryHighWriter[30]=this.memoryWriter[65310]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),r>127&&(0===e.channel3totalLength&&(e.channel3totalLength=256),e.channel3lastSampleLookup=0,64==(64&r)&&(e.memory[65318]|=4)),e.channel3consecutive=0==(64&r),e.channel3frequency=(7&r)<<8|255&e.channel3frequency,e.channel3FrequencyPeriod=2048-e.channel3frequency<<1,e.memory[65310]=r,e.channel3EnableCheck())},this.memoryHighWriter[31]=this.memoryWriter[65311]=this.cartIgnoreWrite,this.memoryHighWriter[32]=this.memoryWriter[65312]=function(t,r){!e.soundMasterEnabled&&e.cartridgeSlot.cartridge.useGBCMode||(e.soundMasterEnabled&&e.audioJIT(),e.channel4totalLength=64-(63&r),e.channel4EnableCheck())},this.memoryHighWriter[33]=this.memoryWriter[65313]=function(t,r){e.soundMasterEnabled&&(e.audioJIT(),e.channel4Enabled&&0===e.channel4envelopeSweeps&&(8==(8&(e.memory[65313]^r))?(0==(8&e.memory[65313])&&(7==(7&e.memory[65313])?e.channel4envelopeVolume+=2:++e.channel4envelopeVolume),e.channel4envelopeVolume=16-e.channel4envelopeVolume&15):8==(15&e.memory[65313])&&(e.channel4envelopeVolume=1+e.channel4envelopeVolume&15),e.channel4currentVolume=e.channel4envelopeVolume<<e.channel4VolumeShifter),e.channel4envelopeType=8==(8&r),e.memory[65313]=r,e.channel4UpdateCache(),e.channel4VolumeEnableCheck())},this.memoryHighWriter[34]=this.memoryWriter[65314]=function(t,r){if(e.soundMasterEnabled){e.audioJIT(),e.channel4FrequencyPeriod=Math.max((7&r)<<4,8)<<(r>>4);var i=8&r;(8===i&&32767===e.channel4BitRange||0===i&&127===e.channel4BitRange)&&(e.channel4lastSampleLookup=0,e.channel4BitRange=8===i?127:32767,e.channel4VolumeShifter=8===i?7:15,e.channel4currentVolume=e.channel4envelopeVolume<<e.channel4VolumeShifter,e.noiseSampleTable=8===i?e.LSFR7Table:e.LSFR15Table),e.memory[65314]=r,e.channel4UpdateCache()}},this.memoryHighWriter[35]=this.memoryWriter[65315]=function(t,r){if(e.soundMasterEnabled){if(e.audioJIT(),e.memory[65315]=r,e.channel4consecutive=0==(64&r),r>127){var i=e.memory[65313];e.channel4envelopeVolume=i>>4,e.channel4currentVolume=e.channel4envelopeVolume<<e.channel4VolumeShifter,e.channel4envelopeSweepsLast=(7&i)-1,0===e.channel4totalLength&&(e.channel4totalLength=64),64==(64&r)&&(e.memory[65318]|=8)}e.channel4EnableCheck()}},this.memoryHighWriter[36]=this.memoryWriter[65316]=function(t,r){e.soundMasterEnabled&&e.memory[65316]!=r&&(e.audioJIT(),e.memory[65316]=r,e.VinLeftChannelMasterVolume=1+(r>>4&7),e.VinRightChannelMasterVolume=1+(7&r),e.mixerOutputLevelCache())},this.memoryHighWriter[37]=this.memoryWriter[65317]=function(t,r){e.soundMasterEnabled&&e.memory[65317]!=r&&(e.audioJIT(),e.memory[65317]=r,e.rightChannel1=1==(1&r),e.rightChannel2=2==(2&r),e.rightChannel3=4==(4&r),e.rightChannel4=8==(8&r),e.leftChannel1=16==(16&r),e.leftChannel2=32==(32&r),e.leftChannel3=64==(64&r),e.leftChannel4=r>127,e.channel1OutputLevelCache(),e.channel2OutputLevelCache(),e.channel3OutputLevelCache(),e.channel4OutputLevelCache())},this.memoryHighWriter[38]=this.memoryWriter[65318]=function(t,r){if(e.audioJIT(),!e.soundMasterEnabled&&r>127)e.memory[65318]=128,e.soundMasterEnabled=!0,e.initializeAudioStartState();else if(e.soundMasterEnabled&&r<128){e.memory[65318]=0,e.soundMasterEnabled=!1;for(var i=65296;i<65318;i++)e.memoryWriter[i].apply(e,[i,0])}},this.memoryHighWriter[39]=this.memoryWriter[65319]=this.cartIgnoreWrite,this.memoryHighWriter[40]=this.memoryWriter[65320]=this.cartIgnoreWrite,this.memoryHighWriter[41]=this.memoryWriter[65321]=this.cartIgnoreWrite,this.memoryHighWriter[42]=this.memoryWriter[65322]=this.cartIgnoreWrite,this.memoryHighWriter[43]=this.memoryWriter[65323]=this.cartIgnoreWrite,this.memoryHighWriter[44]=this.memoryWriter[65324]=this.cartIgnoreWrite,this.memoryHighWriter[45]=this.memoryWriter[65325]=this.cartIgnoreWrite,this.memoryHighWriter[46]=this.memoryWriter[65326]=this.cartIgnoreWrite,this.memoryHighWriter[47]=this.memoryWriter[65327]=this.cartIgnoreWrite,this.memoryHighWriter[48]=this.memoryWriter[65328]=function(t,r){e.channel3WriteRAM(0,r)},this.memoryHighWriter[49]=this.memoryWriter[65329]=function(t,r){e.channel3WriteRAM(1,r)},this.memoryHighWriter[50]=this.memoryWriter[65330]=function(t,r){e.channel3WriteRAM(2,r)},this.memoryHighWriter[51]=this.memoryWriter[65331]=function(t,r){e.channel3WriteRAM(3,r)},this.memoryHighWriter[52]=this.memoryWriter[65332]=function(t,r){e.channel3WriteRAM(4,r)},this.memoryHighWriter[53]=this.memoryWriter[65333]=function(t,r){e.channel3WriteRAM(5,r)},this.memoryHighWriter[54]=this.memoryWriter[65334]=function(t,r){e.channel3WriteRAM(6,r)},this.memoryHighWriter[55]=this.memoryWriter[65335]=function(t,r){e.channel3WriteRAM(7,r)},this.memoryHighWriter[56]=this.memoryWriter[65336]=function(t,r){e.channel3WriteRAM(8,r)},this.memoryHighWriter[57]=this.memoryWriter[65337]=function(t,r){e.channel3WriteRAM(9,r)},this.memoryHighWriter[58]=this.memoryWriter[65338]=function(t,r){e.channel3WriteRAM(10,r)},this.memoryHighWriter[59]=this.memoryWriter[65339]=function(t,r){e.channel3WriteRAM(11,r)},this.memoryHighWriter[60]=this.memoryWriter[65340]=function(t,r){e.channel3WriteRAM(12,r)},this.memoryHighWriter[61]=this.memoryWriter[65341]=function(t,r){e.channel3WriteRAM(13,r)},this.memoryHighWriter[62]=this.memoryWriter[65342]=function(t,r){e.channel3WriteRAM(14,r)},this.memoryHighWriter[63]=this.memoryWriter[65343]=function(t,r){e.channel3WriteRAM(15,r)},this.memoryHighWriter[66]=this.memoryWriter[65346]=function(t,r){e.backgroundY!=r&&(e.midScanLineJIT(),e.backgroundY=r)},this.memoryHighWriter[67]=this.memoryWriter[65347]=function(t,r){e.backgroundX!=r&&(e.midScanLineJIT(),e.backgroundX=r)},this.memoryHighWriter[68]=this.memoryWriter[65348]=function(t,r){e.LCDisOn&&(e.modeSTAT=2,e.midScanlineOffset=-1,e.totalLinesPassed=e.currentX=e.queuedScanLines=e.lastUnrenderedLine=e.LCDTicks=e.STATTracker=e.actualScanLine=e.memory[65348]=0)},this.memoryHighWriter[69]=this.memoryWriter[65349]=function(t,r){e.memory[65349]!=r&&(e.memory[65349]=r,e.LCDisOn&&e.matchLYC())},this.memoryHighWriter[74]=this.memoryWriter[65354]=function(t,r){e.windowY!=r&&(e.midScanLineJIT(),e.windowY=r)},this.memoryHighWriter[75]=this.memoryWriter[65355]=function(t,r){e.memory[65355]!=r&&(e.midScanLineJIT(),e.memory[65355]=r,e.windowX=r-7)},this.memoryHighWriter[114]=this.memoryWriter[65394]=function(t,r){e.memory[65394]=r},this.memoryHighWriter[115]=this.memoryWriter[65395]=function(t,r){e.memory[65395]=r},this.memoryHighWriter[117]=this.memoryWriter[65397]=function(t,r){e.memory[65397]=r},this.memoryHighWriter[118]=this.memoryWriter[65398]=this.cartIgnoreWrite,this.memoryHighWriter[119]=this.memoryWriter[65399]=this.cartIgnoreWrite,this.memoryHighWriter[255]=this.memoryWriter[65535]=function(t,r){e.interruptsEnabled=r,e.checkIRQMatching()},this.recompileModelSpecificIOWriteHandling(),this.recompileBootIOWriteHandling()},l.prototype.recompileModelSpecificIOWriteHandling=function(){var e=this;this.cartridgeSlot.cartridge.useGBCMode?(this.memoryHighWriter[2]=this.memoryWriter[65282]=function(t,r){1==(1&r)?(e.memory[65282]=127&r,e.serialTimer=0==(2&r)?4096:128,e.serialShiftTimer=e.serialShiftTimerAllocated=0==(2&r)?512:16):(e.memory[65282]=r,e.serialShiftTimer=e.serialShiftTimerAllocated=e.serialTimer=0)},this.memoryHighWriter[64]=this.memoryWriter[65344]=function(t,r){if(e.memory[65344]!=r){e.midScanLineJIT();var i=r>127;i!=e.LCDisOn&&(e.LCDisOn=i,e.memory[65345]&=120,e.midScanlineOffset=-1,e.totalLinesPassed=e.currentX=e.queuedScanLines=e.lastUnrenderedLine=e.STATTracker=e.LCDTicks=e.actualScanLine=e.memory[65348]=0,e.LCDisOn?(e.modeSTAT=2,e.matchLYC(),e.LCDCONTROL=e.LINECONTROL):(e.modeSTAT=0,e.LCDCONTROL=e.DISPLAYOFFCONTROL,e.lcd.DisplayShowOff()),e.interruptsRequested&=253),e.gfxWindowCHRBankPosition=64==(64&r)?1024:0,e.gfxWindowDisplay=32==(32&r),e.gfxBackgroundBankOffset=16==(16&r)?0:128,e.gfxBackgroundCHRBankPosition=8==(8&r)?1024:0,e.gfxSpriteNormalHeight=0==(4&r),e.gfxSpriteShow=2==(2&r),e.BGPriorityEnabled=1==(1&r),e.priorityFlaggingPathRebuild(),e.memory[65344]=r}},this.memoryHighWriter[65]=this.memoryWriter[65345]=function(t,r){e.LYCMatchTriggerSTAT=64==(64&r),e.mode2TriggerSTAT=32==(32&r),e.mode1TriggerSTAT=16==(16&r),e.mode0TriggerSTAT=8==(8&r),e.memory[65345]=120&r},this.memoryHighWriter[70]=this.memoryWriter[65350]=function(t,r){if(e.memory[65350]=r,r<224){r<<=8,t=65024;var i=e.modeSTAT;e.modeSTAT=0;var n=0;do{if((n=e.memoryReader[r].apply(e,[r++]))!=e.memory[t]){e.modeSTAT=i,e.graphicsJIT(),e.modeSTAT=0,e.memory[t++]=n;break}}while(++t<65184);if(t<65184)do{e.memory[t++]=e.memoryReader[r].apply(e,[r++]),e.memory[t++]=e.memoryReader[r].apply(e,[r++]),e.memory[t++]=e.memoryReader[r].apply(e,[r++]),e.memory[t++]=e.memoryReader[r].apply(e,[r++])}while(t<65184);e.modeSTAT=i}},this.memoryHighWriter[77]=this.memoryWriter[65357]=function(t,r){e.memory[65357]=127&r|128&e.memory[65357]},this.memoryHighWriter[79]=this.memoryWriter[65359]=function(t,r){e.currVRAMBank=1&r,e.currVRAMBank>0?e.BGCHRCurrentBank=e.BGCHRBank2:e.BGCHRCurrentBank=e.BGCHRBank1},this.memoryHighWriter[81]=this.memoryWriter[65361]=function(t,r){e.hdmaRunning||(e.memory[65361]=r)},this.memoryHighWriter[82]=this.memoryWriter[65362]=function(t,r){e.hdmaRunning||(e.memory[65362]=240&r)},this.memoryHighWriter[83]=this.memoryWriter[65363]=function(t,r){e.hdmaRunning||(e.memory[65363]=31&r)},this.memoryHighWriter[84]=this.memoryWriter[65364]=function(t,r){e.hdmaRunning||(e.memory[65364]=240&r)},this.memoryHighWriter[85]=this.memoryWriter[65365]=function(t,r){e.hdmaRunning?0==(128&r)?(e.hdmaRunning=!1,e.memory[65365]|=128):e.memory[65365]=127&r:0==(128&r)?(e.DMAWrite(1+(127&r)),e.memory[65365]=255):(e.hdmaRunning=!0,e.memory[65365]=127&r)},this.memoryHighWriter[104]=this.memoryWriter[65384]=function(t,r){e.memory[65385]=e.gbcBGRawPalette[63&r],e.memory[65384]=r},this.memoryHighWriter[105]=this.memoryWriter[65385]=function(t,r){if(e.updateGBCBGPalette(63&e.memory[65384],r),e.memory[65384]>127){var i=e.memory[65384]+1&63;e.memory[65384]=128|i,e.memory[65385]=e.gbcBGRawPalette[i]}else e.memory[65385]=r},this.memoryHighWriter[106]=this.memoryWriter[65386]=function(t,r){e.memory[65387]=e.gbcOBJRawPalette[63&r],e.memory[65386]=r},this.memoryHighWriter[107]=this.memoryWriter[65387]=function(t,r){if(e.updateGBCOBJPalette(63&e.memory[65386],r),e.memory[65386]>127){var i=e.memory[65386]+1&63;e.memory[65386]=128|i,e.memory[65387]=e.gbcOBJRawPalette[i]}else e.memory[65387]=r},this.memoryHighWriter[112]=this.memoryWriter[65392]=function(t,r){var i=e.memory[65361]<<8|e.memory[65362];(!e.hdmaRunning||i<53248||i>=57344)&&(e.gbcRamBank=Math.max(7&r,1),e.gbcRamBankPosition=(e.gbcRamBank-1<<12)-53248,e.gbcRamBankPositionECHO=e.gbcRamBankPosition-8192),e.memory[65392]=r},this.memoryHighWriter[116]=this.memoryWriter[65396]=function(t,r){e.memory[65396]=r}):(this.memoryHighWriter[2]=this.memoryWriter[65282]=function(t,r){1==(1&r)?(e.memory[65282]=127&r,e.serialTimer=4096,e.serialShiftTimer=e.serialShiftTimerAllocated=512):(e.memory[65282]=r,e.serialShiftTimer=e.serialShiftTimerAllocated=e.serialTimer=0)},this.memoryHighWriter[64]=this.memoryWriter[65344]=function(t,r){if(e.memory[65344]!=r){e.midScanLineJIT();var i=r>127;i!=e.LCDisOn&&(e.LCDisOn=i,e.memory[65345]&=120,e.midScanlineOffset=-1,e.totalLinesPassed=e.currentX=e.queuedScanLines=e.lastUnrenderedLine=e.STATTracker=e.LCDTicks=e.actualScanLine=e.memory[65348]=0,e.LCDisOn?(e.modeSTAT=2,e.matchLYC(),e.LCDCONTROL=e.LINECONTROL):(e.modeSTAT=0,e.LCDCONTROL=e.DISPLAYOFFCONTROL,e.lcd.DisplayShowOff()),e.interruptsRequested&=253),e.gfxWindowCHRBankPosition=64==(64&r)?1024:0,e.gfxWindowDisplay=32==(32&r),e.gfxBackgroundBankOffset=16==(16&r)?0:128,e.gfxBackgroundCHRBankPosition=8==(8&r)?1024:0,e.gfxSpriteNormalHeight=0==(4&r),e.gfxSpriteShow=2==(2&r),e.bgEnabled=1==(1&r),e.memory[65344]=r}},this.memoryHighWriter[65]=this.memoryWriter[65345]=function(t,r){e.LYCMatchTriggerSTAT=64==(64&r),e.mode2TriggerSTAT=32==(32&r),e.mode1TriggerSTAT=16==(16&r),e.mode0TriggerSTAT=8==(8&r),e.memory[65345]=120&r,(!e.usedBootROM||!e.usedGBCBootROM)&&e.LCDisOn&&e.modeSTAT<2&&(e.interruptsRequested|=2,e.checkIRQMatching())},this.memoryHighWriter[70]=this.memoryWriter[65350]=function(t,r){if(e.memory[65350]=r,r>127&&r<224){r<<=8,t=65024;var i=e.modeSTAT;e.modeSTAT=0;var n=0;do{if((n=e.memoryReader[r].apply(e,[r++]))!=e.memory[t]){e.modeSTAT=i,e.graphicsJIT(),e.modeSTAT=0,e.memory[t++]=n;break}}while(++t<65184);if(t<65184)do{e.memory[t++]=e.memoryReader[r].apply(e,[r++]),e.memory[t++]=e.memoryReader[r].apply(e,[r++]),e.memory[t++]=e.memoryReader[r].apply(e,[r++]),e.memory[t++]=e.memoryReader[r].apply(e,[r++])}while(t<65184);e.modeSTAT=i}},this.memoryHighWriter[71]=this.memoryWriter[65351]=function(t,r){e.memory[65351]!=r&&(e.midScanLineJIT(),e.updateGBBGPalette(r),e.memory[65351]=r)},this.memoryHighWriter[72]=this.memoryWriter[65352]=function(t,r){e.memory[65352]!=r&&(e.midScanLineJIT(),e.updateGBOBJPalette(0,r),e.memory[65352]=r)},this.memoryHighWriter[73]=this.memoryWriter[65353]=function(t,r){e.memory[65353]!=r&&(e.midScanLineJIT(),e.updateGBOBJPalette(4,r),e.memory[65353]=r)},this.memoryHighWriter[77]=this.memoryWriter[65357]=function(t,r){e.memory[65357]=r},this.memoryHighWriter[79]=this.memoryWriter[65359]=this.cartIgnoreWrite,this.memoryHighWriter[85]=this.memoryWriter[65365]=this.cartIgnoreWrite,this.memoryHighWriter[104]=this.memoryWriter[65384]=this.cartIgnoreWrite,this.memoryHighWriter[105]=this.memoryWriter[65385]=this.cartIgnoreWrite,this.memoryHighWriter[106]=this.memoryWriter[65386]=this.cartIgnoreWrite,this.memoryHighWriter[107]=this.memoryWriter[65387]=this.cartIgnoreWrite,this.memoryHighWriter[108]=this.memoryWriter[65388]=this.cartIgnoreWrite,this.memoryHighWriter[112]=this.memoryWriter[65392]=this.cartIgnoreWrite,this.memoryHighWriter[116]=this.memoryWriter[65396]=this.cartIgnoreWrite)},l.prototype.recompileBootIOWriteHandling=function(){var e=this;this.inBootstrap?(this.memoryHighWriter[80]=this.memoryWriter[65360]=function(t,r){console.log("Boot ROM reads blocked: Bootstrap process has ended.",0),e.inBootstrap=!1,e.disableBootROM(),e.memory[65360]=r},this.cartridgeSlot.cartridge.useGBCMode&&(this.memoryHighWriter[108]=this.memoryWriter[65388]=function(t,r){e.inBootstrap&&(e.cartridgeSlot.cartridge.useGBCMode=0==(1&r),e.cartridgeSlot.cartridge.name+e.cartridgeSlot.cartridge.gameCode+e.cartridgeSlot.cartridge.colorCompatibilityByte==="Game and Watch 50"&&(e.cartridgeSlot.cartridge.useGBCMode=!0,console.log("Created a boot exception for Game and Watch Gallery 2 (GBC ID byte is wrong on the cartridge).")),console.log("Booted to GBC Mode: "+e.cartridgeSlot.cartridge.useGBCMode)),e.memory[65388]=r})):this.memoryHighWriter[80]=this.memoryWriter[65360]=this.cartIgnoreWrite},e("LocalStorage",Z=function(){function e(){y(this,e)}return v(e,[{key:"findState",value:function(e){return this.find("state-"+e)}},{key:"findSRAM",value:function(e){return this.find("sram-"+e)}},{key:"findRTC",value:function(e){return this.find("rtc-"+e)}},{key:"setState",value:function(){var e=g(m.mark(function e(t,r){return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.set("state-"+t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"setSRAM",value:function(){var e=g(m.mark(function e(t,r){return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.set("sram-"+t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"setRTC",value:function(){var e=g(m.mark(function e(t,r){return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.set("rtc-"+t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"find",value:function(e){return function(e){if(!e||e.length<=0)return null;e=atob(e);for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer}(window.localStorage.getItem(e))}},{key:"set",value:function(e,t){var r=function(e){if(!e||e.length<=0)return null;e=new Uint8Array(e);for(var t="",r=0;r<e.byteLength;r++)t+=String.fromCharCode(e[r]);return btoa(t)}(t);window.localStorage.setItem(e,r)}}]),e}()),z=function(e){function t(){var e,r,i;y(this,t);for(var n=arguments.length,s=Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=i=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),i.map={},C(i,r)}return b(t,p),v(t,[{key:"register",value:function(e){return this.map[e]=!0,this}},{key:"getAll",value:function(){return Object.keys(this.map)}},{key:"is",value:function(e){return!!this.map[e]}},{key:"down",value:function(e,t){this.emit("down-"+e,t)}},{key:"change",value:function(e,t){this.emit("change-"+e,t)}},{key:"up",value:function(e,t){this.emit("up-"+e,t)}}]),t}(),e("GameBoy",V=function(e){function t(e){y(this,t);var r=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.buttons=["right","left","up","down","a","b","select","start"],r.debouncedAutoSave=d(r.autoSave.bind(r),100),r.core=new l(r,e),r.core.events.on("sramWrite",function(){r.core.cartridgeSlot.cartridge&&r.debouncedAutoSave()}),r.isOn=!1,r.actions=new z,r.registerActions(),r.storage=new Z,r}return b(t,p),v(t,[{key:"setStorage",value:function(e){this.storage=e}},{key:"registerActions",value:function(){var e=this;this.buttons.forEach(function(t,r){e.actions.register(t).on("down-"+t,function(){e.core.joypad.down(r)}).on("up-"+t,function(){e.core.joypad.up(r)})}),this.actions.register("speed").on("down-speed",function(t){return e.handleSpeed(t)}).on("change-speed",function(t){return e.handleSpeed(t)}).on("up-speed",function(){e.setSpeed(1)})}},{key:"handleSpeed",value:function(e){var t=2;e&&"number"==typeof e.value&&(t=2*e.value+1),this.setSpeed(t)}},{key:"turnOn",value:function(){var e=this;this.isOn||(this.isOn=!0,this.core.start(this.cartridge),this.core.stopEmulator&=1,this.interval=setInterval(function(){document.hidden||document.msHidden||document.mozHidden||document.webkitHidden||e.core.run()},S.runInterval))}},{key:"turnOff",value:function(){this.isOn&&(this.isOn=!1,this.interval&&(clearInterval(this.interval),this.interval=null))}},{key:"restart",value:function(){this.turnOff(),this.turnOn()}},{key:"replaceCartridge",value:function(e){this.turnOff(),this.removeCartridge(),this.insertCartridge(e),this.turnOn()}},{key:"removeCartridge",value:function(){this.cartridge=null}},{key:"insertCartridge",value:function(e){e instanceof M||(e=new M(e)),this.cartridge=e}},{key:"actionDown",value:function(e,t){this.actions.down(e,t)}},{key:"actionChange",value:function(e,t){this.actions.change(e,t)}},{key:"actionUp",value:function(e,t){this.actions.up(e,t)}},{key:"setSpeed",value:function(e){this.core.setSpeed(e)}},{key:"autoSave",value:function(){this.saveSRAM(),this.saveRTC()}},{key:"saveState",value:function(){var e=g(m.mark(function e(t){var r;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.core.cartridgeSlot.cartridge){e.next=2;break}return e.abrupt("return");case 2:if(r=this.core.cartridgeSlot.cartridge.name,t){e.next=7;break}if(t=this.core.stateManager.get()){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,this.storage.setState(r,t);case 9:this.emit("stateSaved",{name:r,state:t});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveSRAM",value:function(){var e=g(m.mark(function e(t){var r;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.core.cartridgeSlot.cartridge){e.next=2;break}return e.abrupt("return");case 2:if(r=this.core.cartridgeSlot.cartridge.name,t){e.next=7;break}if(t=this.core.cartridgeSlot.cartridge.mbc.getSRAM()){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,this.storage.setSRAM(r,t.buffer);case 9:this.emit("sramSaved",{name:r,sram:t});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveRTC",value:function(){var e=g(m.mark(function e(t){var r;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.core.cartridgeSlot.cartridge){e.next=2;break}return e.abrupt("return");case 2:if(this.core.cartridgeSlot.cartridge.hasRTC){e.next=4;break}return e.abrupt("return");case 4:if(r=this.core.cartridgeSlot.cartridge.name,t){e.next=9;break}if(t=this.core.cartridgeSlot.cartridge.mbc.rtc.get()){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,this.storage.setRTC(r,t.buffer);case 11:this.emit("rtcSaved",{name:r,rtc:t});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadState",value:function(e){if(this.core.cartridgeSlot.cartridge){var t=this.core.cartridgeSlot.cartridge.name;if(!e&&!(e=this.storage.findState(t)))return!1;this.core.loadState(e),this.emit("stateLoaded",{name:t,state:e})}}},{key:"loadSRAM",value:function(e){if(this.core.cartridgeSlot.cartridge){var t=this.core.cartridgeSlot.cartridge.name;if(!e){if(!(e=this.storage.findSRAM(t)))return!1;e=new Uint8Array(e)}this.core.cartridgeSlot.cartridge.mbc.loadSRAM(e),this.emit("sramLoaded",{name:t,sram:e})}}},{key:"loadRTC",value:function(e){if(this.core.cartridgeSlot.cartridge&&this.core.cartridgeSlot.cartridge.hasRTC){var t=this.core.cartridgeSlot.cartridge.name;if(!e){if(!(e=this.storage.findRTC(t)))return!1;e=new Uint32Array(e)}this.core.cartridgeSlot.cartridge.mbc.rtc.load(e),this.emit("rtcLoaded",{name:t,rtc:e})}}},{key:"getBatteryFileArrayBuffer",value:function(){if(this.core.cartridgeSlot.cartridge){var e=this.core.cartridgeSlot.cartridge.mbc.getSRAM(),t=null;return this.core.cartridgeSlot.cartridge.mbc.rtc&&(t=this.core.cartridgeSlot.cartridge.mbc.rtc.get()),t?u(e.buffer,t.buffer):e.buffer}}},{key:"loadBatteryFileArrayBuffer",value:function(){var e=g(m.mark(function e(t){var r,i;return m.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t&&(t=a(t)),r=this.core.cartridgeSlot.cartridge.mbc.cutSRAMFromBatteryFileArray(t),i=null,this.core.cartridgeSlot.cartridge.hasRTC&&(i=this.core.cartridgeSlot.cartridge.mbc.rtc.cutBatteryFileArray(t)),this.core.cartridgeSlot.cartridge.mbc.loadSRAM(r),i&&this.core.cartridgeSlot.cartridge.mbc.rtc.load(i),e.next=8,this.saveSRAM(r);case 8:if(!i){e.next=11;break}return e.next=11,this.saveRTC(i);case 11:this.restart();case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}()),e("GameBoy",V),e("LocalStorage",Z),e("util",B),e("default",V)}}})})(function(r){a=[],void 0===(h="function"==typeof(o=r)?o.apply(t,a):o)||(e.exports=h)})}).call(this,r(6),r(5),r(4))},function(e,t,r){!function(e,t,r){"use strict";t="default"in t?t.default:t,r="default"in r?r.default:r;var i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},o=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.$element=r(e),n.element=n.$element.get(0),r(document).on("pointerlockchange mozpointerlockchange webkitpointerlockchange",n.pointerLockChange.bind(n)).on("pointerlockerror mozpointerlockerror webkitpointerlockerror",n.pointerLockError.bind(n)),setTimeout(function(){t.isSupported||n.emit("unsupported")},0),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"requestPointerLock",value:function(){var e=this.element;return e.requestPointerLock?e.requestPointerLock():e.mozRequestPointerLock?e.mozRequestPointerLock():e.webkitRequestPointerLock?e.webkitRequestPointerLock():void 0}},{key:"pointerLockChange",value:function(e){this.emit("change",this.isLocked,e)}},{key:"pointerLockError",value:function(e){this.emit("error",new Error("pointer lock failed"),e)}},{key:"isLocked",get:function(){return t.pointerLockElement===this.element}}],[{key:"exitPointerLock",value:function(){return document.exitPointerLock?document.exitPointerLock():document.mozExitPointerLock?document.mozExitPointerLock():document.webkitExitPointerLock?document.webkitExitPointerLock():void 0}},{key:"pointerLockElement",get:function(){return document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||null}},{key:"isSupported",get:function(){return"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document}}]),t}(t);e.default=o,e.PointerLock=o,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(9),r(0))},function(e,t){var r,i,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var h,c=[],u=!1,l=-1;function f(){u&&h&&(u=!1,h.length?c=h.concat(c):l=-1,c.length&&p())}function p(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(h=c,c=[];++l<t;)h&&h[l].run();l=-1,t=c.length}h=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||u||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){e.exports={import:function(){throw new Error("System.import cannot be used indirectly")}}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(i,n,s){var o,a,h;!function(e){function t(e){Object.defineProperty(this,e,{enumerable:!0,get:function(){return this[m][e]}})}function i(e){var t;if(e&&e.__esModule){for(var r in t={},e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}else{if("[object Module]"===Object.prototype.toString.call(e)||n.isModule&&n.isModule(e))return e;t={default:e,__useDefault:!0}}return new o(t)}function o(e){Object.defineProperty(this,m,{value:e}),Object.keys(e).forEach(t,this)}function a(e){return"@node/"===e.substr(0,6)?p(e,i(g(e.substr(6)))):d[e]}function h(e){var t=a(e);if(!t)throw new Error('Module "'+e+'" expected, but not contained in build.');if(t.module)return t.module;var r=t.linkRecord;return function e(t,r){if(!r.depLoads){r.declare&&c(t,r),r.depLoads=[];for(var i=0;i<r.deps.length;i++){var n=a(r.deps[i]);r.depLoads.push(n),n.linkRecord&&e(n,n.linkRecord);var s=r.setters&&r.setters[i];s&&(s(n.module||n.linkRecord.moduleObj),n.importerSetters.push(s))}return t}}(t,r),f(t,r,[]),t.module}function c(t,r){var i=r.moduleObj,n=t.importerSetters,s=!1,o=r.declare.call(e,function(e,t){if(!s){if("object"==typeof e)for(var r in e)"__useDefault"!==r&&(i[r]=e[r]);else i[e]=t;s=!0;for(var o=0;o<n.length;o++)n[o](i);return s=!1,t}},{id:t.key});"function"!=typeof o?(r.setters=o.setters,r.execute=o.execute):(r.setters=[],r.execute=o)}function u(e,t,r){return d[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:r,setters:void 0,execute:void 0,moduleObj:{}}}}function l(e,t,r,i){return d[e]={key:e,module:void 0,importerSetters:[],linkRecord:{deps:t,depLoads:void 0,declare:void 0,execute:i,executingRequire:r,moduleObj:{default:{},__useDefault:!0},setters:void 0}}}function f(t,r,i){if(i.push(t),t.module)return t.module;if(r.setters){for(var n=0;n<r.deps.length;n++){var s=r.depLoads[n],a=s.linkRecord;a&&-1===i.indexOf(s)&&f(s,a,a.setters?i:[])}r.execute.call(y)}else{var h={id:t.key},c=r.moduleObj;Object.defineProperty(h,"exports",{configurable:!0,set:function(e){c.default=e},get:function(){return c.default}});var u=function(e,t,r){return function(i){for(var n=0;n<e.length;n++)if(e[n]===i){var s,o=t[n];return(s=-1===r.indexOf(o)?f(o,o.linkRecord,r):o.linkRecord.moduleObj).__useDefault?s.default:s}}}(r.deps,r.depLoads,i);if(!r.executingRequire)for(n=0;n<r.deps.length;n++)u(r.deps[n]);var l=r.execute.call(e,u,c.default,h);if(void 0!==l?c.default=l:h.exports!==c.default&&(c.default=h.exports),c.default&&c.default.__esModule)for(var p in c.default)Object.hasOwnProperty.call(c.default,p)&&"default"!==p&&(c[p]=c.default[p])}h=t.module=new o(r.moduleObj);if(!r.setters)for(n=0;n<t.importerSetters.length;n++)t.importerSetters[n](h);return h}function p(e,t){return d[e]={key:e,module:t,importerSetters:[],linkRecord:void 0}}var d={},m="undefined"!=typeof Symbol?Symbol():"@@baseObject";o.prototype=Object.create(null),"undefined"!=typeof Symbol&&Symbol.toStringTag&&(o.prototype[Symbol.toStringTag]="Module");var g=n._nodeRequire||void 0!==s&&s.platform&&r(10),y={};return Object.freeze&&Object.freeze(y),function(e,t,r,n){return function(s){s(function(s){var a={_nodeRequire:g,register:u,registerDynamic:l,registry:{get:function(e){return d[e].module},set:p},newModule:function(e){return new o(e)}};p("@empty",new o({}));for(var c=0;c<t.length;c++)p(t[c],i(arguments[c]));n(a);var f=h(e[0]);if(e.length>1)for(c=1;c<e.length;c++)h(e[c]);return r?f.default:(f instanceof o&&Object.defineProperty(f,"__esModule",{value:!0}),f)})}}}("undefined"!=typeof self?self:i)(["a"],["c"],!1,function(e){this.require,this.exports,this.module,e.registerDynamic("b",[],!0,function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function s(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}this||self,r.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,r,i,a,h,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(o(r=this._events[e]))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(s(r))for(a=Array.prototype.slice.call(arguments,1),i=(c=r.slice()).length,h=0;h<i;h++)c[h].apply(this,a);return!0},i.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&((r=o(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var r,i,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){i=a;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}}),e.register("a",["b","c"],function(e,t){"use strict";var r,i,n,s,o,a,h;return{setters:[function(e){r=e.default},function(e){i=e.default}],execute:function(){n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},e("Fullscreen",h=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.$element=i(e),r.element=r.$element.get(0),i(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange msfullscreenchange",r.fullscreenChange.bind(r)).on("fullscreenerror webkitfullscreenerror mozfullscreenerror msfullscreenerror",r.fullscreenError.bind(r)),setTimeout(function(){t.isSupported||r.emit("unsupported")},0),r}return a(t,r),s(t,[{key:"requestFullscreen",value:function(){var e=this.element;return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():void 0}},{key:"fullscreenChange",value:function(e){var t=this.isActive;this.emit("change",t,e),this.emit("fullscreenchange",t,e)}},{key:"fullscreenError",value:function(e){var t=new Error("fullscreen failed");this.emit("error",t,e),this.emit("fullscreenerror",t,e)}},{key:"isActive",get:function(){return t.fullscreenElement===this.element}}],[{key:"exitFullscreen",value:function(){return document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():void 0}},{key:"fullscreenElement",get:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null}},{key:"fullscreenEnabled",get:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||!1}},{key:"isSupported",get:function(){return t.fullscreenEnabled}}]),t}()),e("Fullscreen",h),e("default",h)}}})})(function(i){a=[r(0)],void 0===(h="function"==typeof(o=i)?o.apply(t,a):o)||(e.exports=h)})}).call(this,r(6),r(5),r(4))},function(e,t,r){"use strict";r.r(t);var i=r(0),n=r(2),s=r.n(n),o=new(function(){function e(){}return e.prototype.bind=function(e,t){t.addEventListener("down",function(t){var r=t.detail;e.actionDown(r.button)}),t.addEventListener("up",function(t){var r=t.detail;e.actionUp(r.button)})},e}()),a={13:"start",16:"select",38:"up",87:"up",39:"right",68:"right",40:"down",83:"down",37:"left",65:"left",76:"a",86:"a",88:"b",75:"b",49:"save",48:"load",80:"speed"},h=new(function(){function e(){}return e.prototype.bind=function(e){window.addEventListener("keydown",function(t){e.actions.is(a[t.keyCode])&&(e.actionDown(a[t.keyCode]),t.preventDefault(),t.stopPropagation())}),window.addEventListener("keyup",function(t){e.actions.is(a[t.keyCode])&&(e.actionUp(a[t.keyCode]),t.preventDefault(),t.stopPropagation())})},e}()),c=r(1),u=r.n(c),l={0:"b",1:"a",4:"load",5:"save",7:"speed",8:"select",9:"start",12:"up",13:"down",14:"left",15:"right"},f=new(function(){function e(){}return e.prototype.bind=function(e){u.a.on("buttonPressed",function(t){var r=t.buttonIndex;t.button,t.gamepad;e.actionDown(l[r])}),u.a.on("buttonChanged",function(t){var r=t.buttonIndex,i=t.button;t.gamepad;e.actionChange(l[r],{value:i.value})}),u.a.on("buttonReleased",function(t){var r=t.buttonIndex;t.button,t.gamepad;e.actionUp(l[r])}),u.a.watch()},e}()),p=r(7),d=r.n(p),m=r(3),g=r.n(m),y=function(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{h(i.next(e))}catch(e){s(e)}}function a(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(o,a)}h((i=i.apply(e,t||[])).next())})},v=function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=i[2&s[0]?"return":s[0]?"throw":"next"])&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[0,n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},C=new(function(){function e(){}return e.prototype.bind=function(e){var t=this;this.gameboy=e;var r=document.querySelector("#insert-cartridge"),i=document.querySelector("#download-save"),s=document.querySelector("#upload-save"),o=r.querySelector("input"),a=s.querySelector("input");o.addEventListener("change",function(){return y(t,void 0,void 0,function(){var t;return v(this,function(r){switch(r.label){case 0:return i.classList.remove("disabled"),s.classList.remove("disabled"),[4,this.readFile(o)];case 1:return t=r.sent(),e.replaceCartridge(t),[2]}})})}),i.addEventListener("click",function(){e.core.cartridgeSlot.cartridge&&n.util.downloadFile(e.core.cartridgeSlot.cartridge.name+".sav",e.getBatteryFileArrayBuffer())}),a.addEventListener("change",function(){return y(t,void 0,void 0,function(){var t;return v(this,function(r){switch(r.label){case 0:return e.core.cartridgeSlot.cartridge?[4,this.readFile(a)]:[2];case 1:return t=r.sent(),[4,e.loadBatteryFileArrayBuffer(t)];case 2:return r.sent(),[2]}})})})},e.prototype.readFile=function(e){return y(this,void 0,void 0,function(){return v(this,function(t){return[2,new Promise(function(t,r){if(e.files.length>0){var i=e.files[0],n=new FileReader;n.addEventListener("load",function(){2===this.readyState&&t(this.result)}),n.readAsBinaryString(i)}else r()})]})})},e}()),b=new(function(){function e(){this.$element=i("<div />").css({display:"none",position:"absolute",top:"5px",right:"5px",fontSize:"25px",color:"red"}),this.hide=this.hide.bind(this)}return e.prototype.bind=function(e){var t=this;e.on("stateLoaded",function(e){var r=e.filename;t.notify("Loaded "+r)}).on("stateSaved",function(e){var r=e.filename;t.notify("Saved  "+r)})},e.prototype.notify=function(e){this.timeout&&clearTimeout(this.timeout),this.timeout=window.setTimeout(this.hide,500),this.$element.text(e),this.$element.show()},e.prototype.hide=function(){this.timeout=null,this.$element.hide()},e.prototype.appendTo=function(e){this.$element.appendTo(e)},e}()),S=function(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{h(i.next(e))}catch(e){s(e)}}function a(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(o,a)}h((i=i.apply(e,t||[])).next())})},B=function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=i[2&s[0]?"return":s[0]?"throw":"next"])&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[0,n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},k=new(function(){function e(){}return e.prototype.bind=function(){return S(this,void 0,void 0,function(){var e,t=this;return B(this,function(r){switch(r.label){case 0:if(!("serviceWorker"in navigator))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.serviceWorker.register("/jsGBC-web/service-worker.js",{scope:"/jsGBC-web/"})];case 2:return r.sent(),[3,4];case 3:return e=r.sent(),console.log("No it didnt. This happened: ",e),[3,4];case 4:return[2,new Promise(function(e){window.addEventListener("beforeinstallprompt",function(r){r.preventDefault(),t.promptEvent=r,e()})})]}})})},e.prototype.prompt=function(){this.promptEvent.prompt()},e}()),R=function(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{h(i.next(e))}catch(e){s(e)}}function a(e){try{h(i.throw(e))}catch(e){s(e)}}function h(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(o,a)}h((i=i.apply(e,t||[])).next())})},w=function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=i[2&s[0]?"return":s[0]?"throw":"next"])&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[0,n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};function T(){return R(this,void 0,void 0,function(){var e,t,r,n,a,c;return w(this,function(u){return e=i("jsgbc-ui"),t=e.get(0),r=i(t.screenElement),n=new s.a(t.lcdElement),a=new d.a(r),c=new g.a(r),a.on("change",function(){a.isActive?t.fullscreen=!0:(g.a.exitPointerLock(),t.fullscreen=!1)}),r.on("dblclick",function(){a.isActive?(d.a.exitFullscreen(),g.a.exitPointerLock()):(a.requestFullscreen(),c.requestPointerLock())}),h.bind(n),o.bind(n,t),f.bind(n),C.bind(n),b.bind(n),b.appendTo(t.screenElement),t.loading=!1,k.bind().then(function(){var e;(e=document.querySelector(".ribbon")).textContent="Add to Homescreen",e.addEventListener("click",function(e){e.preventDefault(),k.prompt()})}),[2]})})}window.WebComponentsReady?T():window.addEventListener("WebComponentsReady",T)},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,o,a,h,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(s(r=this._events[e]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(n(r))for(a=Array.prototype.slice.call(arguments,1),o=(c=r.slice()).length,h=0;h<o;h++)c[h].apply(this,a);return!0},r.prototype.addListener=function(e,t){var o;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(o=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!i(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var r,s,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(r=this._events[e]).length,s=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(r)){for(a=o;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){s=a;break}if(s<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){function r(e){var t=new Error('Cannot find module "'+e+'".');throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=10},function(e,t){function r(e){var t=new Error('Cannot find module "'+e+'".');throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=11},function(e,t){function r(e){var t=new Error('Cannot find module "'+e+'".');throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=12}])});